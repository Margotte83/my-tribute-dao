(this["webpackJsonptribute-ui"]=this["webpackJsonptribute-ui"]||[]).push([[3],{10:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.STANDBY="STANDBY",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(r||(r={}))},100:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(237);function c(){return Object(r.useContext)(a.a)}},1022:function(e,t,n){},1023:function(e,t,n){"use strict";n.r(t),n.d(t,"getApolloClient",(function(){return Zr}));var r=n(33),a=n(104),c=n(14),s=n(41),o=n(1049),i=n(1052),u=n(1043),d=n(1051),l=n(1048),b=n(1054),j=n(67),O=n(12),f=n(25),p=n(11),h=n(117),m=n(149),v=n(495),x=n(496),g=n(6),N=n(66),E=n(190),A=["type"],w=null;function y(e,t){return Object(g.a)(Object(g.a)({},e),t)}function k(){return w}var C=n(191),S={isOpen:!1};function _(e){return Object(g.a)(Object(g.a)({},e),{},{isOpen:!1})}function I(e){return Object(g.a)(Object(g.a)({},e),{},{isOpen:!0})}var T=["type"],D={BankAdapterContract:null,BankExtensionContract:null,BankFactoryContract:null,ConfigurationContract:null,CouponOnboardingContract:null,DaoFactoryContract:null,DaoRegistryAdapterContract:null,DaoRegistryContract:null,DistributeContract:null,ERC20ExtensionContract:null,FinancingContract:null,GuildKickContract:null,KycOnboardingContract:null,ManagingContract:null,NFTExtensionContract:null,OnboardingContract:null,RagequitContract:null,TributeContract:null,TributeNFTContract:null,VotingContract:null};function R(e){return Object(g.a)(Object(g.a)({},e),D)}function P(e,t){return Object(g.a)(Object(g.a)({},e),{},{BankFactoryContract:Object(g.a)({},t)})}function L(e,t){return Object(g.a)(Object(g.a)({},e),{},{DaoFactoryContract:Object(g.a)({},t)})}function F(e,t){return Object(g.a)(Object(g.a)({},e),{},{DaoRegistryContract:Object(g.a)({},t)})}function M(e,t){return Object(g.a)(Object(g.a)({},e),{},{DaoRegistryAdapterContract:Object(g.a)({},t)})}function B(e,t){return Object(g.a)(Object(g.a)({},e),{},{BankExtensionContract:Object(g.a)({},t)})}function G(e,t){return Object(g.a)(Object(g.a)({},e),{},{ConfigurationContract:Object(g.a)({},t)})}function V(e,t){return Object(g.a)(Object(g.a)({},e),{},{DistributeContract:Object(g.a)({},t)})}function U(e,t){return Object(g.a)(Object(g.a)({},e),{},{FinancingContract:Object(g.a)({},t)})}function Y(e,t){return Object(g.a)(Object(g.a)({},e),{},{GuildKickContract:Object(g.a)({},t)})}function H(e,t){return Object(g.a)(Object(g.a)({},e),{},{OnboardingContract:Object(g.a)({},t)})}function W(e,t){return Object(g.a)(Object(g.a)({},e),{},{RagequitContract:Object(g.a)({},t)})}function K(e,t){return Object(g.a)(Object(g.a)({},e),{},{TributeContract:Object(g.a)({},t)})}function z(e,t){return Object(g.a)(Object(g.a)({},e),{},{VotingContract:Object(g.a)({},t)})}function q(e,t){return Object(g.a)(Object(g.a)({},e),{},{ManagingContract:Object(g.a)({},t)})}function J(e,t){return Object(g.a)(Object(g.a)({},e),{},{BankAdapterContract:Object(g.a)({},t)})}function Q(e,t){return Object(g.a)(Object(g.a)({},e),{},{TributeNFTContract:Object(g.a)({},t)})}function X(e,t){return Object(g.a)(Object(g.a)({},e),{},{CouponOnboardingContract:Object(g.a)({},t)})}function $(e,t){return Object(g.a)(Object(g.a)({},e),{},{KycOnboardingContract:Object(g.a)({},t)})}function Z(e,t){return Object(g.a)(Object(g.a)({},e),{},{NFTExtensionContract:Object(g.a)({},t)})}function ee(e,t){return Object(g.a)(Object(g.a)({},e),{},{ERC20ExtensionContract:Object(g.a)({},t)})}var te=n(225),ne=n(94),re=["type"],ae={status:ne.a.OK};function ce(e,t){return Object(g.a)(Object(g.a)({},e),t)}var se=Object(m.combineReducers)({connectModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case C.a:return _(e);case C.b:return I(e);default:return e}},connectedMember:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(N.a)(t,A);switch(n){case E.b:return y(e,r);case E.a:return k();default:return e}},contracts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(N.a)(t,T);switch(n){case f.a:return R(e);case f.b:return J(e,r);case f.c:return B(e,r);case f.d:return P(e,r);case f.e:return G(e,r);case f.f:return X(e,r);case f.g:return L(e,r);case f.h:return F(e,r);case f.i:return M(e,r);case f.j:return V(e,r);case f.k:return ee(e,r);case f.l:return U(e,r);case f.m:return Y(e,r);case f.n:return $(e,r);case f.o:return q(e,r);case f.p:return Z(e,r);case f.q:return H(e,r);case f.r:return W(e,r);case f.s:return K(e,r);case f.t:return Q(e,r);case f.u:case f.v:return z(e,r);default:return e}},subgraphNetworkStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(N.a)(t,re);return n===te.a?ce(e,r):e}}),oe=Object(m.createStore)(se,Object(v.composeWithDevTools)(Object(m.applyMiddleware)(x.a))),ie=n(63),ue=n(20),de=n(21),le=n(31),be=n(32),je=n(1),Oe=n.n(je),fe=n(0),pe=function(e){Object(le.a)(n,e);var t=Object(be.a)(n);function n(){return Object(ue.a)(this,n),t.apply(this,arguments)}return Object(de.a)(n,[{key:"render",value:function(){return Object(fe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"github","data-prefix":"fab",viewBox:"0 0 496 512",children:Object(fe.jsx)("path",{fill:"currentColor",d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"})})}}]),n}(Oe.a.Component),he=pe;function me(e){return Object(fe.jsx)("svg",Object(g.a)(Object(g.a)({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"twitter","data-prefix":"fab",viewBox:"0 0 512 512"},e),{},{children:Object(fe.jsx)("path",{fill:"currentColor",d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"})}))}var ve,xe=function(e){Object(le.a)(n,e);var t=Object(be.a)(n);function n(){return Object(ue.a)(this,n),t.apply(this,arguments)}return Object(de.a)(n,[{key:"render",value:function(){return Object(fe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"medium","data-prefix":"fab",viewBox:"0 0 448 512",children:Object(fe.jsx)("path",{fill:"currentColor",d:"M0 32v448h448V32H0zm372.2 106.1l-24 23c-2.1 1.6-3.1 4.2-2.7 6.7v169.3c-.4 2.6.6 5.2 2.7 6.7l23.5 23v5.1h-118V367l24.3-23.6c2.4-2.4 2.4-3.1 2.4-6.7V199.8l-67.6 171.6h-9.1L125 199.8v115c-.7 4.8 1 9.7 4.4 13.2l31.6 38.3v5.1H71.2v-5.1l31.6-38.3c3.4-3.5 4.9-8.4 4.1-13.2v-133c.4-3.7-1-7.3-3.8-9.8L75 138.1V133h87.3l67.4 148L289 133.1h83.2v5z"})})}}]),n}(Oe.a.Component),ge=xe;function Ne(){return Object(fe.jsxs)("div",{className:"socialmedia",children:[Object(fe.jsx)("a",{href:ve.MEDIUM,target:"_blank",rel:"noopener noreferrer",children:Object(fe.jsx)(ge,{})}),Object(fe.jsx)("a",{href:ve.TWITTER,target:"_blank",rel:"noopener noreferrer",children:Object(fe.jsx)(me,{})}),Object(fe.jsx)("a",{href:ve.GITHUB,target:"_blank",rel:"noopener noreferrer",children:Object(fe.jsx)(he,{})})]})}function Ee(){return Object(fe.jsxs)("div",{className:"footer_wrap__1La5y org-footer-wrap grid--fluid",children:[Object(fe.jsx)("div",{className:"grid__row",children:Object(fe.jsxs)("div",{className:"footer_left__6CGtF grid__col-lg-6 grid__col-12",children:[Object(fe.jsx)("span",{className:"footer_item__PztHD org-footer-item",children:Object(fe.jsx)("span",{className:"undefined org-copyright-symbol",children:"2022 @ProdCapsule DAO"})}),Object(fe.jsx)("a",{className:"footer_item__PztHD org-footer-item",href:"",target:"_blank",rel:"noopener noreferrer",children:"Docs"}),Object(fe.jsx)("a",{className:"footer_item__PztHD org-footer-item",href:"https://www.cinecapsule.com/",target:"_blank",rel:"noopener noreferrer",children:"CineCapsule"}),Object(fe.jsx)("a",{className:"footer_item__PztHD org-footer-item",href:"/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy"}),Object(fe.jsx)("a",{className:"footer_item__PztHD org-footer-item",href:"mailto:hello@cinecapsule.com",target:"_blank",rel:"noopener noreferrer",children:"Contact Us"})]})}),Object(fe.jsx)(Ne,{})]})}!function(e){e.TWITTER="https://twitter.com/cine_capsule",e.GITHUB="https://github.com/CineCapsule",e.MEDIUM="#"}(ve||(ve={}));var Ae=n(4),we=n(16),ye=n(10),ke=Object(je.lazy)((function(){return n.e(9).then(n.bind(null,1084))}));function Ce(){var e=Object(c.c)((function(e){return e.connectModal.isOpen})),t=Object(je.useState)({isOpen:e,onRequestClose:function(){j(Object(f.y)())}}),n=Object(Ae.a)(t,2),r=n[0],a=n[1],s=Object(we.g)(),o=s.account,i=s.connected,u=s.initialCachedConnectorCheckStatus,d=s.web3Instance,l=Object(we.e)().isDefaultChain,b=Object(we.f)(o,null===d||void 0===d?void 0:d.currentProvider),j=Object(c.b)(),O=Object(ie.g)().pathname;return Object(je.useEffect)((function(){a((function(t){return Object(g.a)(Object(g.a)({},t),{},{isOpen:e})}))}),[e]),Object(je.useEffect)((function(){u===ye.a.FULFILLED&&j(!(!i||l&&!b)?Object(f.z)():Object(f.y)())}),[i,j,u,l,b,O]),e?Object(fe.jsx)(je.Suspense,{fallback:null,children:Object(fe.jsx)(ke,{maybeContractWallet:b,modalProps:r})}):null}var Se=n(500);function _e(){return Object(fe.jsxs)(Se.a,{children:[Object(fe.jsx)("title",{children:"ProdCapsule"}),Object(fe.jsx)("meta",{name:"description",content:"A modular DAO framework developed and coordinated by its members"})]})}function Ie(e){return Object(fe.jsx)("div",{className:"logo ".concat(e.size?"logo--".concat(e.size):""),children:Object(fe.jsxs)("span",{className:"logo-box-shaddow",children:["Invest in the films",Object(fe.jsx)("br",{}),"of tomorrow"]})})}function Te(){return Object(fe.jsx)("div",{className:"logo-container logo-container--center",children:Object(fe.jsx)(Ie,{size:"small"})})}function De(){return Object(fe.jsx)("div",{className:"logo-container logo-container--header",children:Object(fe.jsx)(Ie,{size:"medium"})})}function Re(){return Object(fe.jsx)("div",{className:"logo-container logo-container--center",children:Object(fe.jsx)(Ie,{size:"large"})})}var Pe=n(1030),Le=n(503),Fe=n(165),Me=n.n(Fe),Be=n(26),Ge=n(5),Ve=n(2),Ue=n.n(Ve);function Ye(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(je.useState)(),n=Object(Ae.a)(t,2),r=n[0],a=n[1],s=Object(je.useState)(ye.a.STANDBY),o=Object(Ae.a)(s,2),i=o[0],u=o[1],d=Object(je.useState)(),l=Object(Ae.a)(d,2),b=l[0],j=l[1],O=Object(je.useCallback)((function(){return f.apply(this,arguments)}),[e]);function f(){return(f=Object(Ge.a)(Ue.a.mark((function t(){var n,r,c;return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,u(ye.a.PENDING),t.next=6,e.instance.methods.symbol().call();case 6:return n=t.sent,t.next=9,e.instance.methods.decimals().call();case 9:r=t.sent,a({address:e.contractAddress,symbol:n,decimals:Number(r),image:"".concat(window.location.origin,"/favicon.ico")}),u(ye.a.FULFILLED),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(2),c=t.t0,console.log(c),a(void 0),j(c),u(ye.a.REJECTED);case 21:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){O()}),[O]),{daoTokenDetails:r,daoTokenDetailsError:b,daoTokenDetailsStatus:i}}var He=n(1055),We=n(17),Ke=n(28);var ze=["customStyles"];function qe(e){var t=e.customStyles,n=Object(N.a)(e,ze),a=Object(je.useState)(),s=Object(Ae.a)(a,2),o=s[0],i=s[1],u=Object(je.useState)(),d=Object(Ae.a)(u,2),l=d[0],b=d[1],j=Object(je.useState)(""),f=Object(Ae.a)(j,2),m=f[0],v=f[1],x=function(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),n=Object(c.c)((function(e){return e.connectedMember})),a=Object(c.c)((function(e){return e.subgraphNetworkStatus.status})),s=Object(we.g)().web3Instance,o=Object(He.a)(h.c,{variables:{tokenAddress:null===t||void 0===t?void 0:t.contractAddress.toLowerCase()}}),i=Object(Ae.a)(o,2),u=i[0],d=i[1],l=d.called,b=d.loading,j=d.data,O=d.error,f=Object(je.useState)(),p=Object(Ae.a)(f,2),m=p[0],v=p[1],x=Object(je.useState)(),g=Object(Ae.a)(x,2),N=g[0],E=g[1],A=Object(je.useCallback)((function(){return y.apply(this,arguments)}),[e,t,s]),w=Object(je.useCallback)((function(){try{if(j){if(0===j.tokens.length)throw new Error('"'.concat(null===t||void 0===t?void 0:t.contractAddress,'" erc20 address not found.'));v(j.tokens[0])}else{if(O)throw new Error("subgraph query error: ".concat(O.message));if("undefined"===typeof j)throw new Error("subgraph query error: data is undefined")}}catch(O){var e=O,n=e.message;console.log(n),A()}}),[j,null===t||void 0===t?void 0:t.contractAddress,O,A]);function y(){return(y=Object(Ge.a)(Ue.a.mark((function n(){var a,c,o,i,u,d,l,b,j,O,f,p,h,m,x,g,N;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t&&s){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,a=e.abi,c=e.contractAddress,o=e.instance.methods,n.next=6,o.getNbMembers().call();case 6:if(i=n.sent,!(Number(i)>0)){n.next=26;break}return u=a.find((function(e){return"getMemberAddress"===e.name})),d=Object(r.a)(Array(Number(i)).keys()).map((function(e){return[c,u,[e.toString()]]})),n.next=12,Object(Ke.l)({calls:d,web3Instance:s});case 12:return l=n.sent,b=t.abi,j=t.contractAddress,O=b.find((function(e){return"balanceOf"===e.name})),f=l.map((function(e){return[j,O,[e]]})),n.next=18,Object(Ke.l)({calls:f,web3Instance:s});case 18:return p=n.sent,h=l.map((function(e,t){return{member:{id:e},balance:p[t]}})),m=h.filter((function(e){return Object(We.toBN)(e.balance).gt(Object(We.toBN)(0))})),x=Object(We.toChecksumAddress)(t.contractAddress),n.next=24,t.instance.methods.symbol().call();case 24:g=n.sent,v({holders:m,symbol:g,tokenAddress:x});case 26:n.next=33;break;case 28:n.prev=28,n.t0=n.catch(2),N=n.t0,v(void 0),E(N);case 33:case"end":return n.stop()}}),n,null,[[2,28]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){!l&&null!==t&&void 0!==t&&t.contractAddress&&u()}),[l,null===t||void 0===t?void 0:t.contractAddress,u]),Object(je.useEffect)((function(){a===ne.a.OK?l&&!b&&null!==t&&void 0!==t&&t.contractAddress&&w():A()}),[l,null===t||void 0===t?void 0:t.contractAddress,A,w,b,a]),Object(je.useEffect)((function(){n&&A()}),[n,A]),{tokenHolderBalances:m,tokenHolderBalancesError:N}}(),E=x.tokenHolderBalances,A=Object(we.g)(),w=A.account,y=A.networkId;return Object(je.useEffect)((function(){if(i(void 0),w&&E){var e=E.holders,t=E.symbol,n=E.tokenAddress,r=null===e||void 0===e?void 0:e.find((function(e){var t;return(null===(t=e.member)||void 0===t?void 0:t.id.toLowerCase())===w.toLowerCase()}));r&&i({balance:r.balance,tokenAddress:n,symbol:t}),w&&y&&v("".concat(O.l[y],"/token/").concat(n,"?a=").concat(w)),b("".concat(window.location.origin,"/favicon.ico"))}}),[w,y,E]),o?Object(fe.jsx)(Be.a,{children:Object(fe.jsxs)("a",{className:"daotokenholder__button",rel:"noopener noreferrer",target:"_blank",href:m,style:Object(g.a)(Object(g.a)({},n),t),children:[Object(fe.jsx)("span",{className:"daotokenholder__balance",children:Object(p.d)(o.balance)}),Object(fe.jsx)("span",{className:"daotokenholder__symbol",children:o.symbol}),l&&Object(fe.jsx)("img",{src:l,alt:"Token Icon"})]})}):Object(fe.jsx)(fe.Fragment,{})}function Je(){return Object(fe.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"bars","data-prefix":"fal",viewBox:"0 0 448 512",children:Object(fe.jsx)("path",{fill:"currentColor",d:"M442 114H6a6 6 0 01-6-6V84a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6z"})})}var Qe=n(163),Xe=n(148),$e=n(480);function Ze(e){var t=e.customWalletText,n=e.showWalletETHBadge,r=void 0===n||n,a=Object(we.g)(),s=a.account,o=a.accountENS,i=a.connected,u=a.web3Modal,d=Object(we.e)().isDefaultChain,l=Object(c.b)(),b=!1===d;return Object(fe.jsxs)("button",{className:"walletconnect__connect-button \n        ".concat(b&&i?"walletconnect__connect-button--error":""),onClick:function(){l(Object(f.z)())},children:[Object(fe.jsx)("span",{className:"connect-button-text ".concat(i?"connect-button-text--ethAddress":""),children:t?"function"===typeof t?t({account:s,connected:i,isMobile:Object(Xe.isMobile)()}):t:s?o||Object(p.m)(Object(We.toChecksumAddress)(s)):"Connect"}),b&&i&&Object(fe.jsx)("span",{children:"Wrong Network"}),r&&Object(fe.jsx)($e.a,{providerName:null===u||void 0===u?void 0:u.cachedProvider})]})}var et={transition:"0.1s"},tt={entering:{right:"-300px"},entered:{right:0},exiting:{right:0,opacity:0},exited:{right:"-300px",opacity:0}},nt={entering:{right:0,opacity:1},entered:{right:"-300px",opacity:1},exiting:{right:"-300px",opacity:1},exited:{right:0,opacity:1}};function rt(){return Object(fe.jsx)("nav",{role:"navigation",id:"navigation",children:Object(fe.jsxs)("ul",{className:"nav__list","data-testid":"nav__list",children:[Object(fe.jsx)("li",{tabIndex:0,children:Object(fe.jsx)(s.c,{to:"/governance",children:Object(fe.jsx)("span",{children:"Governance"})})}),Object(fe.jsx)("li",{tabIndex:0,children:Object(fe.jsx)(s.c,{to:"/members",children:Object(fe.jsx)("span",{children:"Members"})})})]})})}function at(){var e=Object(c.c)((function(e){return e.connectedMember})),t=Object(je.useState)(!1),n=Object(Ae.a)(t,2),r=n[0],a=n[1],o=Object(je.useState)(tt),i=Object(Ae.a)(o,2),u=i[0],d=i[1],l=Object(we.g)().account,b=Object(je.useRef)();Object(je.useEffect)((function(){return function(){b.current&&clearTimeout(b.current)}}),[]);var j=!(!l||!e||!e.isActiveMember&&!e.isAddressDelegated||Object(p.j)(l)!==Object(p.j)(e.memberAddress)&&Object(p.j)(l)!==Object(p.j)(e.delegateKey));function f(e){if(!e)return d(nt),b.current=setTimeout((function(){return a(e)}),500),function(){return b.current&&clearTimeout(b.current)};a(e),d(tt)}return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{tabIndex:0,className:"nav__hamburger-wrapper",children:Object(fe.jsx)("div",{className:"nav__hamburger","aria-label":"Menu","aria-controls":"navigation",onClick:function(e){e.preventDefault(),f(!0)},children:Object(fe.jsx)(Je,{})})}),Object(fe.jsx)(Me.a,{ariaHideApp:!1,className:"nav-modal-container",isOpen:r,onRequestClose:function(){f(!1)},overlayClassName:"nav-modal-overlay",role:"dialog",style:{overlay:{zIndex:"99"}},children:Object(fe.jsx)(Pe.a,{appear:!0,in:r,timeout:200,children:function(t){return Object(fe.jsx)("nav",{role:"navigation",id:"navigation",children:Object(fe.jsxs)("div",{style:Object(g.a)(Object(g.a)({},et),u[t]),className:"nav-modal",children:[Object(fe.jsx)("button",{className:"modal__close-button modal__close-button--icon",onClick:function(e){e.preventDefault(),f(!1)},children:Object(fe.jsx)(Qe.a,{})}),Object(fe.jsx)(Te,{}),Object(fe.jsx)("div",{className:"nav-modal__walletconnect-button-container",children:Object(fe.jsx)(Ze,{})}),Object(fe.jsxs)("ul",{className:"nav__list",children:[O.h&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.c,{to:"/join",children:Object(fe.jsx)("span",{children:"Join (KYC)"})})}),Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.c,{to:"/onboard",children:Object(fe.jsx)("span",{children:"\ud83c\udfa5 Become a member"})})}),Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.c,{to:"/onboarding",children:Object(fe.jsx)("span",{children:"\ud83c\udfa5 Onbording"})})}),Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.c,{to:"/collection",children:Object(fe.jsx)("span",{children:"\ud83c\udfa5 Collection"})})}),j&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.c,{to:"/governance",children:Object(fe.jsx)("span",{children:"\ud83c\udfa5 Governance"})})}),j&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.c,{to:"/tributes",children:Object(fe.jsx)("span",{children:"\ud83c\udfa5 Tribute"})})}),j&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.c,{to:"/transfers",children:Object(fe.jsx)("span",{children:"\ud83c\udfa5 Transfer"})})}),Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.c,{to:"/members",children:Object(fe.jsx)("span",{children:"\ud83c\udfa5 Members"})})}),j&&Object(fe.jsx)("li",{onClick:function(){f(!1)},children:Object(fe.jsx)(s.c,{to:"/members/".concat(null===e||void 0===e?void 0:e.memberAddress),children:Object(fe.jsx)("span",{children:"\ud83c\udfa5 Profile"})})})]})]})})}})})]})}function ct(){return Object(fe.jsx)(Le.a,{query:"(max-width: 62em)",children:function(e){return Object(fe.jsx)("div",{className:"nav-header",children:Object(fe.jsxs)("div",{className:"nav-header__menu-container",children:[Object(fe.jsx)(rt,{}),Object(fe.jsx)(qe,{border:"1px solid #c3d6dc"}),Object(fe.jsx)(at,{}),Object(fe.jsx)("div",{className:"nav-header__walletconnect-button-container",children:Object(fe.jsx)(Ze,{})})]})})}})}function st(){function e(e){return Object(fe.jsx)(s.b,{to:"/",children:e.children})}return Object(fe.jsxs)("header",{className:"header",children:[Object(fe.jsx)(e,{children:Object(fe.jsx)(De,{})}),Object(fe.jsx)("div",{className:"header__nav-container",children:Object(fe.jsx)(ct,{})})]})}var ot=n(87),it=n(23),ut=n(50),dt=n(37),lt=n(42),bt=n(44),jt=n(9),Ot=n(35),ft=["error"];function pt(e){var t=e.error,n=Object(N.a)(e,ft);return Object(fe.jsx)(fe.Fragment,{children:t&&Object(fe.jsx)(Be.a,{children:Object(fe.jsx)("p",Object(g.a)(Object(g.a)({},n),{},{className:"error-message ".concat(n.className||""),children:t}))})})}var ht=n(53),mt=n(238);function vt(e){var t=e.value;return t?Object(fe.jsxs)("details",{children:[Object(fe.jsx)("summary",{style:{cursor:"pointer",outline:"none"},children:Object(fe.jsx)("small",{children:"Preview Markdown"})}),Object(fe.jsx)("div",{style:{marginTop:"1em"},children:Object(fe.jsx)(mt.a,{children:t})})]}):null}var xt,gt=["children"],Nt=function(e){var t=e.children,n=Object(N.a)(e,gt);return Object(fe.jsx)("div",Object(g.a)(Object(g.a)({style:{position:"relative"}},n),{},{children:t}))};!function(e){e.title="title",e.description="description"}(xt||(xt={}));function Et(){var e=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.delegateKey})),t=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),n=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),r=Object(je.useState)(),a=Object(Ae.a)(r,2),s=a[0],o=a[1],i=Object(we.g)(),u=i.connected,d=i.account,l=Object(bt.i)(),b=l.proposalSignAndSendStatus,j=l.signAndSendProposal,O=Object(we.e)().defaultChainError,f=Object(ot.b)({mode:"onBlur",reValidateMode:"onChange"}),h=Object(ie.f)(),m=f.errors,v=f.getValues,x=f.register,g=f.trigger,N=f.watch,E=u&&d,A=b===jt.f.AWAITING_CONFIRM||b===jt.f.PENDING,w=b===jt.f.FULFILLED,y=A||w;function k(e){return C.apply(this,arguments)}function C(){return(C=Object(Ge.a)(Ue.a.mark((function e(t){var n,r,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j({partialProposalData:{name:t.title,body:t.description,metadata:{type:lt.d.Governance}},type:it.SnapshotType.proposal});case 3:n=e.sent,r=n.uniqueId,h.push("/governance/".concat(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),a=e.t0,o(a);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return E&&n&&!O?Object(fe.jsx)(At,{children:Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:xt.title,children:"Title"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(xt.title),"aria-invalid":m.title?"true":"false",id:xt.title,name:xt.title,ref:x({required:dt.a.REQUIRED}),type:"text",disabled:y}),Object(fe.jsx)(pt,{error:Object(p.h)(xt.title,m),id:"error-".concat(xt.title)})]})]}),Object(fe.jsxs)("div",{className:"form__textarea-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:xt.description,children:"Description"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("textarea",{"aria-describedby":"error-".concat(xt.description),"aria-invalid":m.description?"true":"false",id:xt.description,name:xt.description,placeholder:"Say something about your governance proposal...",ref:x({required:dt.a.REQUIRED}),disabled:y}),Object(fe.jsx)(pt,{error:Object(p.h)(xt.description,m),id:"error-".concat(xt.description)}),Object(fe.jsx)(vt,{value:N(xt.description)})]})]}),Object(fe.jsx)("button",{"aria-label":A?"Submitting your proposal...":"",className:"button",disabled:y,onClick:Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:k(v());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:A?Object(fe.jsx)(ht.a,{}):w?"Done":"Submit"}),y&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){switch(b){case jt.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(ut.a,{intervalMs:500})]});case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:["Submitting",Object(fe.jsx)(ut.a,{intervalMs:500})]});case jt.f.FULFILLED:return"Done!";default:return""}}()}),s&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"Something went wrong while submitting the proposal.",error:s})})]})}):Object(fe.jsx)(At,{children:Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:function(){return E?O?O.message:n||t?!n&&e&&t?(r=e,"Your member address is delegated to ".concat(Object(p.m)(r,7),". You must use that address.")):void 0:"Either you are not a member, or your membership is not active.":Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)("p",{style:{color:"#ff6f6f"},children:"Connect your wallet to submit a governance proposal"})});var r}()})})})}function At(e){return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Governance Proposal"})}),Object(fe.jsxs)("div",{className:"form-wrapper",children:[Object(fe.jsx)("div",{className:"form__description",children:Object(fe.jsx)("p",{children:"As a member, you can make proposals related to the governance of ProdCapsule. Describe the proposal in full so that others can make an informed decision. Include links to any additional supporting materials in the description to better explain your proposal."})}),e.children]})]})})}var wt,yt=n(74),kt=["defaultValue","max","min","name","onChange","step"];function Ct(e){var t=e.defaultValue,n=e.max,r=e.min,a=e.name,c=e.onChange,s=e.step,o=Object(N.a)(e,kt),i=Object(je.useState)(),u=Object(Ae.a)(i,2),d=u[0],l=u[1];return Object(fe.jsx)("input",Object(g.a)(Object(g.a)({},o),{},{"aria-valuemin":r,"aria-valuemax":n,"aria-valuenow":Number(d),max:n,min:r,name:a,onChange:function(e){l(e.target.value),c&&c(e)},step:s,type:"range",value:d||t}))}!function(e){e.ethAddress="ethAddress",e.amount="amount"}(wt||(wt={}));var St="\u2014",_t=O.u!==O.m;function It(e){var t=e.defaultChainError;return e.isConnected?t?t.message:void 0:Object(fe.jsx)("div",{className:"proposalcard",children:Object(fe.jsxs)("div",{className:"proposalcard__content",children:[Object(fe.jsx)("p",{children:"ProdCapsule DAO aims to bring together members who are interested in supporting the growing digital gaming ecosystem. Ready Player DAO will have up to \u2014 initial members, who will pool their capital to make investments. Each member can purchase \u2014 Ready Player DAO units for \u2014 ETH (up to \u2014 units for \u2014 ETH). Please put your preferred ETH address below and the amount of ETH you'd like to contribute to Ready Player DAO. Once you fill this out, you will be fully onboarded and sent information on the Ready Player DAO weekly call and Discord community."}),Object(fe.jsx)("p",{style:{color:"#ff6f6f"},children:"Connect your wallet to get started."})]})})}function Tt(e){switch(e){case jt.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(ut.a,{intervalMs:500})]});case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:["Submitting",Object(fe.jsx)(ut.a,{intervalMs:500})]});case jt.f.FULFILLED:return"Done!";default:return null}}function Dt(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(we.e)().defaultChainError,r=Object(we.g)(),a=r.connected,s=r.account,o=r.web3Instance,i=Object(bt.i)(),u=i.proposalData,d=i.proposalSignAndSendError,l=i.proposalSignAndSendStatus,b=i.signAndSendProposal,j=Object(ot.b)({mode:"onBlur",reValidateMode:"onChange"}),f=Object(ie.f)(),h=Object(je.useState)(),m=Object(Ae.a)(h,2),v=m[0],x=m[1],g=Object(je.useState)(),N=Object(Ae.a)(g,2),E=N[0],A=N[1],w=Object(je.useState)(),y=Object(Ae.a)(w,2),k=y[0],C=y[1],S=Object(je.useState)(),_=Object(Ae.a)(S,2),I=_[0],T=_[1],D=Object(je.useState)(),R=Object(Ae.a)(D,2),P=R[0],L=R[1],F=Object(je.useState)(),M=Object(Ae.a)(F,2),B=M[0],G=M[1],V=Object(je.useState)(),U=Object(Ae.a)(V,2),Y=U[0],H=U[1],W=Object(je.useState)(),K=Object(Ae.a)(W,2),z=K[0],q=K[1],J=j.clearErrors,Q=j.control,X=j.errors,$=j.getValues,Z=j.register,ee=j.setValue,te=j.trigger,ne=j.watch,re=ne(wt.ethAddress),ae=ne(wt.amount),ce=v||d,se=!(!a||!s),oe=l===jt.f.AWAITING_CONFIRM||l===jt.f.PENDING,ue=l===jt.f.FULFILLED,de=oe||ue,le=Object(bt.a)(re),be=le.checkApplicantError,Oe=le.checkApplicantInvalidMsg,pe=le.checkApplicantStatus,he=le.isApplicantValid,me=B?Object(p.d)(B.unitsPerChunk):St,ve=I?Object(p.d)(I):St,xe=B?Object(p.d)(String(Object(We.toBN)(B.unitsPerChunk).mul(Object(We.toBN)(B.maximumChunks)))):St,ge=P?Object(p.d)(P):St,Ne=_t?null===z||void 0===z?void 0:z.symbol:"ETH",Ee=Object(je.useCallback)((function(){return Re.apply(this,arguments)}),[s,t,Y,o]),ke=Object(je.useCallback)((function(){try{if(!e||t||!B)return C(void 0),T(void 0),L(void 0),void ee(wt.amount,St);if(_t){if(!z)return C(void 0),T(void 0),L(void 0),void ee(wt.amount,St);var n=Object(We.toBN)(10).pow(Object(We.toBN)(z.decimals)),r=Object(We.toBN)(B.chunkSize).div(n),a=Object(We.toBN)(B.chunkSize).mod(n),c=a.eq(Object(We.toBN)(0))?Number(String(r)):Number("".concat(String(r),".").concat(String(a)));C(c),L(c*Number(B.maximumChunks)),T(c),ee(wt.amount,String(c))}else C(Number(Object(We.fromWei)(B.chunkSize,"ether"))),L(Number(Object(We.fromWei)(Object(We.toBN)(B.chunkSize).mul(Object(We.toBN)(B.maximumChunks)),"ether"))),T(Number(Object(We.fromWei)(B.chunkSize,"ether"))),ee(wt.amount,Object(We.fromWei)(B.chunkSize,"ether"))}catch(s){C(void 0),T(void 0),L(void 0),ee(wt.amount,St),console.error(s)}}),[e,t,z,B,ee]),Ce=Object(je.useCallback)((function(){return De.apply(this,arguments)}),[e,t]),Se=Object(je.useCallback)((function(){return Ie.apply(this,arguments)}),[t,o]),_e=Object(je.useCallback)((function(){return Te.apply(this,arguments)}),[t,Y]);function Ie(){return(Ie=Object(Ge.a)(Ue.a.mark((function e(){var r,a,c,s;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&!t){e.next=3;break}return H(void 0),e.abrupt("return");case 3:if(e.prev=3,O.u){e.next=6;break}throw new Error("No Onboarding ERC20 address was found. Are you sure it is set?");case 6:return e.next=8,Promise.resolve().then(n.t.bind(null,507,3));case 8:r=e.sent,a=r.default,c=a,s=new o.eth.Contract(c,O.u),H(s),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0),H(void 0);case 19:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function Te(){return(Te=Object(Ge.a)(Ue.a.mark((function e(){var n,r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y&&!t){e.next=3;break}return q(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,Y.methods.symbol().call();case 6:return n=e.sent,e.next=9,Y.methods.decimals().call();case 9:r=e.sent,q({symbol:n,decimals:Number(r)}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),q(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function De(){return(De=Object(Ge.a)(Ue.a.mark((function n(){var r,a,c;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e&&!t){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,Object(Ke.g)(e.instance,jt.b.onboardingChunkSize,O.y);case 5:return r=n.sent,n.next=8,Object(Ke.g)(e.instance,jt.b.onboardingMaximumChunks,O.y);case 8:return a=n.sent,n.next=11,Object(Ke.g)(e.instance,jt.b.onboardingUnitsPerChunk,O.y);case 11:c=n.sent,G({chunkSize:r,maximumChunks:a,unitsPerChunk:c}),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(0),console.error(n.t0),G(void 0);case 19:case"end":return n.stop()}}),n,null,[[0,15]])})))).apply(this,arguments)}function Re(){return(Re=Object(Ge.a)(Ue.a.mark((function e(){var n,r,a,c,i,u,d;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s&&!t){e.next=4;break}return A(void 0),e.abrupt("return");case 4:if(!_t){e.next=22;break}if(Y){e.next=8;break}return A(void 0),e.abrupt("return");case 8:return e.next=10,Y.methods.balanceOf(s).call();case 10:return n=e.sent,r=Object(We.toBN)(n),e.next=14,Y.methods.decimals().call();case 14:a=e.sent,c=Object(We.toBN)(10).pow(Object(We.toBN)(a)),i=r.div(c),u=r.mod(c),d=u.eq(Object(We.toBN)(0))?String(i):"".concat(String(i),".").concat(String(u)),A(d),e.next=32;break;case 22:if(o){e.next=25;break}return A(void 0),e.abrupt("return");case 25:return e.t0=A,e.t1=o.utils,e.next=29,o.eth.getBalance(s);case 29:e.t2=e.sent,e.t3=e.t1.fromWei.call(e.t1,e.t2,"ether"),(0,e.t0)(e.t3);case 32:e.next=38;break;case 34:e.prev=34,e.t4=e.catch(0),console.error(e.t4),A(void 0);case 38:case"end":return e.stop()}}),e,null,[[0,34]])})))).apply(this,arguments)}function Pe(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(Ge.a)(Ue.a.mark((function e(t){var n,r,a,c,o,i,d,l,j,h,m,v,g,N,E;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,se){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(s){e.next=5;break}throw new Error("No account found.");case 5:if(be&&console.warn("Error checking if the applicant address is valid: ".concat(be.message)),pe!==ye.a.FULFILLED||he||!Oe){e.next=8;break}throw new Error(Oe);case 8:if(n=(null===u||void 0===u?void 0:u.uniqueId)||"",r=t.ethAddress,a=t.amount,c=Object(We.toChecksumAddress)(r),o=Object(We.toChecksumAddress)(s),i="",!_t){e.next=23;break}if(z){e.next=16;break}throw new Error("No ERC20 details found.");case 16:if(Number.isInteger(Number(a))){e.next=18;break}throw new Error("The amount must be an integer for an ERC20 token.");case 18:d=Object(We.toBN)(10).pow(Object(We.toBN)(z.decimals)),l=Object(We.toBN)(a).mul(d),i=String(l),e.next=25;break;case 23:j=Object(We.toWei)(a,"ether"),i=j;case 25:if(h={tributeAmount:Object(p.d)(a),tributeAmountUnit:Ne},m=[c,O.y,i],n){e.next=34;break}return v=Object(p.j)(r)===Object(p.j)(s)?"Onboarding ".concat(Object(p.m)(c,7),"."):"Onboarding proposal from ".concat(Object(p.m)(o,7)," for applicant ").concat(Object(p.m)(c,7),"."),e.next=31,b({partialProposalData:{name:c,body:v,metadata:{proposalAmountValues:h,submitActionArgs:m,accountAuthorizedToProcessPassedProposal:o}},adapterName:jt.a.onboarding,type:it.SnapshotType.draft});case 31:g=e.sent,N=g.uniqueId,n=N;case 34:f.push("/onboarding/".concat(n)),e.next=41;break;case 37:e.prev=37,e.t0=e.catch(0),E=e.t0,x(E);case 41:case"end":return e.stop()}}),e,null,[[0,37]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){Ee()}),[Ee]),Object(je.useEffect)((function(){t||ee(wt.ethAddress,s&&Object(We.toChecksumAddress)(s))}),[s,t,ee]),Object(je.useEffect)((function(){ke()}),[ke]),Object(je.useEffect)((function(){x(void 0),J()}),[J,re]),Object(je.useEffect)((function(){Ce()}),[Ce]),Object(je.useEffect)((function(){_t&&Se()}),[Se]),Object(je.useEffect)((function(){_t&&_e()}),[_e]),!se||t?Object(fe.jsx)(Rt,{children:Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:It({defaultChainError:t,isConnected:se})})})}):Object(fe.jsx)(Rt,{children:Object(fe.jsx)("div",{className:"section-wrapper1",children:Object(fe.jsxs)("div",{className:"proposalcard",children:[Object(fe.jsxs)("div",{className:"form__description",children:[Object(fe.jsxs)("p",{children:["To become a member of ProdCapsule, each member can purchase"," ",me," units for ",ve," ",Ne," (up to"," ",xe," units for ",ge," ",Ne,"). Please put your preferred ETH address below and the amount of ",Ne," ","you'd like to contribute."]}),Object(fe.jsxs)("p",{children:["Following your submission, existing members will consider your proposal. If approved by vote, your proposal will be processed and you will finalize the transfer of your allocated ",Ne," in exchange for membership units."]})]}),Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:wt.ethAddress,children:"Applicant Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(wt.ethAddress),"aria-invalid":X.ethAddress?"true":"false",id:wt.ethAddress,name:wt.ethAddress,ref:Z({validate:function(e){return e?!!Object(yt.a)(e)||dt.a.INVALID_ETHEREUM_ADDRESS:dt.a.REQUIRED}}),type:"text",disabled:de}),Object(fe.jsx)(pt,{error:Object(p.h)(wt.ethAddress,X),id:"error-".concat(wt.ethAddress)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:wt.amount,id:"".concat(wt.amount,"-label"),children:"Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsx)(ot.a,{render:function(e){var t=e.onChange;return Object(fe.jsx)(Ct,{"data-testid":"onboarding-slider","aria-labelledby":"".concat(wt.amount,"-label"),defaultValue:I||0,id:wt.amount,max:P||0,min:I||0,step:k||0,onChange:t,disabled:de})},defaultValue:I||0,control:Q,name:wt.amount,rules:{validate:function(e){return!(Number(e)>Number(E))||"Insufficient funds. ".concat(function(e){return e?Object(p.d)(e):"---"}(E)," ").concat(Ne," available.")}}}),Object(fe.jsx)(pt,{error:Object(p.h)(wt.amount,X),id:"error-".concat(wt.amount)})]}),Object(fe.jsxs)("div",{className:"form__input-addon",children:[Object(p.d)(ae)," ",Ne]})]}),Object(fe.jsx)("button",{"aria-label":oe?"Submitting your proposal.":"",className:"button",disabled:de,onClick:de?function(){}:Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:Pe($());case 5:case"end":return e.stop()}}),e)}))),type:"submit",children:oe?Object(fe.jsx)(ht.a,{}):ue?"Done":"Submit"}),de&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:Tt(l)}),ce&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"Something went wrong while submitting the proposal.",error:ce,detailsProps:{open:!0}})})]})]})})})}function Rt(e){return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"BECOME A MEMBER"})}),Object(fe.jsx)("hr",{}),Object(fe.jsx)("br",{}),Object(fe.jsx)("div",{className:"form-wrapper",children:e.children})]})})}var Pt,Lt=n(199),Ft=n(48),Mt=n(507),Bt=n(62),Gt=n(73),Vt=n(51);!function(e){e.type="type",e.selectedToken="selectedToken",e.memberAddress="memberAddress",e.amount="amount",e.notes="notes"}(Pt||(Pt={}));var Ut;function Yt(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DistributeContract})),t=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DaoRegistryContract})),n=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.BankExtensionContract})),a=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.delegateKey})),s=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),o=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),i=Object(we.e)().defaultChainError,u=Object(we.g)(),d=u.connected,l=u.account,b=u.web3Instance,j=Object(we.c)().average,f=Object(we.a)(),h=f.txError,m=f.txEtherscanURL,v=f.txIsPromptOpen,x=f.txSend,N=f.txStatus,E=Object(bt.i)(),A=E.proposalData,w=E.proposalSignAndSendStatus,y=E.signAndSendProposal,k=Object(ot.b)({mode:"onBlur",reValidateMode:"onChange"}),C=Object(ie.f)(),S=Object(je.useState)(),_=Object(Ae.a)(S,2),I=_[0],T=_[1],D=Object(je.useState)(),R=Object(Ae.a)(D,2),P=R[0],L=R[1],F=Object(je.useState)(),M=Object(Ae.a)(F,2),B=M[0],G=M[1],V=k.errors,U=k.getValues,Y=k.setValue,H=k.register,W=k.trigger,K=k.watch,z="all members"===K("type"),q=K("selectedToken"),J=I||h,Q=d&&l,X=Mt,$=N===jt.f.AWAITING_CONFIRM||N===jt.f.PENDING||w===jt.f.AWAITING_CONFIRM||w===jt.f.PENDING,Z=N===jt.f.FULFILLED&&w===jt.f.FULFILLED,ee=$||Z||v,te=Object(je.useCallback)((function(){return re.apply(this,arguments)}),[n,l,X,b]),ne=Object(je.useCallback)((function(){return ae.apply(this,arguments)}),[l,q]);function re(){return(re=Object(Ge.a)(Ue.a.mark((function e(){var t,a,c,s,o,i,u,d,j,f,p,h,m,v,x,N,E,A,w,y,k,C,S,_,I,T,D;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&n&&b){e.next=3;break}return L(void 0),e.abrupt("return");case 3:return e.prev=3,t=n.abi,a=n.contractAddress,c=n.instance.methods,e.next=7,c.nbTokens().call();case 7:if(s=e.sent,!(Number(s)<1)){e.next=12;break}L([]),e.next=44;break;case 12:return o=[],i=t.find((function(e){return"getToken"===e.name})),u=Object(r.a)(Array(Number(s)).keys()).map((function(e){return[a,i,[e.toString()]]})),e.next=17,Object(Ke.l)({calls:u,web3Instance:b});case 17:return d=e.sent,j=t.find((function(e){return"balanceOf"===e.name})),f=d.map((function(e){return[a,j,[O.p,e]]})),e.next=22,Object(Ke.l)({calls:f,web3Instance:b});case 22:if(p=e.sent,h=d.map((function(e,t){return{address:e,daoBalance:p[t]}})).filter((function(e){return Object(We.toBN)(e.daoBalance).gt(Object(We.toBN)(0))})),(m=h.find((function(e){return e.address===O.m})))&&o.push(Object(g.a)(Object(g.a)({},m),{},{name:"Ether",symbol:"ETH",decimals:18})),!((v=h.filter((function(e){return e.address!==O.m}))).length>0)){e.next=43;break}return x=X.find((function(e){return"name"===e.name})),N=v.map((function(e){return[e.address,x,[]]})),E=X.find((function(e){return"symbol"===e.name})),A=v.map((function(e){return[e.address,E,[]]})),w=X.find((function(e){return"decimals"===e.name})),y=v.map((function(e){return[e.address,w,[]]})),k=[].concat(Object(r.a)(N),Object(r.a)(A),Object(r.a)(y)),e.next=37,Object(Ke.l)({calls:k,web3Instance:b});case 37:for(C=e.sent,S=[];C.length;)S.push(C.splice(0,v.length));_=S[0],I=S[1],T=S[2],D=v.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{name:_[t],symbol:I[t],decimals:T[t]})})).sort((function(e,t){return e.name.localeCompare(t.name)})),o=[].concat(Object(r.a)(o),Object(r.a)(D));case 43:L(o);case 44:e.next=50;break;case 46:e.prev=46,e.t0=e.catch(3),console.error(e.t0),L(void 0);case 50:case"end":return e.stop()}}),e,null,[[3,46]])})))).apply(this,arguments)}function ae(){return(ae=Object(Ge.a)(Ue.a.mark((function e(){var t,n,r,a,c,s,o,i;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&q){e.next=3;break}return G(void 0),e.abrupt("return");case 3:try{t=JSON.parse(q),n=t.daoBalance,r=Object(We.toBN)(n),a=t.decimals,c=Object(We.toBN)(10).pow(Object(We.toBN)(a)),s=r.div(c),o=r.mod(c),i=o.eq(Object(We.toBN)(0))?s.toString():"".concat(s.toString(),".").concat(o.toString()),G(i)}catch(u){console.error(u),G(void 0)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(Ge.a)(Ue.a.mark((function n(r){var a,c,s,o,i,u,d,f,h,m,v,N,E,w,k,S,_,I,D,R,P,L,F,M,B,G,V,U,Y,H,W;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,Q){n.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(e){n.next=5;break}throw new Error("No DistributeContract found.");case 5:if(t){n.next=7;break}throw new Error("No DaoRegistryContract found.");case 7:if(l){n.next=9;break}throw new Error("No account found.");case 9:if(b){n.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(a=r.selectedToken,c=r.memberAddress,s=r.amount,o=r.notes,i=Object(We.toChecksumAddress)(c),u=JSON.parse(a),d=u.symbol,f=u.decimals,(h=u.address)===O.m?m=Object(We.toWei)(Object(p.l)(s),"ether"):(v=Object(We.toBN)(10).pow(Object(We.toBN)(f)),N=Object(We.toBN)(Object(p.l)(s)).mul(v),m=N.toString()),E=(null===A||void 0===A?void 0:A.uniqueId)||"",w=null===A||void 0===A?void 0:A.data,k=(null===A||void 0===A?void 0:A.signature)||"",S=(null===A||void 0===A?void 0:A.submitter)||"",_=z?"Transfer to all members pro rata.":"Transfer to ".concat(Object(p.m)(i,7),"."),I={transferAmount:s,transferAmountUnit:d},E){n.next=37;break}return D=o?"".concat(_,"\n").concat(o):_,R=z?"All members":i,P=Math.floor(Date.now()/1e3),n.next=28,y({partialProposalData:{name:R,body:D,metadata:{proposalAmountValues:I,isTypeAllMembers:z},timestamp:P.toString()},adapterName:jt.a.distribute,type:it.SnapshotType.proposal});case 28:L=n.sent,F=L.uniqueId,M=L.data,B=L.signature,G=L.submitter,E=F,w=M,k=B,S=G;case 37:return V=z?Ft.a:i,U=w?Object(it.prepareVoteProposalData)({payload:{name:w.payload.name,body:w.payload.body,choices:w.payload.choices,snapshot:w.payload.snapshot.toString(),start:w.payload.start,end:w.payload.end},submitter:S,sig:k,space:w.space,timestamp:parseInt(w.timestamp)},b):"",Y=[t.contractAddress,E,V,h,m,U],H=Object(g.a)({from:l||""},j?{gasPrice:j}:null),n.next=43,x("submitProposal",e.instance.methods,Y,H);case 43:C.push("/transfers/".concat(E)),n.next=50;break;case 46:n.prev=46,n.t0=n.catch(0),W=n.t0,T(W);case 50:case"end":return n.stop()}}),n,null,[[0,46]])})))).apply(this,arguments)}function oe(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(Ge.a)(Ue.a.mark((function e(t){var r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return console.error("No BankExtensionContract found."),e.abrupt("return",!1);case 3:return e.next=5,n.instance.methods.balanceOf(t,O.y).call();case 5:return r=e.sent,e.abrupt("return",Object(We.toBN)(r).gt(Object(We.toBN)(0)));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(je.useEffect)((function(){te()}),[te]),Object(je.useEffect)((function(){ne()}),[ne]),Q&&!i&&o?Object(fe.jsx)(Ht,{children:Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Type"}),Object(fe.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(fe.jsxs)("select",{name:Pt.type,ref:H,disabled:ee,children:[Object(fe.jsx)("option",{value:"single member",children:"Single member"}),Object(fe.jsx)("option",{value:"all members",children:"All members"})]})})]}),!z&&Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Member Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(Pt.memberAddress),"aria-invalid":V.memberAddress?"true":"false",name:Pt.memberAddress,ref:H({validate:function(){var e=Object(Ge.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}e.t0=dt.a.REQUIRED,e.next=17;break;case 4:if(Object(yt.a)(t)){e.next=8;break}e.t1=dt.a.INVALID_ETHEREUM_ADDRESS,e.next=16;break;case 8:return e.next=10,oe(t);case 10:if(e.sent){e.next=14;break}e.t2="The address is not an active member with membership tokens.",e.next=15;break;case 14:e.t2=!0;case 15:e.t1=e.t2;case 16:e.t0=e.t1;case 17:return e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),type:"text",disabled:ee}),Object(fe.jsx)(pt,{error:Object(p.h)(Pt.memberAddress,V),id:"error-".concat(Pt.memberAddress)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Asset"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsxs)("select",{"aria-describedby":"error-".concat(Pt.selectedToken),"aria-invalid":V.selectedToken?"true":"false",name:Pt.selectedToken,ref:H({validate:function(e){return!P||P.length<1?"No tokens available for distribution.":!!e||dt.a.REQUIRED}}),disabled:ee,children:[Object(fe.jsx)("option",{value:"",children:"Select from DAO assets"}),null===P||void 0===P?void 0:P.map((function(e){return Object(fe.jsx)("option",{value:JSON.stringify(e),children:"".concat(e.name," (").concat(e.symbol,")")},e.address)}))]}),Object(fe.jsx)(pt,{error:Object(p.h)(Pt.selectedToken,V),id:"error-".concat(Pt.selectedToken)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsxs)("div",{className:"input__suffix-wrap",children:[Object(fe.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(Pt.amount),"aria-invalid":V.amount?"true":"false",name:Pt.amount,onChange:Object(Lt.debounce)((function(){return Y(Pt.amount,Object(p.d)(Object(p.l)(U().amount)))}),1e3),ref:H({validate:function(e){var t=Number(Object(p.l)(e)),n=q&&JSON.parse(q),r=(null===n||void 0===n?void 0:n.address)===O.m;return""===e?dt.a.REQUIRED:isNaN(t)?dt.a.INVALID_NUMBER:t<=0?"The value must be greater than 0.":t>Number(B)?"Insufficient funds.":!!r||(!!Number.isInteger(t)||"The value must be an integer for an ERC20 token.")}}),type:"text",disabled:ee}),Object(fe.jsx)("div",{className:"input__suffix-item",children:q&&JSON.parse(q).symbol||"___"})]}),Object(fe.jsx)(pt,{error:Object(p.h)(Pt.amount,V),id:"error-".concat(Pt.amount)}),Object(fe.jsx)("div",{className:"form__input-description",children:z?"If the proposal passes, this total amount will be distributed pro rata to all members' internal accounts, based on the current number of membership tokens held by each member.":"If the proposal passes, this amount will be distributed to the member's internal account."})]}),Object(fe.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(fe.jsx)("span",{children:B?Object(p.d)(B):"---"})]})]}),Object(fe.jsxs)("div",{className:"form__textarea-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Notes"}),Object(fe.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(fe.jsx)("textarea",{name:Pt.notes,placeholder:"Transactions purpose...",ref:H,disabled:ee})})]}),Object(fe.jsx)("button",{className:"button",disabled:ee,onClick:Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,W();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:ce(U());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:$?Object(fe.jsx)(ht.a,{}):Z?"Done":"Submit"}),ee&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){if(N===jt.f.AWAITING_CONFIRM||w===jt.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(N){case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Gt.a,{intervalMs:2e3,messages:Bt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Be.a,{children:e},e)}}),Object(fe.jsx)(Vt.a,{url:m,isPending:!0})]});case jt.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Proposal submitted!"}),Object(fe.jsx)(Vt.a,{url:m})]});default:return null}}()}),J&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"Something went wrong while submitting the proposal.",error:J})})]})}):Object(fe.jsx)(Ht,{children:Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:function(){return Q?i?i.message:o||s?!o&&a&&s?(e=a,"Your member address is delegated to ".concat(Object(p.m)(e,7),". You must use that address.")):void 0:"Either you are not a member, or your membership is not active.":Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)("p",{style:{color:"#ff6f6f"},children:"Connect your wallet to submit a transfer proposal"})});var e}()})})})}function Ht(e){return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Transfer Proposal"})}),Object(fe.jsxs)("div",{className:"form-wrapper",children:[Object(fe.jsx)("div",{className:"form__description",children:Object(fe.jsx)("p",{children:"You can propose a transfer of DAO tokens to a member. The DAO will vote on the proposal, and if it passes, the tokens will be transferred to the member's internal account."})}),e.children]})]})})}function Wt(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(we.e)().defaultChainError,r=Object(we.g)(),a=r.connected,s=r.account,o=r.web3Instance,i=Object(bt.i)(),u=i.proposalData,d=i.proposalSignAndSendError,l=i.proposalSignAndSendStatus,b=i.signAndSendProposal,j=Object(ot.b)({mode:"onBlur",reValidateMode:"onChange"}),f=Object(ie.f)(),h=Object(je.useState)(),m=Object(Ae.a)(h,2),v=m[0],x=m[1],g=Object(je.useState)(),N=Object(Ae.a)(g,2),E=N[0],A=N[1],w=Object(je.useState)(),y=Object(Ae.a)(w,2),k=y[0],C=y[1],S=Object(je.useState)(),_=Object(Ae.a)(S,2),I=_[0],T=_[1],D=j.errors,R=j.getValues,P=j.setValue,L=j.register,F=j.trigger,M=j.watch,B=M(Ut.erc20Address),G=M(Ut.applicantAddress),V=v||d,U=a&&s,Y=l===jt.f.AWAITING_CONFIRM||l===jt.f.PENDING,H=l===jt.f.FULFILLED,W=Y||H,K=Object(bt.a)(G),z=K.checkApplicantError,q=K.checkApplicantInvalidMsg,J=K.checkApplicantStatus,Q=K.isApplicantValid,X=Object(je.useCallback)((function(){return ee.apply(this,arguments)}),[B,o]),$=Object(je.useCallback)((function(){return te.apply(this,arguments)}),[s,I]),Z=Object(je.useCallback)((function(){return ne.apply(this,arguments)}),[s,I]);function ee(){return(ee=Object(Ge.a)(Ue.a.mark((function e(){var t,r,a,c;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&B){e.next=3;break}return T(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,Promise.resolve().then(n.t.bind(null,507,3));case 6:t=e.sent,r=t.default,a=r,c=new o.eth.Contract(a,B),T(c),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),T(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function te(){return(te=Object(Ge.a)(Ue.a.mark((function e(){var t,n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&I){e.next=3;break}return C(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,I.methods.symbol().call();case 6:return t=e.sent,e.next=9,I.methods.decimals().call();case 9:n=e.sent,C({symbol:t,decimals:Number(n)}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),C(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function ne(){return(ne=Object(Ge.a)(Ue.a.mark((function e(){var t,n,r,a,c,o,i;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&I){e.next=3;break}return A(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,I.methods.balanceOf(s).call();case 6:return t=e.sent,n=Object(We.toBN)(t),e.next=10,I.methods.decimals().call();case 10:r=e.sent,a=Object(We.toBN)(10).pow(Object(We.toBN)(r)),c=n.div(a),o=n.mod(a),i=o.eq(Object(We.toBN)(0))?c.toString():"".concat(c.toString(),".").concat(o.toString()),A(i),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.error(e.t0),A(void 0);case 22:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}function re(){return ae.apply(this,arguments)}function ae(){return(ae=Object(Ge.a)(Ue.a.mark((function t(){return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return t.abrupt("return","UNITS");case 4:return t.prev=4,t.next=7,e.instance.methods.symbol().call();case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(4),console.log(t.t0),t.abrupt("return","UNITS");case 14:case"end":return t.stop()}}),t,null,[[4,10]])})))).apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(Ge.a)(Ue.a.mark((function e(t){var n,r,a,c,o,i,d,l,j,h,m,v,g,N,E,A,w,y;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,U){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(s){e.next=5;break}throw new Error("No account found.");case 5:if(I){e.next=7;break}throw new Error("No ERC20Contract found.");case 7:if(k){e.next=9;break}throw new Error("No ERC20 details found.");case 9:if(z&&console.warn("Error checking if the applicant address is valid: ".concat(z.message)),J!==ye.a.FULFILLED||Q||!q){e.next=12;break}throw new Error(q);case 12:if(n=t.applicantAddress,r=t.erc20Address,a=t.tributeAmount,c=t.requestAmount,o=t.description,i=Object(We.toBN)(10).pow(Object(We.toBN)(k.decimals)),d=Object(We.toBN)(Object(p.l)(a)).mul(i),l=Object(p.l)(c),j=Object(We.toChecksumAddress)(n),h=Object(We.toChecksumAddress)(s),m=(null===u||void 0===u?void 0:u.uniqueId)||""){e.next=35;break}return v=Object(p.j)(n)===Object(p.j)(s)?"Tribute from ".concat(Object(p.m)(j,7),"."):"Tribute from ".concat(Object(p.m)(h,7)," for applicant ").concat(Object(p.m)(j,7),"."),g=o?"".concat(v,"\n").concat(o):v,e.t0=c,e.next=25,re();case 25:return e.t1=e.sent,e.t2=a,e.t3=k.symbol,N={requestAmount:e.t0,requestAmountUnit:e.t1,tributeAmount:e.t2,tributeAmountUnit:e.t3},E=[j,O.y,l,Object(We.toChecksumAddress)(r),d.toString(),h],e.next=32,b({partialProposalData:{name:j,body:g,metadata:{proposalAmountValues:N,submitActionArgs:E,accountAuthorizedToProcessPassedProposal:h}},adapterName:jt.a.tribute,type:it.SnapshotType.draft});case 32:A=e.sent,w=A.uniqueId,m=w;case 35:f.push("/tributes/".concat(m)),e.next=42;break;case 38:e.prev=38,e.t4=e.catch(0),y=e.t4,x(y);case 42:case"end":return e.stop()}}),e,null,[[0,38]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){X()}),[X]),Object(je.useEffect)((function(){$()}),[$]),Object(je.useEffect)((function(){Z()}),[Z]),Object(je.useEffect)((function(){P(Ut.applicantAddress,s)}),[s,P]),!U||t?Object(fe.jsx)(Kt,{children:Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:U?t?t.message:void 0:"Connect your wallet to submit a tribute proposal."})})}):Object(fe.jsx)(Kt,{children:Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Applicant Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(Ut.applicantAddress),"aria-invalid":D.applicantAddress?"true":"false",name:Ut.applicantAddress,ref:L({validate:function(e){return e?!!Object(yt.a)(e)||dt.a.INVALID_ETHEREUM_ADDRESS:dt.a.REQUIRED}}),type:"text",disabled:W}),Object(fe.jsx)(pt,{error:Object(p.h)(Ut.applicantAddress,D),id:"error-".concat(Ut.applicantAddress)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"ERC20 Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(Ut.erc20Address),"aria-invalid":D.erc20Address?"true":"false",name:Ut.erc20Address,ref:L({validate:function(e){return e?!!Object(yt.a)(e)||dt.a.INVALID_ETHEREUM_ADDRESS:dt.a.REQUIRED}}),type:"text",disabled:W}),Object(fe.jsx)(pt,{error:Object(p.h)(Ut.erc20Address,D),id:"error-".concat(Ut.erc20Address)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsxs)("div",{className:"input__suffix-wrap",children:[Object(fe.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(Ut.tributeAmount),"aria-invalid":D.tributeAmount?"true":"false",name:Ut.tributeAmount,onChange:Object(Lt.debounce)((function(){return P(Ut.tributeAmount,Object(p.d)(Object(p.l)(R().tributeAmount)))}),1e3),ref:L({validate:function(e){var t=Number(Object(p.l)(e));return""===e?dt.a.REQUIRED:isNaN(t)?dt.a.INVALID_NUMBER:t<=0?"The value must be greater than 0.":t>Number(E)?"Insufficient funds.":!!Number.isInteger(t)||"The value must be an integer for an ERC20 token."}}),type:"text",disabled:W}),Object(fe.jsx)("div",{className:"input__suffix-item",children:(null===k||void 0===k?void 0:k.symbol)||"___"})]}),Object(fe.jsx)(pt,{error:Object(p.h)(Ut.tributeAmount,D),id:"error-".concat(Ut.tributeAmount)}),Object(fe.jsx)("div",{className:"form__input-description",children:"This amount will be held in escrow pending a member vote. If the proposal passes, the funds will automatically be sent to the DAO. If the proposal fails, the funds will be refunded to you."})]}),Object(fe.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(fe.jsx)("span",{children:E?Object(p.d)(E):"---"})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Request Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(Ut.requestAmount),"aria-invalid":D.requestAmount?"true":"false",name:Ut.requestAmount,onChange:Object(Lt.debounce)((function(){return P(Ut.requestAmount,Object(p.d)(Object(p.l)(R().requestAmount)))}),1e3),ref:L({validate:function(e){var t=Number(Object(p.l)(e));return""===e?dt.a.REQUIRED:isNaN(t)?dt.a.INVALID_NUMBER:t<0?"The value must be at least 0.":!!Number.isInteger(t)||"The value must be an integer."}}),type:"text",disabled:W}),Object(fe.jsx)(pt,{error:Object(p.h)(Ut.requestAmount,D),id:"error-".concat(Ut.requestAmount)}),Object(fe.jsx)("div",{className:"form__input-description",children:"This is the amount of DAO membership tokens you are requesting be sent to the Applicant Address in exchange for your tribute."})]})]}),Object(fe.jsxs)("div",{className:"form__textarea-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",children:"Description"}),Object(fe.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(fe.jsx)("textarea",{name:Ut.description,placeholder:"Say something about your tribute...",ref:L,disabled:W})})]}),Object(fe.jsx)("button",{className:"button",disabled:W,onClick:Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,F();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:ce(R());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:Y?Object(fe.jsx)(ht.a,{}):H?"Done":"Submit"}),W&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){switch(l){case jt.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(ut.a,{intervalMs:500})]});case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:["Submitting",Object(fe.jsx)(ut.a,{intervalMs:500})]});case jt.f.FULFILLED:return"Done!";default:return""}}()}),V&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"Something went wrong while submitting the proposal.",error:V})})]})})}function Kt(e){return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Tribute Proposal"})}),Object(fe.jsxs)("div",{className:"form-wrapper",children:[Object(fe.jsx)("div",{className:"form__description",children:Object(fe.jsx)("p",{children:"A tribute proposal is a proposal to send a certain amount of DAO membership tokens to an applicant address. The proposal will be held in escrow until a member votes on it. If the proposal passes, the funds will automatically be sent to the DAO. If the proposal fails, the funds will be refunded to you."})}),e.children]})]})})}!function(e){e.applicantAddress="applicantAddress",e.erc20Address="erc20Address",e.tributeAmount="tributeAmount",e.requestAmount="requestAmount",e.description="description"}(Ut||(Ut={}));var zt=n(508),qt=n.n(zt),Jt=(n(1021),Object(je.memo)((function(){return Object(fe.jsx)("div",{className:"interest_submit-container",children:Object(fe.jsxs)("div",{className:"interest_submit_flower",children:[Object(fe.jsx)("img",{className:"submit-space",src:"https://res.cloudinary.com/cinecapsule/image/upload/v1653638127/Films-on-Mars_wfxgzm.png",alt:"astronaut","aria-label":"Space background",role:"presentation"}),Object(fe.jsx)("br",{})]})})})));function Qt(){return Object(fe.jsx)("div",{"data-testid":"get-started-header",className:"landing__header",children:Object(fe.jsx)(at,{})})}function Xt(){var e=Object(ie.f)();return Object(je.useEffect)((function(){qt.a.init({duration:800,offset:40,delay:120,mirror:!1,once:!0})}),[]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Qt,{}),Object(fe.jsx)("div",{className:"row",children:Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsx)(Re,{}),Object(fe.jsxs)("div",{className:"landing",children:[Object(fe.jsx)("div",{className:"landing__subtitle",children:"A DAO SUPPORTING INDEPENDENT CINEMA"}),Object(fe.jsx)("div",{className:"landing__img",children:Object(fe.jsx)(Jt,{})}),Object(fe.jsx)("div",{className:"landing__button",children:Object(fe.jsx)("button",{className:"button",onClick:function(){e.push(O.h?"/join":"/onboard")},children:"BECOME A MEMBER"})}),Object(fe.jsx)("br",{}),Object(fe.jsx)("div",{className:"landing__link",children:Object(fe.jsx)("a",{href:"",target:"_blank",rel:"noopener noreferrer",children:"LEARN MORE"})})]}),Object(fe.jsx)("br",{}),Object(fe.jsxs)("div",{className:"interest_submit-proposal_xyz",children:[Object(fe.jsx)("span",{className:"interest_submit-proposal__image__1JcQq","aria-label":"Unicorn emoji",role:"img",children:"\ud83c\udfa5"}),Object(fe.jsx)("br",{}),Object(fe.jsx)("div",{className:"interest_submit-proposal__title__dZrRm",children:"Looking for funding?"}),Object(fe.jsx)("div",{className:"interest_submit-proposal-slogan",children:"ProdCapsule is a global group of Fuse enthusiasts and experts supporting the work of Fuse builders."}),Object(fe.jsx)("button",{className:"button_submit_proposal",onClick:function(){e.push(O.h?"/join":"/onboarding")},children:"Submit a proposal"})]})]})})}),Object(fe.jsx)(Ee,{})]})}var $t=n(150);function Zt(e){var t,n=e.proposal,r=n.snapshotProposal,a=1e3*Number((null===r||void 0===r?void 0:r.msg.payload.start)||0),c=1e3*Number((null===r||void 0===r?void 0:r.msg.payload.end)||0),s=Object(je.useState)({hasVotingStarted:!1,hasVotingEnded:!1,votingStartEndInitReady:!1}),o=Object(Ae.a)(s,2),i=o[0],u=o[1],d=Object(bt.c)(r).offchainVotingResults,l=Object(je.useCallback)((function(e){u(e)}),[]),b=null===(t=d[0])||void 0===t?void 0:t[1],j=i.hasVotingEnded,O=i.hasVotingStarted,f=i.votingStartEndInitReady;return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)($t.c,{countdownVotingEndMs:c,countdownVotingStartMs:a,onVotingPeriodChange:l,votingResult:b}),f&&O&&!j&&Object(fe.jsx)($t.b,{proposal:n})]})}var en=n(82);function tn(){return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsx)(Be.a,{children:Object(fe.jsx)("div",{style:{textAlign:"center",fontSize:"5rem"},children:Object(fe.jsxs)("h3",{children:["4",Object(fe.jsx)("span",{className:"pulse",role:"img","aria-label":"404, not found",style:{display:"inline-block"},children:"\ud83d\ude35"}),"4"]})})})})}function nn(e){var t=e.proposal,n=e.renderAmountBadge,r=e.renderActions,a=t.getCommonSnapshotProposalData();return a?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"proposaldetails__header",children:"Proposal Details"}),Object(fe.jsxs)("div",{className:"proposaldetails",children:[Object(fe.jsxs)("div",{className:"proposaldetails__content",children:[Object(fe.jsx)("h3",{children:Object(p.m)(a.msg.payload.name||"",7)}),Object(fe.jsx)(mt.a,{children:a.msg.payload.body})]}),Object(fe.jsxs)("div",{className:"proposaldetails__status",children:[n&&n(),r()]})]})]}):null}function rn(){var e=Object(ie.h)().proposalId,t=Object(bt.d)(e,it.SnapshotType.proposal),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(we.e)().defaultChainError,o=r||s;return c===ye.a.PENDING&&!o?Object(fe.jsx)(an,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(en.a,{})})}):a?Object(fe.jsx)(an,{children:Object(fe.jsx)(tn,{})}):o?Object(fe.jsx)(an,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(Ot.a,{error:o,renderText:"Something went wrong while getting the proposal."})})}):n?Object(fe.jsx)(an,{children:Object(fe.jsx)(nn,{proposal:n,renderActions:function(){return Object(fe.jsx)(Zt,{proposal:n})}})}):Object(fe.jsx)(fe.Fragment,{})}function an(e){var t=Object(ie.f)();return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Governance"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/governance")},children:"View all"})]}),e.children]})})}var cn=n(36);var sn=n(509),on=n(510),un="Review",dn=n.n(on)()()(sn.a);function ln(e){var t=e.buttonText,n=void 0===t?un:t,r=e.proposalOnClickId,a=e.linkPath,c=e.onClick,o=e.name,i=e.renderStatus,u=Object(ie.f)().location,d="/"===u.pathname?"":u.pathname,l="function"===typeof a?a(r):a||"".concat(d,"/").concat(r);return Object(fe.jsx)(s.b,{className:"proposalcard__link",to:l,onClick:function(){null===c||void 0===c||c(r)},children:Object(fe.jsxs)("div",{className:"proposalcard",children:[Object(fe.jsx)("h3",{className:"proposalcard__title",children:function(e){return Object(yt.a)(e)?Object(p.m)(e,7):Object(fe.jsx)(dn,{text:e,maxLine:1,ellipsis:"...",trimRight:!0,basedOn:"letters"})}(o)}),i&&i(),Object(fe.jsx)("button",{className:"proposalcard__button",children:n||un})]})})}function bn(e){var t=e.actionId,n=void 0===t?Ft.a:t,r=e.onProposalClick,a=void 0===r?function(){}:r,c=e.proposalLinkPath,s=e.renderProposalCard,o=Object(je.useState)([]),i=Object(Ae.a)(o,2),u=i[0],d=i[1],l=Object(je.useState)({failedProposals:[],passedProposals:[],votingProposals:[]}),b=Object(Ae.a)(l,2),f=b[0],h=b[1],m=function(e){var t=e.actionId,n=void 0===t?Ft.a:t,r=Object(je.useState)([]),a=Object(Ae.a)(r,2),c=a[0],s=a[1],o=Object(je.useState)(),i=Object(Ae.a)(o,2),u=i[0],d=i[1],l=Object(je.useState)(ye.a.STANDBY),b=Object(Ae.a)(l,2),f=b[0],p=b[1],h=Object(cn.e)().isMountedRef,m=Object(j.useQuery)(["snapshotProposalEntries",n],Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{enabled:!!n}),v=m.data,x=m.error,N=Object(je.useCallback)((function(){return w.apply(this,arguments)}),[h,v,x]);function E(e){return A.apply(this,arguments)}function A(){return A=Object(Ge.a)(Ue.a.mark((function e(t){var n,r,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(O.v,"/api/").concat(O.w),e.next=4,fetch("".concat(n,"/proposals/").concat(t,"?includeVotes=true"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot proposals.");case 7:return e.next=9,r.json();case 9:return a=e.sent,e.abrupt("return",Object.entries(a).map((function(e){var t=Object(Ae.a)(e,2),n=t[0],r=t[1];return{daoProposal:void 0,snapshotDraft:void 0,snapshotProposal:Object(g.a)(Object(g.a)({},r),{},{idInSnapshot:n,idInDAO:""}),getCommonSnapshotProposalData:function(){},refetchProposalOrDraft:function(){},snapshotType:it.SnapshotType.proposal}})));case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),A.apply(this,arguments)}function w(){return(w=Object(Ge.a)(Ue.a.mark((function e(){var t;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(ye.a.PENDING),!x){e.next=4;break}throw x;case 4:if(!v){e.next=9;break}if(h.current){e.next=7;break}return e.abrupt("return");case 7:p(ye.a.FULFILLED),s(v);case 9:e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),h.current){e.next=15;break}return e.abrupt("return");case 15:t=e.t0,p(ye.a.REJECTED),s([]),d(t);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){N()}),[N]),{governanceProposals:c,governanceProposalsError:u,governanceProposalsStatus:f}}({actionId:n}),v=m.governanceProposals,x=m.governanceProposalsError,N=m.governanceProposalsStatus,E=Object(bt.c)(u),A=E.offchainVotingResults,w=E.offchainVotingResultsError,y=E.offchainVotingResultsStatus,k=Object(we.e)().defaultChainError,C=f.failedProposals,S=f.passedProposals,_=f.votingProposals,I=N===ye.a.STANDBY||N===ye.a.PENDING||y===ye.a.STANDBY&&u.length>0||y===ye.a.PENDING,T=x||w||k;function D(e){return e.map((function(e){var t,n=e.snapshotProposal,r=null===n||void 0===n?void 0:n.idInSnapshot,o=(null===n||void 0===n?void 0:n.msg.payload.name)||"",i=1e3*Number((null===n||void 0===n?void 0:n.msg.payload.start)||0),u=1e3*Number((null===n||void 0===n?void 0:n.msg.payload.end)||0);if(!r)return null;var d=null===(t=A.find((function(e){var t=Object(Ae.a)(e,2),n=t[0];t[1];return Object(p.j)(n)===Object(p.j)(r)})))||void 0===t?void 0:t[1];return s?Object(fe.jsx)(je.Fragment,{children:s({proposalData:e,votingResult:d})},r):Object(fe.jsx)(ln,{name:o,linkPath:c,onClick:a,proposalOnClickId:r,renderStatus:function(){return Object(fe.jsx)($t.c,{votingResult:d,countdownVotingEndMs:u,countdownVotingStartMs:i})}},r)}))}return Object(je.useEffect)((function(){d(v.map((function(e){return e.snapshotProposal})))}),[v]),Object(je.useEffect)((function(){if(N===ye.a.FULFILLED){var e={failedProposals:[],passedProposals:[],votingProposals:[]};v.forEach((function(t){var n,r;if(((null===(n=t.snapshotProposal)||void 0===n?void 0:n.msg.payload.end)||0)<Math.ceil(Date.now()/1e3)){var a=null===(r=A.find((function(e){var n,r=Object(Ae.a)(e,2),a=r[0];r[1];return Object(p.j)(a)===Object(p.j)((null===(n=t.snapshotProposal)||void 0===n?void 0:n.idInSnapshot)||"")})))||void 0===r?void 0:r[1],c=!!a&&a.Yes.units>a.No.units;c?e.passedProposals.push(t):c||e.failedProposals.push(t)}else e.votingProposals.push(t)})),h((function(t){return Object(g.a)(Object(g.a)({},t),e)}))}}),[v,N,A]),I&&!T?Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(en.a,{})}):v.length||Object.values(f).flatMap((function(e){return e})).length||N!==ye.a.FULFILLED?T?Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(Ot.a,{error:T,renderText:"Something went wrong while getting the proposals."})}):Object(fe.jsxs)("div",{className:"grid--fluid grid-container",children:[_.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:dt.d.VOTING}),Object(fe.jsx)("div",{className:"grid__cards",children:D(_)})]}),S.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:dt.d.PASSED}),Object(fe.jsx)("div",{className:"grid__cards",children:D(S)})]}),C.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:dt.d.FAILED}),Object(fe.jsx)("div",{className:"grid__cards",children:D(C)})]})]}):Object(fe.jsx)("p",{className:"text-center",children:"No proposals, yet!"})}function jn(){return Object(fe.jsx)(On,{children:Object(fe.jsx)(bn,{actionId:Ft.a,proposalLinkPath:function(e){return"/governance/".concat(e)}})})}function On(e){var t=Object(ie.f)();return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Governance"}),Object(fe.jsx)("p",{children:"CapsuleProd is run entirely by its members. Below are all the governance votes and proposals."}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/governance-proposal")},children:"New Proposal"})]}),e.children]})})}var fn={joinIsWhitelisted:!0};ye.a.FULFILLED,ye.a.PENDING,ye.a.REJECTED,ye.a.STANDBY,Object(We.sha3)("ConfigurationUpdated(bytes32,uint256)"),Object(We.sha3)(jt.b.kycOnboardingChunkSize),Object(We.sha3)(jt.b.kycOnboardingMaximumChunks);var pn,hn=Object(fe.jsxs)(fe.Fragment,{children:["Checking your KYC status",Object(fe.jsx)(ut.a,{})]}),mn=Object(fe.jsxs)(fe.Fragment,{children:["Redirecting you to our KYC form",Object(fe.jsx)(ut.a,{})]}),vn=Object(fe.jsx)(fe.Fragment,{children:"The applicant address has been KYC verified, but has not been authorized to join yet."}),xn=Object(fe.jsxs)(fe.Fragment,{children:["KYC verification for the applicant address is pending and must be completed first.",Object(fe.jsx)("br",{}),"Please try again later."]});function gn(e){return function(){var t=Object(Ge.a)(Ue.a.mark((function t(n){var r,a=arguments;return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:2e3,t.next=3,new Promise((function(e){return setTimeout(e,r)}));case 3:e(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}!function(e){e.ethAddress="ethAddress",e.amount="amount"}(pn||(pn={}));var Nn="\u2014",En=O.u!==O.m;function An(e){var t=e.defaultChainError;return e.isConnected?t?t.message:void 0:"Connect your wallet to get started."}function wn(e){var t=e.txEtherscanURL,n=e.txStatus,r=e.txEtherscanURLTokenApprove,a=e.txStatusTokenApprove;if(a===jt.f.AWAITING_CONFIRM)return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to transfer your tokens",Object(fe.jsx)(ut.a,{intervalMs:500})]});if(a===jt.f.PENDING)return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:["Approving your tokens for transfer",Object(fe.jsx)(ut.a,{intervalMs:500})]}),Object(fe.jsx)(Vt.a,{url:r,isPending:!0})]});switch(n){case jt.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(ut.a,{intervalMs:500})]});case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Gt.a,{intervalMs:2e3,messages:Bt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Be.a,{children:e},e)}}),Object(fe.jsx)(Vt.a,{url:t,isPending:!0})]});case jt.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Onboarding done!"}),Object(fe.jsx)(Vt.a,{url:t})]});default:return null}}function yn(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(c.c)((function(e){return e.contracts.KycOnboardingContract})),r=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),a=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),s=Object(we.e)().defaultChainError,o=Object(we.g)(),i=o.connected,u=o.account,d=o.web3Instance,l=Object(we.a)(),b=l.txEtherscanURL,j=l.txIsPromptOpen,h=l.txSend,m=l.txStatus,v=Object(we.a)(),x=v.txEtherscanURL,N=v.txIsPromptOpen,E=v.txSend,A=v.txStatus,w=Object(we.c)().average,y=Ye().daoTokenDetails,k=function(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(je.useState)(ye.a.STANDBY),n=Object(Ae.a)(t,2),r=n[0],a=n[1],s=Object(je.useState)(),o=Object(Ae.a)(s,2),i=o[0],u=o[1],d=Object(je.useState)(),l=Object(Ae.a)(d,2),b=l[0],j=l[1],f=Object(je.useState)(),p=Object(Ae.a)(f,2),h=p[0],m=p[1],v=Object(je.useState)(""),x=Object(Ae.a)(v,2),g=x[0],N=x[1],E=Object(je.useState)(""),A=Object(Ae.a)(E,2),w=A[0],y=A[1],k=Object(je.useState)(!1),C=Object(Ae.a)(k,2),S=C[0],_=C[1],I=Object(cn.a)(),T=I.abortController,D=I.isMountedRef,R=Object(we.e)().defaultChainError,P=Object(je.useMemo)((function(){return gn(m)}),[]),L=Object(je.useMemo)((function(){return gn(y)}),[]),F=Object(je.useCallback)((function(){return M.apply(this,arguments)}),[null===T||void 0===T?void 0:T.signal,e,R,g,D,P]);function M(){return(M=Object(Ge.a)(Ue.a.mark((function t(){var n,r,c;return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null!==T&&void 0!==T&&T.signal){t.next=3;break}return t.abrupt("return");case 3:if(e&&g&&!R){t.next=8;break}return u(void 0),j(void 0),a(ye.a.STANDBY),t.abrupt("return");case 8:return m(hn),a(ye.a.PENDING),t.next=12,fetch("".concat(O.q,"/").concat(e.contractAddress,"/").concat(g),{signal:T.signal});case 12:return n=t.sent,t.next=15,n.json();case 15:if(r=t.sent,404!==n.status){t.next=22;break}return u(void 0),m(mn),a(ye.a.REJECTED),_(!0),t.abrupt("return");case 22:if(n.ok){t.next=31;break}if(!r.message.includes("pending verification")){t.next=30;break}return u(void 0),P(xn),a(ye.a.REJECTED),t.abrupt("return");case 30:throw new Error(r.message);case 31:if(r.isWhitelisted||null===fn||void 0===fn||!fn.joinIsWhitelisted||!n.ok){t.next=36;break}return u(void 0),P(vn),a(ye.a.FULFILLED),t.abrupt("return");case 36:if(D.current){t.next=38;break}return t.abrupt("return");case 38:u(r),j(void 0),m(void 0),a(ye.a.FULFILLED),t.next=52;break;case 44:if(t.prev=44,t.t0=t.catch(0),D.current){t.next=48;break}return t.abrupt("return");case 48:c=t.t0,u(void 0),j(c),a(ye.a.REJECTED);case 52:case"end":return t.stop()}}),t,null,[[0,44]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){F()}),[F]),Object(je.useEffect)((function(){S&&w&&(window.location.href=w)}),[r,w,S]),Object(je.useEffect)((function(){return function(){null===T||void 0===T||T.abort()}}),[T]),{kycCheckCertificate:i,kycCheckError:b,kycCheckMessageJSX:h,kycCheckStatus:r,setKYCCheckETHAddress:N,setKYCCheckRedirect:L}}(),C=k.kycCheckCertificate,S=k.kycCheckError,_=k.kycCheckMessageJSX,I=k.kycCheckStatus,T=k.setKYCCheckETHAddress,D=k.setKYCCheckRedirect,R=Object(ot.b)({mode:"onBlur",reValidateMode:"onChange"}),P=Object(c.b)(),L=Object(je.useState)(),F=Object(Ae.a)(L,2),M=F[0],B=F[1],G=Object(je.useState)(),V=Object(Ae.a)(G,2),U=V[0],Y=V[1],H=Object(je.useState)(),W=Object(Ae.a)(H,2),K=W[0],z=W[1],q=Object(je.useState)(),J=Object(Ae.a)(q,2),Q=J[0],X=J[1],$=Object(je.useState)(),Z=Object(Ae.a)($,2),ee=Z[0],te=Z[1],ne=Object(je.useState)(),re=Object(Ae.a)(ne,2),ae=re[0],ce=re[1],se=Object(je.useState)(),oe=Object(Ae.a)(se,2),ie=oe[0],ue=oe[1],de=Object(je.useState)(),le=Object(Ae.a)(de,2),be=le[0],Oe=le[1],pe=R.clearErrors,he=R.control,me=R.errors,ve=R.getValues,xe=R.register,ge=R.setValue,Ne=R.trigger,Ee=R.watch,ke=Ee(pn.ethAddress),Ce=Ee(pn.amount),Se=M,_e=!(!i||!u),Ie=m===jt.f.AWAITING_CONFIRM||m===jt.f.PENDING||A===jt.f.AWAITING_CONFIRM||A===jt.f.PENDING,Te=m===jt.f.FULFILLED,De=Ie||Te||j||N,Re=!C||De||I===ye.a.PENDING||I===ye.a.REJECTED,Pe=Object(bt.a)(ke),Le=Pe.checkApplicantError,Fe=Pe.checkApplicantInvalidMsg,Me=Pe.checkApplicantStatus,Ve=Pe.isApplicantValid,He=ae?Object(p.d)(Number(ae.maxMembers)-2):Nn,ze=ae?Object(p.d)(ae.unitsPerChunk):Nn,qe=Q?Object(p.d)(Q):Nn,Je=ae?Object(p.d)(String(Object(We.toBN)(ae.unitsPerChunk).mul(Object(We.toBN)(ae.maximumChunks)))):Nn,Qe=ee?Object(p.d)(ee):Nn,Xe=En?null===be||void 0===be?void 0:be.symbol:"ETH",$e=Object(je.useCallback)((function(){return st.apply(this,arguments)}),[u,s,ie,d]),Ze=Object(je.useCallback)((function(){try{if(!e||s||!ae)return z(void 0),X(void 0),te(void 0),void ge(pn.amount,Nn);if(En){if(!be)return z(void 0),X(void 0),te(void 0),void ge(pn.amount,Nn);var t=Object(We.toBN)(10).pow(Object(We.toBN)(be.decimals)),n=Object(We.toBN)(ae.chunkSize).div(t),r=Object(We.toBN)(ae.chunkSize).mod(t),a=r.eq(Object(We.toBN)(0))?Number(String(n)):Number("".concat(String(n),".").concat(String(r)));z(a),te(a*Number(ae.maximumChunks)),X(a),ge(pn.amount,String(a))}else z(Number(Object(We.fromWei)(ae.chunkSize,"ether"))),te(Number(Object(We.fromWei)(Object(We.toBN)(ae.chunkSize).mul(Object(We.toBN)(ae.maximumChunks)),"ether"))),X(Number(Object(We.fromWei)(ae.chunkSize,"ether"))),ge(pn.amount,Object(We.fromWei)(ae.chunkSize,"ether"))}catch(c){z(void 0),X(void 0),te(void 0),ge(pn.amount,Nn),console.error(c)}}),[e,s,be,ae,ge]),et=Object(je.useCallback)((function(){return ct.apply(this,arguments)}),[e,s]),tt=Object(je.useCallback)((function(){return rt.apply(this,arguments)}),[s,d]),nt=Object(je.useCallback)((function(){return at.apply(this,arguments)}),[s,ie]);function rt(){return(rt=Object(Ge.a)(Ue.a.mark((function e(){var t,r,a,c;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&!s){e.next=3;break}return ue(void 0),e.abrupt("return");case 3:if(e.prev=3,O.u){e.next=6;break}throw new Error("No Onboarding ERC20 address was found. Are you sure it is set?");case 6:return e.next=8,Promise.resolve().then(n.t.bind(null,507,3));case 8:t=e.sent,r=t.default,a=r,c=new d.eth.Contract(a,O.u),ue(c),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0),ue(void 0);case 19:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}function at(){return(at=Object(Ge.a)(Ue.a.mark((function e(){var t,n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie&&!s){e.next=3;break}return Oe(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,ie.methods.symbol().call();case 6:return t=e.sent,e.next=9,ie.methods.decimals().call();case 9:n=e.sent,Oe({symbol:t,decimals:Number(n)}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),Oe(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function ct(){return(ct=Object(Ge.a)(Ue.a.mark((function t(){var n,r,a,c;return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e&&!s){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(Ke.g)(e.instance,jt.b.kycOnboardingChunkSize,O.u);case 5:return n=t.sent,t.next=8,Object(Ke.g)(e.instance,jt.b.kycOnboardingMaximumChunks,O.u);case 8:return r=t.sent,t.next=11,Object(Ke.g)(e.instance,jt.b.kycOnboardingMaxMembers,O.u);case 11:return a=t.sent,t.next=14,Object(Ke.g)(e.instance,jt.b.kycOnboardingUnitsPerChunk,O.u);case 14:c=t.sent,ce({chunkSize:n,maximumChunks:r,maxMembers:a,unitsPerChunk:c}),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0),ce(void 0);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))).apply(this,arguments)}function st(){return(st=Object(Ge.a)(Ue.a.mark((function e(){var t,n,r,a,c,o,i;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u&&!s){e.next=4;break}return Y(void 0),e.abrupt("return");case 4:if(!En){e.next=22;break}if(ie){e.next=8;break}return Y(void 0),e.abrupt("return");case 8:return e.next=10,ie.methods.balanceOf(u).call();case 10:return t=e.sent,n=Object(We.toBN)(t),e.next=14,ie.methods.decimals().call();case 14:r=e.sent,a=Object(We.toBN)(10).pow(Object(We.toBN)(r)),c=n.div(a),o=n.mod(a),i=o.eq(Object(We.toBN)(0))?String(c):"".concat(String(c),".").concat(String(o)),Y(i),e.next=32;break;case 22:if(d){e.next=25;break}return Y(void 0),e.abrupt("return");case 25:return e.t0=Y,e.t1=d.utils,e.next=29,d.eth.getBalance(u);case 29:e.t2=e.sent,e.t3=e.t1.fromWei.call(e.t1,e.t2,"ether"),(0,e.t0)(e.t3);case 32:e.next=38;break;case 34:e.prev=34,e.t4=e.catch(0),console.error(e.t4),Y(void 0);case 38:case"end":return e.stop()}}),e,null,[[0,34]])})))).apply(this,arguments)}function it(e){return ut.apply(this,arguments)}function ut(){return(ut=Object(Ge.a)(Ue.a.mark((function e(n){var r,a,c,s,o,i;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No KYC Onboarding contract was found.");case 3:if(ie){e.next=5;break}throw new Error("No ERC20Contract found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return e.next=11,ie.methods.allowance(u,t.contractAddress).call();case 11:if(r=e.sent,a=Object(We.toBN)(r),!n.gt(a)){e.next=20;break}return c=n.sub(a),s=a.add(c),o=[t.contractAddress,String(s)],i=Object(g.a)({from:u||""},w?{gasPrice:w}:null),e.next=20,E("approve",ie.methods,o,i);case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(0),e.t0;case 25:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}function lt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(Ge.a)(Ue.a.mark((function n(c){var s,o,i,l,b,j,m,v,x,N,E,A;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(t){n.next=5;break}throw new Error("No KYC Onboarding contract was found.");case 5:if(_e){n.next=7;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 7:if(u){n.next=9;break}throw new Error("No account found.");case 9:if(d){n.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(Le&&console.warn("Error checking if the applicant address is valid: ".concat(Le.message)),Me!==ye.a.FULFILLED||Ve||!Fe){n.next=14;break}throw new Error(Fe);case 14:if(C){n.next=16;break}throw new Error("No KYC validation certificate found.");case 16:if(null===fn||void 0===fn||!fn.joinIsWhitelisted||C.isWhitelisted){n.next=18;break}throw new Error("The applicant address has been KYC verified, but has not been authorized to join yet.");case 18:if(!r&&!a){n.next=20;break}throw new Error("The applicant address is already a member.");case 20:if(s=c.ethAddress,o=c.amount,i=Object(We.toChecksumAddress)(s),!En){n.next=38;break}if(be){n.next=25;break}throw new Error("No ERC20 details found.");case 25:if(Number.isInteger(Number(o))){n.next=27;break}throw new Error("The amount must be an integer for an ERC20 token.");case 27:return b=Object(We.toBN)(10).pow(Object(We.toBN)(be.decimals)),j=Object(We.toBN)(o).mul(b),n.next=31,it(j);case 31:return m=[e.contractAddress,i,O.u,String(j),C.signature],v=Object(g.a)({from:u||""},w?{gasPrice:w}:null),n.next=35,h("onboard",t.instance.methods,m,v);case 35:l=n.sent,n.next=44;break;case 38:return x=Object(We.toWei)(o,"ether"),N=[e.contractAddress,i,C.signature],E=Object(g.a)({from:u||"",value:x},w?{gasPrice:w}:null),n.next=43,h("onboardEth",t.instance.methods,N,E);case 43:l=n.sent;case 44:if(!l){n.next=50;break}if(Object(p.j)(s)!==Object(p.j)(u)){n.next=50;break}return n.next=48,P(Object(f.A)({account:u,daoRegistryContract:e,web3Instance:d}));case 48:return n.next=50,mt();case 50:n.next=56;break;case 52:n.prev=52,n.t0=n.catch(0),A=n.t0,B(A);case 56:case"end":return n.stop()}}),n,null,[[0,52]])})))).apply(this,arguments)}function mt(){return vt.apply(this,arguments)}function vt(){return(vt=Object(Ge.a)(Ue.a.mark((function e(){var t,n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,null===(t=window)||void 0===t||null===(n=t.ethereum)||void 0===n?void 0:n.request({method:"wallet_watchAsset",params:{type:"ERC20",options:y}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){$e()}),[$e,Te]),Object(je.useEffect)((function(){s||ge(pn.ethAddress,u&&Object(We.toChecksumAddress)(u))}),[u,s,ge]),Object(je.useEffect)((function(){T(ke)}),[ke,T]),Object(je.useEffect)((function(){ke&&O.r&&!s&&D(O.r)}),[s,ke,D]),Object(je.useEffect)((function(){Ze()}),[Ze,C]),Object(je.useEffect)((function(){B(void 0),pe()}),[pe,ke]),Object(je.useEffect)((function(){et()}),[et]),Object(je.useEffect)((function(){En&&tt()}),[tt]),Object(je.useEffect)((function(){En&&nt()}),[nt]),!_e||s?Object(fe.jsxs)(kn,{children:[Object(fe.jsxs)("div",{className:"form__description",children:[Object(fe.jsxs)("p",{children:["Tribute DAO will have up to ",He," initial members. Each member can purchase ",ze," units for ",qe," ",Xe," (up to ",Je," units for ",Qe," ",Xe,")."]}),Object(fe.jsxs)("p",{children:["Please put your preferred ETH address below and the amount of"," ",Xe," you'd like to contribute."]})]}),Object(fe.jsx)("div",{className:"form__description--unauthorized",children:Object(fe.jsx)("p",{children:An({defaultChainError:s,isConnected:_e})})})]}):Object(fe.jsxs)(kn,{children:[Object(fe.jsxs)("div",{className:"form__description",children:[_&&Object(fe.jsx)("div",{className:"form__header",children:Object(fe.jsx)(Be.a,{children:Object(fe.jsx)("p",{children:_})})}),Object(fe.jsxs)("p",{children:["Tribute DAO will have up to ",He," initial members. Each member can purchase ",ze," units for ",qe," ",Xe," (up to ",Je," units for ",Qe," ",Xe,")."]}),Object(fe.jsxs)("p",{children:["Please put your preferred ETH address below and the amount of"," ",Xe," you'd like to contribute."]})]}),Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:pn.ethAddress,children:"Applicant Address"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(pn.ethAddress),"aria-invalid":me.ethAddress?"true":"false",id:pn.ethAddress,name:pn.ethAddress,ref:xe({validate:function(e){return e?!!Object(yt.a)(e)||dt.a.INVALID_ETHEREUM_ADDRESS:dt.a.REQUIRED}}),type:"text",disabled:De}),Object(fe.jsx)(pt,{error:Object(p.h)(pn.ethAddress,me),id:"error-".concat(pn.ethAddress)})]})]}),Object(fe.jsxs)("div",{className:"form__input-row",children:[Object(fe.jsx)("label",{className:"form__input-row-label",htmlFor:pn.amount,id:"".concat(pn.amount,"-label"),children:"Amount"}),Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(fe.jsx)(ot.a,{render:function(e){var t=e.onChange;return Object(fe.jsx)(Ct,{"aria-labelledby":"".concat(pn.amount,"-label"),defaultValue:Q||0,id:pn.amount,max:ee||0,min:Q||0,step:K||0,onChange:t,disabled:De})},defaultValue:Q||0,control:he,name:pn.amount,rules:{validate:function(e){return!(Number(e)>Number(U))||"Insufficient funds. ".concat(function(e){return e?Object(p.d)(e):"---"}(U)," ").concat(Xe," available.")}}}),Object(fe.jsx)(pt,{error:Object(p.h)(pn.amount,me),id:"error-".concat(pn.amount)})]}),Object(fe.jsxs)("div",{className:"form__input-addon",children:[Object(p.d)(Ce)," ",Xe]})]}),Object(fe.jsx)("button",{"aria-label":Ie?"Submitting your proposal.":"",className:"button",disabled:Re,onClick:Re?function(){}:Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:lt(ve());case 5:case"end":return e.stop()}}),e)}))),type:"submit",children:Ie?Object(fe.jsx)(ht.a,{}):Te?"Done":"Submit"}),De&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:wn({txEtherscanURL:b,txStatus:m,txEtherscanURLTokenApprove:x,txStatusTokenApprove:A})}),Se&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"Something went wrong with the submission.",error:Se,detailsProps:{open:!0}})}),S&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"There is a KYC check error.",error:S,detailsProps:{open:!0}})})]})]})}function kn(e){return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Join"})}),Object(fe.jsx)("div",{className:"form-wrapper",children:e.children})]})})}var Cn=n(195),Sn=n(108),_n=n(223);function In(e){return Object(fe.jsx)("svg",Object(g.a)(Object(g.a)({"aria-hidden":"true",focusable:"false","data-icon":"copy",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),{},{children:Object(fe.jsx)("path",{fill:"currentColor",d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"})}))}function Tn(e){return Object(fe.jsx)("svg",Object(g.a)(Object(g.a)({"aria-hidden":"true",focusable:"false","data-icon":"wallet",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e),{},{children:Object(fe.jsx)("path",{fill:"currentColor",d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"})}))}function Dn(e){var t=e.daoTokenDetails;function n(){return(n=Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:t}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return t?Object(fe.jsxs)("div",{children:["Token:"," ",Object(fe.jsx)(Cn.a,{render:function(e){var n=e.elementRef,r=e.isCopied,a=e.setCopied,c=e.tooltipID;return Object(fe.jsx)("span",{"data-for":c,"data-tip":r?"copied!":t.address,onClick:a,ref:n,children:Object(_n.a)(t.address,5)})},textToCopy:t.address}),Object(fe.jsx)(Sn.a,{effect:"solid",id:"daotoken-address"}),Object(fe.jsx)(Cn.a,{render:function(e){var t=e.elementRef,n=e.isCopied,r=e.setCopied,a=e.tooltipID;return Object(fe.jsx)("button",{className:"daotoken__button","data-for":a,"data-tip":n?"copied!":"copy address",onClick:r,ref:t,children:Object(fe.jsx)(In,{"aria-label":"copy address"})})},textToCopy:t.address}),Object(fe.jsx)("button",{className:"daotoken__button","data-for":"daotoken-wallet","data-tip":"add to wallet",onClick:function(){return n.apply(this,arguments)},children:Object(fe.jsx)(Tn,{"aria-label":"add to wallet"})}),Object(fe.jsx)(Sn.a,{delayShow:200,effect:"solid",id:"daotoken-wallet"})]}):Object(fe.jsx)(fe.Fragment,{})}var Rn;!function(e){e.LARGE="large",e.SMALL="small"}(Rn||(Rn={}));var Pn,Ln,Fn,Mn=n(476);function Bn(e){return Object(fe.jsx)("svg",Object(g.a)(Object(g.a)({"aria-hidden":"true",focusable:"false","data-icon":"user",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),{},{children:Object(fe.jsx)("path",{fill:"currentColor",d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"})}))}function Gn(e){var t=e.isOpen,n=e.closeHandler,r=e.currentStep,a=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),s=Object(c.c)((function(e){return e.contracts.DaoRegistryAdapterContract})),o=Object(c.c)((function(e){return e.connectedMember})),i=Object(we.g)(),u=i.account,d=i.web3Instance,l=Object(we.c)().average,b=Object(we.a)(),j=b.txError,O=b.txEtherscanURL,h=b.txIsPromptOpen,m=b.txSend,v=b.txStatus,x=Object(ot.b)({mode:"onBlur",reValidateMode:"onChange"}),N=Object(c.b)(),E=Object(je.useState)(),A=Object(Ae.a)(E,2),w=A[0],y=A[1],k=x.errors,C=x.getValues,S=x.register,_=x.trigger,I=x.watch,T=v===jt.f.AWAITING_CONFIRM||v===jt.f.PENDING,D=v===jt.f.FULFILLED,R=T||D||h,P=w||j,L=I(Fn.delegateAddress),F=I(Fn.confirmDelegation),M=!L||!F,B={setDelegation:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"modal__title",children:"Delegate"}),Object(fe.jsx)("p",{children:"Transfer your member rights"}),Object(fe.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsx)("div",{className:"form__input-row",children:Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(Fn.delegateAddress),"aria-invalid":k.delegateAddress?"true":"false",name:Fn.delegateAddress,ref:S({validate:function(e){return e?!(!Object(yt.a)(e)||e===Ft.a)||dt.a.INVALID_ETHEREUM_ADDRESS:dt.a.REQUIRED}}),type:"text",disabled:R,placeholder:"Enter delegate address"}),Object(p.h)(Fn.delegateAddress,k).includes("invalid")&&Object(fe.jsx)(pt,{error:Object(p.h)(Fn.delegateAddress,k),id:"error-".concat(Fn.delegateAddress)})]})}),Object(fe.jsx)("div",{className:"form__input-row",style:{marginTop:0},children:Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{className:"checkbox-input","aria-describedby":"error-".concat(Fn.confirmDelegation),"aria-invalid":k.confirmDelegation?"true":"false",id:Fn.confirmDelegation,name:Fn.confirmDelegation,ref:S({required:dt.a.REQUIRED}),type:"checkbox",disabled:R}),Object(fe.jsxs)("label",{className:"checkbox-label",htmlFor:Fn.confirmDelegation,children:[Object(fe.jsx)("span",{className:"checkbox-box ".concat(Rn.SMALL)}),Object(fe.jsx)("span",{className:"checkbox-text",children:"Confirm delegation to the above address. You can revoke this at any time from your profile."})]})]})}),Object(fe.jsx)("button",{"aria-label":T?"Updating your delegate key...":"",className:"button",disabled:R||M,onClick:Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:G(C());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:T?Object(fe.jsx)(ht.a,{}):D?"Done":"Confirm"}),R&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:H()}),P&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"Something went wrong with your delegation.",error:P})})]})]})},revokeDelegation:function(){if(o)return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"modal__title",children:"Revoke Delegation"}),Object(fe.jsx)("p",{children:Object(p.m)(o.delegateKey,7)}),Object(fe.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(fe.jsxs)("p",{children:[Object(fe.jsx)(Bn,{}),"Back to you"]}),Object(fe.jsx)("div",{className:"delegation-modal__text",children:"You'll be able to resume member actions from your account. You can delegate again at any time from your profile."}),Object(fe.jsx)("button",{"aria-label":T?"Updating your delegate key...":"",className:"button",disabled:R,onClick:U,children:T?Object(fe.jsx)(ht.a,{}):D?"Done":"Confirm"}),R&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:H()}),P&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"Something went wrong with your revocation.",error:P})})]});return Object(fe.jsx)(fe.Fragment,{})},updateDelegation:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"modal__title",children:"Update Delegate"}),Object(fe.jsx)("p",{children:"Transfer your member rights"}),Object(fe.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(fe.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(fe.jsx)("div",{className:"form__input-row",children:Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{"aria-describedby":"error-".concat(Fn.delegateAddress),"aria-invalid":k.delegateAddress?"true":"false",name:Fn.delegateAddress,ref:S({validate:function(e){return e?!(!Object(yt.a)(e)||e===Ft.a)||dt.a.INVALID_ETHEREUM_ADDRESS:dt.a.REQUIRED}}),type:"text",disabled:R,placeholder:"Enter delegate address"}),Object(p.h)(Fn.delegateAddress,k).includes("invalid")&&Object(fe.jsx)(pt,{error:Object(p.h)(Fn.delegateAddress,k),id:"error-".concat(Fn.delegateAddress)})]})}),Object(fe.jsx)("div",{className:"form__input-row",style:{marginTop:0},children:Object(fe.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(fe.jsx)("input",{className:"checkbox-input","aria-describedby":"error-".concat(Fn.confirmDelegation),"aria-invalid":k.confirmDelegation?"true":"false",id:Fn.confirmDelegation,name:Fn.confirmDelegation,ref:S({required:dt.a.REQUIRED}),type:"checkbox",disabled:R}),Object(fe.jsxs)("label",{className:"checkbox-label",htmlFor:Fn.confirmDelegation,children:[Object(fe.jsx)("span",{className:"checkbox-box ".concat(Rn.SMALL)}),Object(fe.jsx)("span",{className:"checkbox-text",children:"Confirm delegation to the above address. You will no longer be a delegate with member rights."})]})]})}),Object(fe.jsx)("button",{"aria-label":T?"Updating the delegate key...":"",className:"button",disabled:R||M,onClick:Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:G(C());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:T?Object(fe.jsx)(ht.a,{}):D?"Done":"Confirm"}),R&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:H()}),P&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"Something went wrong with updating the delegate.",error:P})})]})]})}};function G(e){return V.apply(this,arguments)}function V(){return(V=Object(Ge.a)(Ue.a.mark((function e(t){var r,c,o,i,b;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(s){e.next=5;break}throw new Error("No DAO Registry Adapter contract was found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return r=t.delegateAddress,c=[a.contractAddress,Object(We.toChecksumAddress)(r)],o=Object(g.a)({from:u||""},l?{gasPrice:l}:null),e.next=14,m("updateDelegateKey",s.instance.methods,c,o);case 14:e.sent&&setTimeout(Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Object(f.A)({account:u,daoRegistryContract:a,web3Instance:d}));case 2:n();case 3:case"end":return e.stop()}}),e)}))),2e3),e.next=25;break;case 18:e.prev=18,e.t0=e.catch(0),i=e.t0,console.log(i),b=i,(i.message.includes("cannot overwrite existing delegated keys")||i.message.includes("address already taken as delegated key"))&&(b=new Error("The provided address cannot be another member or already in use as a delegate.")),y(b);case 25:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function U(){return Y.apply(this,arguments)}function Y(){return(Y=Object(Ge.a)(Ue.a.mark((function e(){var t,r,c;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(s){e.next=5;break}throw new Error("No DAO Registry Adapter contract was found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return t=[a.contractAddress,Object(We.toChecksumAddress)(u)],r=Object(g.a)({from:u||""},l?{gasPrice:l}:null),e.next=13,m("updateDelegateKey",s.instance.methods,t,r);case 13:e.sent&&setTimeout(Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Object(f.A)({account:u,daoRegistryContract:a,web3Instance:d}));case 2:n();case 3:case"end":return e.stop()}}),e)}))),2e3),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),c=e.t0,console.log(c),y(c);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function H(){switch(v){case jt.f.AWAITING_CONFIRM:return"Awaiting your confirmation\u2026";case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Gt.a,{intervalMs:2e3,messages:Bt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Be.a,{children:e},e)}}),Object(fe.jsx)(Vt.a,{url:O,isPending:!0})]});case jt.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Submitted!"}),Object(fe.jsx)(Vt.a,{url:O})]});default:return null}}return Object(fe.jsxs)(Mn.a,{keyProp:"delegation",isOpen:t,isOpenHandler:function(){},modalClassNames:"delegation-modal",children:[Object(fe.jsx)("span",{className:"modal__close-button",onClick:function(){n()},children:Object(fe.jsx)(Qe.a,{})}),B[r]()]})}function Vn(){var e=Object(c.c)((function(e){return e.connectedMember})),t=Object(we.g)().account,n=Object(je.useState)(Ln.SET_DELEGATION),r=Object(Ae.a)(n,2),a=r[0],s=r[1],o=Object(je.useState)(""),i=Object(Ae.a)(o,2),u=i[0],d=i[1],l=Object(je.useState)(!1),b=Object(Ae.a)(l,2),j=b[0],O=b[1],f=Object(je.useCallback)((function(){if(!e||!t)return;var n=e.delegateKey,r=e.isAddressDelegated,a=e.isActiveMember,c=e.memberAddress;a&&!r&&Object(p.j)(t)===Object(p.j)(c)?(s(Ln.SET_DELEGATION),d(Pn.DELEGATE)):!a&&r&&Object(p.j)(t)===Object(p.j)(c)?(s(Ln.REVOKE_DELEGATION),d(Pn.REVOKE_DELEGATION)):a&&!r&&Object(p.j)(t)===Object(p.j)(n)&&(s(Ln.UPDATE_DELEGATION),d(Pn.UPDATE_DELEGATE))}),[t,e]);return Object(je.useEffect)((function(){f()}),[f]),e?Object(fe.jsxs)(fe.Fragment,{children:[""!==u&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"memberprofile__action-description",children:function(){if(!e)return Object(fe.jsx)(fe.Fragment,{});switch(u){case Pn.DELEGATE:return Object(fe.jsx)(fe.Fragment,{children:"You can delegate your member rights to a different ETH address. The address cannot be another member or already in use as a delegate."});case Pn.REVOKE_DELEGATION:return Object(fe.jsxs)(fe.Fragment,{children:["Your member rights have been delegated to"," ",Object(fe.jsx)("span",{className:"delegation__delegate-address-text",children:Object(p.m)(e.delegateKey,7)}),". You can revoke this at any time."]});case Pn.UPDATE_DELEGATE:return Object(fe.jsxs)(fe.Fragment,{children:["The member rights have been delegated to you"," ",Object(fe.jsx)("span",{className:"delegation__delegate-address-text",children:Object(p.m)(e.delegateKey,7)}),". You can update this at any time."]});default:return Object(fe.jsx)(fe.Fragment,{})}}()}),Object(fe.jsx)("button",{className:"memberprofile__action-button",onClick:function(){return O(!0)},children:u})]}),j&&Object(fe.jsx)(Gn,{isOpen:j,closeHandler:function(){O(!1)},currentStep:a})]}):Object(fe.jsx)(fe.Fragment,{})}!function(e){e.DELEGATE="Delegate",e.REVOKE_DELEGATION="Revoke Delegation",e.UPDATE_DELEGATE="Update Delegate"}(Pn||(Pn={})),function(e){e.SET_DELEGATION="setDelegation",e.REVOKE_DELEGATION="revokeDelegation",e.UPDATE_DELEGATION="updateDelegation"}(Ln||(Ln={})),function(e){e.delegateAddress="delegateAddress",e.confirmDelegation="confirmDelegation"}(Fn||(Fn={}));var Un=["createdAt","didFullyRagequit"];function Yn(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(c.c)((function(e){return e.contracts.BankExtensionContract})),n=Object(c.c)((function(e){return e.subgraphNetworkStatus.status})),a=Object(c.c)((function(e){return e.connectedMember})),s=Object(we.g)().web3Instance,o=Object(we.b)(s),i=Object(Ae.a)(o,2),u=i[0],d=i[1],l=Object(He.a)(h.b,{variables:{daoAddress:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),b=Object(Ae.a)(l,2),j=b[0],f=b[1],m=f.called,v=f.loading,x=f.data,E=f.error,A=Object(je.useState)([]),w=Object(Ae.a)(A,2),y=w[0],k=w[1],C=Object(je.useState)(),S=Object(Ae.a)(C,2),_=S[0],I=S[1],T=Object(je.useState)(ye.a.STANDBY),D=Object(Ae.a)(T,2),R=D[0],P=D[1],L=Object(je.useCallback)((function(){return M.apply(this,arguments)}),[t,e,d,s]),F=Object(je.useCallback)((function(){try{if(P(ye.a.PENDING),x){var e=x.tributeDaos[0].members.filter((function(e){return!e.didFullyRagequit})).map((function(e){e.createdAt,e.didFullyRagequit;var t=Object(N.a)(e,Un);return Object(g.a)(Object(g.a)({},t),{},{address:Object(We.toChecksumAddress)(e.address),delegateKey:Object(We.toChecksumAddress)(e.delegateKey)})}));P(ye.a.FULFILLED),k(e),d(e.map((function(e){return e.address})))}else{if(E)throw new Error("subgraph query error: ".concat(E.message));if("undefined"===typeof x)throw new Error("subgraph query error: data is undefined")}}catch(E){var t=E,n=t.message;console.log(n),L()}}),[x,E,L,d]);function M(){return(M=Object(Ge.a)(Ue.a.mark((function n(){var a,c,o,i,u,l,b,j,f,h,m,v,x,g,N,E,A,w;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t&&s){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,P(ye.a.PENDING),a=e.abi,c=e.contractAddress,o=e.instance.methods,n.next=7,o.getNbMembers().call();case 7:if(i=n.sent,!(Number(i)>0)){n.next=29;break}return u=a.find((function(e){return"getMemberAddress"===e.name})),l=Object(r.a)(Array(Number(i)).keys()).map((function(e){return[c,u,[e.toString()]]})),n.next=13,Object(Ke.l)({calls:l,web3Instance:s});case 13:return b=n.sent,j=a.find((function(e){return"getCurrentDelegateKey"===e.name})),f=b.map((function(e){return[c,j,[e]]})),n.next=18,Object(Ke.l)({calls:f,web3Instance:s});case 18:return h=n.sent,m=t.abi,v=t.contractAddress,x=m.find((function(e){return"balanceOf"===e.name})),g=b.map((function(e){return[v,x,[e,O.y]]})),n.next=24,Object(Ke.l)({calls:g,web3Instance:s});case 24:N=n.sent,E=b.map((function(e,t){return{address:e,delegateKey:h[t],isDelegated:Object(p.j)(e)!==Object(p.j)(h[t]),units:N[t]}})),A=E.filter((function(e){return Object(We.toBN)(e.units).gt(Object(We.toBN)(0))})).reverse(),k(A),d(A.map((function(e){return e.address})));case 29:P(ye.a.FULFILLED),n.next=38;break;case 32:n.prev=32,n.t0=n.catch(2),w=n.t0,P(ye.a.REJECTED),k([]),I(w);case 38:case"end":return n.stop()}}),n,null,[[2,32]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){m||j()}),[m,j]),Object(je.useEffect)((function(){n===ne.a.OK?m&&!v&&null!==e&&void 0!==e&&e.contractAddress&&F():L()}),[null===e||void 0===e?void 0:e.contractAddress,m,L,F,v,n]),Object(je.useEffect)((function(){a&&L()}),[a,L]),Object(je.useEffect)((function(){R===ye.a.FULFILLED&&k((function(e){return e.map((function(e,t){return Object(g.a)(Object(g.a)({},e),{},{addressENS:u[t]})}))}))}),[u,R]),{members:y,membersError:_,membersStatus:R}}function Hn(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(we.g)().account,n=Ye(),r=n.daoTokenDetails,a=n.daoTokenDetailsStatus,s=Object(we.e)().defaultChainError,o=Yn(),i=o.members,u=o.membersError,d=o.membersStatus,l=Object(cn.d)(),b=l.totalUnitsIssued,j=l.totalUnitsStatus,O=Object(ie.h)().ethereumAddress,f=Object(je.useState)(),h=Object(Ae.a)(f,2),m=h[0],v=h[1],x=Object(je.useState)(!1),g=Object(Ae.a)(x,2),N=g[0],E=g[1];Object(je.useEffect)((function(){if(d===ye.a.FULFILLED){var e=i.find((function(e){return Object(p.j)(e.address)===Object(p.j)(O)}));v(e),e||E(!0)}}),[O,i,d]);var A=u||s,w=d===ye.a.FULFILLED,y=!(null===m||void 0===m||!m.addressENS||Object(p.j)(null===m||void 0===m?void 0:m.addressENS)===Object(p.j)(null===m||void 0===m?void 0:m.address)),k=d===ye.a.STANDBY||d===ye.a.PENDING||e&&a===ye.a.STANDBY||a===ye.a.PENDING||j===ye.a.STANDBY||j===ye.a.PENDING,C=!(!t||!m||Object(p.j)(t)!==Object(p.j)(m.address)),S=!(!t||!m||Object(p.j)(t)!==Object(p.j)(m.address)&&Object(p.j)(t)!==Object(p.j)(m.delegateKey)),_=m&&"number"===typeof b?(Number(m.units)/b*100).toFixed(2):"";return k&&!A?Object(fe.jsx)(Wn,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(en.a,{})})}):A?Object(fe.jsx)(Wn,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(Ot.a,{error:A,renderText:"Something went wrong while getting the member."})})}):N&&w?Object(fe.jsx)(Wn,{children:Object(fe.jsx)("div",{className:"text-center error-message",children:Object(fe.jsx)("p",{children:"Member not found."})})}):Object(fe.jsx)(Wn,{children:m?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"memberprofile__header",children:"Member Profile"}),Object(fe.jsxs)("div",{className:"proposaldetails",children:[Object(fe.jsxs)("div",{className:"memberprofile__left-column",children:[Object(fe.jsx)(Cn.a,{render:function(e){var t=e.elementRef,n=e.isCopied,r=e.setCopied,a=e.tooltipID;return Object(fe.jsx)("h3",{onClick:r,children:Object(fe.jsx)("span",{"data-for":a,"data-tip":n?"copied!":y?"".concat(m.addressENS," (").concat(m.address,")"):"copy",ref:t,children:m.addressENS||m.address})})},textToCopy:m.address}),function(){if(m)return Object(fe.jsxs)("div",{children:[Object(fe.jsx)("div",{className:"memberprofile__info-item",children:r?Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"DAO Tokens"}),Object(fe.jsx)("div",{children:"".concat(Object(p.d)(m.units)," ").concat(r.symbol||"tokens")}),C&&Object(fe.jsx)("small",{children:Object(fe.jsx)(Dn,{daoTokenDetails:r})})]}):Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Membership Units"}),Object(fe.jsx)("div",{children:Object(p.d)(m.units)})]})}),Object(fe.jsxs)("div",{className:"memberprofile__info-item",children:[Object(fe.jsx)("div",{children:"Voting Weight"}),Object(fe.jsx)("div",{children:"".concat(_,"%")})]})]})}()]}),Object(fe.jsx)("div",{className:"memberprofile__right-column",children:S?Object(fe.jsx)("div",{children:Object(fe.jsxs)("div",{className:"memberprofile__action",children:[Object(fe.jsx)("div",{className:"memberprofile__action-header",children:"Delegation"}),Object(fe.jsx)(Vn,{})]})}):Object(fe.jsx)("div",{className:"memberprofile__actions-unavailable",children:"Connect your wallet with this member address (or its delegate) to view available actions."})})]})]}):Object(fe.jsx)(fe.Fragment,{})})}function Wn(e){var t=Object(ie.f)();return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Members"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/members")},children:"View all"})]}),e.children]})})}var Kn=n(1029);function zn(e){var t=e.member,n=e.to,r=void 0===n?"#":n,a=Object(we.g)().account,c=Object(je.useRef)(Object(Kn.a)()),o=Object(je.useRef)(Object(Kn.a)()),i=Object(je.useRef)(Object(Kn.a)()),u=t.units,d=Object(p.e)(Number(u)),l=Object(p.d)(u),b=!(null===t||void 0===t||!t.addressENS||Object(p.j)(null===t||void 0===t?void 0:t.addressENS)===Object(p.j)(null===t||void 0===t?void 0:t.address)),j=b?"".concat(t.addressENS," (").concat(t.address,")"):t.address;return Object(fe.jsx)(s.b,{className:"membercard__link",to:r,children:Object(fe.jsxs)("div",{className:"membercard ".concat(!a||Object(p.j)(a)!==Object(p.j)(t.address)&&Object(p.j)(a)!==Object(p.j)(t.delegateKey)?"":"membercard--connected-account"),children:[Object(fe.jsxs)("div",{className:"membercard__row",children:[Object(fe.jsx)("h3",{className:"membercard__title","data-for":o.current,"data-tip":j,children:t.address}),Object(fe.jsx)(Sn.a,{delayShow:200,effect:"solid",id:o.current}),Object(fe.jsx)("span",{className:"membercard__units","data-for":i.current,"data-tip":"".concat(l," unit").concat(1===Number(u)?"":"s"),children:d}),Object(fe.jsx)(Sn.a,{delayShow:200,effect:"solid",id:i.current})]}),b&&(null===t||void 0===t?void 0:t.addressENS)&&Object(fe.jsxs)("div",{className:"membercard__row",children:[Object(fe.jsx)("span",{className:"membercard__ens","data-for":c.current,"data-tip":j,children:null===t||void 0===t?void 0:t.addressENS}),Object(fe.jsx)(Sn.a,{delayShow:200,effect:"solid",id:c.current})]})]})})}function qn(e){return e.map((function(e){return Object(fe.jsx)(zn,{to:"/members/".concat(e.address),member:e},e.address)}))}function Jn(){var e=Yn(),t=e.members,n=e.membersError,r=e.membersStatus,a=Object(we.e)().defaultChainError,c=r===ye.a.STANDBY||r===ye.a.PENDING,s=r===ye.a.FULFILLED,o=n||a;return c&&!o?Object(fe.jsx)(Qn,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(en.a,{})})}):o?Object(fe.jsx)(Qn,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(Ot.a,{error:o,renderText:"Something went wrong while getting the members."})})}):!Object.values(t).length&&s?Object(fe.jsx)(Qn,{children:Object(fe.jsx)("p",{className:"text-center",children:"No members, yet!"})}):Object(fe.jsx)(Qn,{children:Object(fe.jsx)("div",{className:"grid--fluid grid-container",children:Object(fe.jsxs)("div",{children:[Object(fe.jsx)("div",{className:"grid__header",children:"Active Members"}),Object(fe.jsx)("div",{className:"grid__cards",children:qn(t)})]})})})}function Qn(e){return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Members"})}),e.children]})})}var Xn=n(40),$n=n(57),Zn=n(46),er=[jt.b.offchainVotingVotingPeriod,jt.b.offchainVotingGracePeriod];function tr(e){var t=e.adapterName,n=e.onProposalClick,r=void 0===n?function(){}:n,a=e.proposalLinkPath,c=e.renderProposalCard,s=e.includeProposalsExistingOnlyOffchain,o=void 0!==s&&s,i=Object(je.useState)([]),u=Object(Ae.a)(i,2),d=u[0],l=u[1],b=Object(je.useState)({failedProposals:[],nonsponsoredProposals:[],passedProposals:[],votingProposals:[]}),j=Object(Ae.a)(b,2),O=j[0],f=j[1],h=Object(cn.c)(er),m=Object(Ae.a)(h.daoConfigurations,2),v=m[0],x=m[1],N=Object(bt.f)(Object(je.useMemo)((function(){return{adapterName:t,includeProposalsExistingOnlyOffchain:o}}),[t,o])),E=N.proposals,A=N.proposalsError,w=N.proposalsStatus,y=Object(bt.c)(d),k=y.offchainVotingResults,C=y.offchainVotingResultsError,S=y.offchainVotingResultsStatus,_=Object(we.e)().defaultChainError,I=O.failedProposals,T=O.nonsponsoredProposals,D=O.passedProposals,R=O.votingProposals,P=w===ye.a.STANDBY||w===ye.a.PENDING||S===ye.a.STANDBY&&d.length>0||S===ye.a.PENDING,L=A||C||_;function F(e){return e.map((function(e){var t,n=e.daoProposalVote,s=e.daoProposalVotingAdapter,o=e.snapshotDraft,i=e.snapshotProposal,u=(null===o||void 0===o?void 0:o.idInDAO)||(null===i||void 0===i?void 0:i.idInDAO),d=null===s||void 0===s?void 0:s.votingAdapterName,l=0,b=0,j=0,O=0;if(d===Xn.c.OffchainVotingContract){var f=(null===n||void 0===n?void 0:n[Xn.c.OffchainVotingContract])||{},h=f.startingTime,m=f.gracePeriodStartingTime,g=Object($n.a)({gracePeriodLength:x,gracePeriodStartingTime:m,votePeriodLength:v,voteStartingTime:h});l=g.gracePeriodEndMs,b=g.gracePeriodStartMs,j=g.voteEndMs,O=g.voteStartMs}if(!u)return null;if(c)return Object(fe.jsx)(je.Fragment,{children:c({proposalData:e})},u);var N=(null===o||void 0===o?void 0:o.msg.payload.name)||(null===i||void 0===i?void 0:i.msg.payload.name)||"",E=null===(t=k.find((function(e){var t=Object(Ae.a)(e,2),n=t[0];t[1];return Object(p.j)(n)===Object(p.j)(u)})))||void 0===t?void 0:t[1];return Object(fe.jsx)(ln,{linkPath:a,name:N,onClick:r,proposalOnClickId:u,renderStatus:function(){return d===Xn.c.OffchainVotingContract?Object(fe.jsx)($t.c,{countdownGracePeriodEndMs:l,countdownGracePeriodStartMs:b,countdownVotingEndMs:j,countdownVotingStartMs:O,votingResult:E}):Object(fe.jsx)(fe.Fragment,{})}},u)}))}return Object(je.useEffect)((function(){l(E.map((function(e){return e.snapshotProposal})))}),[E]),Object(je.useEffect)((function(){if(w===ye.a.FULFILLED){var e={failedProposals:[],nonsponsoredProposals:[],passedProposals:[],votingProposals:[]};E.forEach((function(t){var n,r,a,c,s=t.daoProposal,i=t.daoProposalVotingState,u=t.daoProposalVote;if(s){var d=0===(null===(n=t.snapshotProposal)||void 0===n||null===(r=n.votes)||void 0===r?void 0:r.length),l=void 0!==i&&(Object($n.f)(Zn.b.GRACE_PERIOD,i)||Object($n.f)(Zn.b.TIE,i))&&Object($n.e)(lt.b.SPONSORED,s.flags)&&(null===u||void 0===u||null===(a=u.OffchainVotingContract)||void 0===a?void 0:a.reporter)===Ft.a;if(void 0!==i)if(void 0!==i&&Object($n.f)(Zn.b.PASS,i)&&(Object($n.e)(lt.b.SPONSORED,s.flags)||Object($n.e)(lt.b.PROCESSED,s.flags)))e.passedProposals.push(t);else{var b=null===(c=k.find((function(e){var n,r=Object(Ae.a)(e,2),a=r[0];r[1];return Object(p.j)(a)===Object(p.j)((null===(n=t.snapshotProposal)||void 0===n?void 0:n.idInDAO)||"")})))||void 0===c?void 0:c[1],j=!!b&&b.Yes.units>b.No.units;l&&!1===d&&j?e.votingProposals.push(t):void 0===i||!Object($n.f)(Zn.b.NOT_PASS,i)&&!Object($n.f)(Zn.b.TIE,i)||!Object($n.e)(lt.b.SPONSORED,s.flags)&&!Object($n.e)(lt.b.PROCESSED,s.flags)?void 0!==i&&l&&d?e.failedProposals.push(t):void 0===i||!l||j?void 0!==i&&(Object($n.f)(Zn.b.GRACE_PERIOD,i)||Object($n.f)(Zn.b.IN_PROGRESS,i))&&Object($n.e)(lt.b.SPONSORED,s.flags)&&e.votingProposals.push(t):e.failedProposals.push(t):e.failedProposals.push(t)}else(o||Object($n.e)(lt.b.EXISTS,s.flags))&&e.nonsponsoredProposals.push(t)}})),f((function(t){return Object(g.a)(Object(g.a)({},t),e)}))}}),[o,k,E,w]),P&&!L?Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(en.a,{})}):L?Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(Ot.a,{error:L,renderText:"Something went wrong while getting the proposals."})}):Object.values(O).flatMap((function(e){return e})).length||w!==ye.a.FULFILLED?Object(fe.jsxs)("div",{className:"grid--fluid grid-container",children:[R.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:dt.d.VOTING}),Object(fe.jsx)("div",{className:"grid__cards",children:F(R)})]}),T.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:dt.d.REQUESTS}),Object(fe.jsx)("div",{className:"grid__cards",children:F(T)})]}),D.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:dt.d.PASSED}),Object(fe.jsx)("div",{className:"grid__cards",children:F(D)})]}),I.length>0&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{className:"grid__header",children:dt.d.FAILED}),Object(fe.jsx)("div",{className:"grid__cards",children:F(I)})]})]}):Object(fe.jsx)("p",{className:"text-center",children:"No proposals, yet!"})}function nr(){return Object(fe.jsx)(rr,{children:Object(fe.jsx)(tr,{adapterName:Xn.a.ONBOARDING,proposalLinkPath:function(e){return"/onboarding/".concat(e)},includeProposalsExistingOnlyOffchain:!0})})}function rr(e){var t=Object(ie.f)();return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Onboarding"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/onboard")},children:"Become a member"})]}),e.children]})})}var ar={skipIsActiveMemberCheck:!0},cr=O.u!==O.m;function sr(e){var t=e.txEtherscanURL,n=e.txStatus,r=e.txEtherscanURLTokenApprove,a=e.txStatusTokenApprove;if(a===jt.f.AWAITING_CONFIRM)return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to transfer your tokens",Object(fe.jsx)(ut.a,{intervalMs:500})]});if(a===jt.f.PENDING)return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:["Approving your tokens for transfer",Object(fe.jsx)(ut.a,{intervalMs:500})]}),Object(fe.jsx)(Vt.a,{url:r,isPending:!0})]});switch(n){case jt.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to process the proposal",Object(fe.jsx)(ut.a,{intervalMs:500})]});case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Gt.a,{intervalMs:2e3,messages:Bt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Be.a,{children:e},e)}}),Object(fe.jsx)(Vt.a,{url:t,isPending:!0})]});case jt.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Proposal processed!"}),Object(fe.jsx)(Vt.a,{url:t})]});default:return null}}function or(e){var t=e.disabled,r=e.proposal.snapshotProposal,a=Object(je.useState)(),s=Object(Ae.a)(a,2),o=s[0],i=s[1],u=Object(je.useState)(),d=Object(Ae.a)(u,2),l=d[0],b=d[1],j=Object(je.useRef)({notProposerMessage:""}),p=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.OnboardingContract})),h=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),m=Object(we.g)(),v=m.account,x=m.web3Instance,N=Object(we.a)(),E=N.txEtherscanURL,A=N.txIsPromptOpen,w=N.txSend,y=N.txStatus,k=Object(we.c)().average,C=Object(we.a)(),S=C.txEtherscanURL,_=C.txIsPromptOpen,I=C.txSend,T=C.txStatus,D=Object(cn.f)(ar),R=D.isDisabled,P=D.openWhyDisabledModal,L=D.WhyDisabledModal,F=D.setOtherDisabledReasons,M=Ye().daoTokenDetails,B=Object(c.b)(),G=y===jt.f.AWAITING_CONFIRM||y===jt.f.PENDING||T===jt.f.AWAITING_CONFIRM||T===jt.f.PENDING,V=y===jt.f.FULFILLED,U=G||V||A||_,Y=R||U||t,H=Object(je.useCallback)((function(){return W.apply(this,arguments)}),[p,null===h||void 0===h?void 0:h.contractAddress,r]);function W(){return(W=Object(Ge.a)(Ue.a.mark((function e(){var t;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==h&&void 0!==h&&h.contractAddress&&p&&r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,p.instance.methods.proposals(h.contractAddress,r.idInDAO).call();case 5:t=e.sent,b(t.amount),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),b(void 0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function K(e){return z.apply(this,arguments)}function z(){return(z=Object(Ge.a)(Ue.a.mark((function e(t){var r,a,c,s,o,i,u,d,l,b;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O.u){e.next=3;break}throw new Error("No Onboarding ERC20 address was found. Are you sure it is set?");case 3:if(p){e.next=5;break}throw new Error("No OnboardingContract found.");case 5:if(v){e.next=7;break}throw new Error("No account found.");case 7:if(x){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return e.next=11,Promise.resolve().then(n.t.bind(null,507,3));case 11:return r=e.sent,a=r.default,c=a,s=new x.eth.Contract(c,O.u),e.next=17,s.methods.allowance(v,p.contractAddress).call();case 17:if(o=e.sent,i=Object(We.toBN)(o),!t.gt(i)){e.next=26;break}return u=t.sub(i),d=i.add(u),l=[p.contractAddress,String(d)],b=Object(g.a)({from:v||""},k?{gasPrice:k}:null),e.next=26,I("approve",s.methods,l,b);case 26:e.next=31;break;case 28:throw e.prev=28,e.t0=e.catch(0),e.t0;case 31:case"end":return e.stop()}}),e,null,[[0,28]])})))).apply(this,arguments)}function q(){return(q=Object(Ge.a)(Ue.a.mark((function e(){var t,n,a,c;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,h){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(r){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(p){e.next=7;break}throw new Error("No OnboardingContract found.");case 7:if(v){e.next=9;break}throw new Error("No account found.");case 9:if(x){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(l){e.next=13;break}throw new Error("No proposal amount found.");case 13:if(!cr){e.next=17;break}return t=Object(We.toBN)(l),e.next=17,K(t);case 17:return n=[h.contractAddress,r.idInDAO],a=Object(g.a)(Object(g.a)({from:v||""},k?{gasPrice:k}:null),cr?null:{value:l}),e.next=21,w("processProposal",p.instance.methods,n,a);case 21:if(!e.sent){e.next=28;break}return e.next=25,B(Object(f.A)({account:v,daoRegistryContract:h,web3Instance:x}));case 25:if(v.toLowerCase()!==r.msg.payload.metadata.submitActionArgs[0].toLowerCase()){e.next=28;break}return e.next=28,J();case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(0),c=e.t0,i(c);case 34:case"end":return e.stop()}}),e,null,[[0,30]])})))).apply(this,arguments)}function J(){return Q.apply(this,arguments)}function Q(){return(Q=Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:M}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){H()}),[H]),Object(je.useEffect)((function(){var e=r.msg.payload.metadata.accountAuthorizedToProcessPassedProposal;e&&v&&(j.current=Object(g.a)(Object(g.a)({},j.current),{},{notProposerMessage:e.toLowerCase()!==v.toLowerCase()?"Only the original proposer can process the proposal.":""})),F(Object.values(j.current))}),[v,F,r]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:[Object(fe.jsx)("button",{className:"proposaldetails__button",disabled:Y,onClick:Y?function(){}:function(){return q.apply(this,arguments)},children:G?Object(fe.jsx)(ht.a,{}):V?"Done":"Process"}),Object(fe.jsx)(Ot.a,{error:o,renderText:"Something went wrong"}),U&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:sr({txEtherscanURL:E,txStatus:y,txEtherscanURLTokenApprove:S,txStatusTokenApprove:T})}),R&&Object(fe.jsx)("button",{className:"button--help-centered",onClick:P,children:"Why is processing disabled?"})]}),Object(fe.jsx)(L,{title:"Why is processing disabled?"})]})}var ir=Object(je.lazy)((function(){return n.e(8).then(n.bind(null,1085))})),ur={duration:150},dr={display:"inline-block",width:"100%",fontSize:"1.5rem"};function lr(e){var t,n=e.adapterName,r=e.proposal,a=e.renderAction,s=Object(c.c)((function(e){var t;return null===(t=e.contracts.VotingContract)||void 0===t?void 0:t.adapterOrExtensionName})),o=(null===(t=r.daoProposalVotingAdapter)||void 0===t?void 0:t.votingAdapterName)||s;return Object(fe.jsx)(je.Suspense,{fallback:Object(fe.jsx)("span",{className:"text-center",style:dr,children:Object(fe.jsx)(ut.a,{intervalMs:200,fadeInProps:ur})}),children:function(){if(!o)return Object(fe.jsx)(fe.Fragment,{});switch(o){case Xn.c.OffchainVotingContract:return Object(fe.jsx)(ir,{adapterName:n,proposal:r,renderAction:a});case Xn.c.VotingContract:return Object(fe.jsx)(fe.Fragment,{});default:return Object(fe.jsx)(Ot.a,{error:new Error('"'.concat(o,'" is not a valid voting adapter name.')),renderText:"Something went wrong"})}}()})}var br=n(227);function jr(e){var t=e.amount,n=e.amountUnit,r=e.amount2,a=e.amount2Unit;return Object(fe.jsx)("div",{className:"proposaldetails__amount",children:Object(fe.jsxs)("span",{children:["".concat(t," ").concat(n),r&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("br",{}),Object(fe.jsx)("small",{children:"for"}),Object(fe.jsx)("br",{}),"".concat(r," ").concat(a)]})]})})}function Or(){var e=Object(ie.h)().proposalId,t=Object(bt.d)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(we.e)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal,a=t.status;if(a===lt.c.Submit){var c=r.snapshotDraft,s=null===c||void 0===c?void 0:c.msg.payload.metadata.submitActionArgs[0];return Object(fe.jsx)(br.a,{checkApplicant:s,proposal:r})}return a===lt.c.Process||a===lt.c.OffchainVotingGracePeriod?n&&Zn.b[n]!==Zn.b[Zn.b.PASS]?Object(fe.jsx)(fe.Fragment,{}):Object(fe.jsx)(or,{disabled:a===lt.c.OffchainVotingGracePeriod,proposal:r}):null}if(c===ye.a.PENDING&&!o)return Object(fe.jsx)(fr,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(en.a,{})})});if(a)return Object(fe.jsx)(fr,{children:Object(fe.jsx)(tn,{})});if(o)return Object(fe.jsx)(fr,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(Ot.a,{error:o,renderText:"Something went wrong while getting the proposal."})})});if(n){var u=n.getCommonSnapshotProposalData(),d="\u2014",l="";try{var b=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=b.tributeAmount,l=b.tributeAmountUnit}catch(o){d="\u2014",l=""}return Object(fe.jsx)(fr,{children:Object(fe.jsx)(nn,{proposal:n,renderAmountBadge:function(){return Object(fe.jsx)(jr,{amount:d,amountUnit:l})},renderActions:function(){return Object(fe.jsx)(lr,{adapterName:jt.a.onboarding,proposal:n,renderAction:i})}})})}return Object(fe.jsx)(fe.Fragment,{})}function fr(e){var t=Object(ie.f)();return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Onbording"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/onboarding")},children:"View all"})]}),e.children]})})}function pr(e){var t=e.showAfterMs,n=Object(je.useState)(!1),r=Object(Ae.a)(n,2),a=r[0],c=r[1];return Object(je.useEffect)((function(){var e=t&&setTimeout((function(){return c(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),!t||t&&a?Object(fe.jsx)("div",{className:"loader--emoji",children:Object(fe.jsx)("span",{role:"img","aria-label":"Loading content...",children:e.emoji})}):null}var hr=n(226),mr=n(166),vr={skipIsActiveMemberCheck:!0};function xr(e){var t=e.redeemables,n=e.daoTokenDetails;return Object(fe.jsx)(Nr,{children:Object(fe.jsx)(gr,{redeemable:t[0],daoTokenDetails:n})})}function gr(e){var t=e.redeemable,n=e.daoTokenDetails,r=Object(je.useRef)({invalidApplicantMessage:""}),a=Object(mr.b)(),c=a.redeemCoupon,s=a.submitStatus,o=a.submitError,i=a.txStatus,u=a.txEtherscanURL,d=a.txIsPromptOpen,l=Object(cn.f)(vr),b=l.isDisabled,j=l.openWhyDisabledModal,O=l.WhyDisabledModal,f=l.setOtherDisabledReasons,h=Object(bt.a)(t.recipient),m=h.checkApplicantError,v=h.checkApplicantInvalidMsg,x=h.checkApplicantStatus,N=h.isApplicantValid,E=s===mr.a.PENDING||i===jt.f.AWAITING_CONFIRM||i===jt.f.PENDING,A=s===mr.a.FULFILLED||i===jt.f.FULFILLED||t.isRedeemd,w=E||A||d;return Object(je.useEffect)((function(){t.recipient&&(m&&console.warn("Error checking if the applicant address '".concat(t.recipient,"' is valid: ").concat(m.message)),x===ye.a.FULFILLED&&!N&&v&&(r.current=Object(g.a)(Object(g.a)({},r.current),{},{invalidApplicantMessage:v})),f(Object.values(r.current)))}),[m,v,x,N,t.recipient,f]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{className:"redeemcard redeemcard__content ".concat(A?"fireworks":""," "),children:[Object(fe.jsxs)("p",{className:"redeemcard__recipient",children:["Recipient:"," ",Object(p.m)(Object(We.toChecksumAddress)(t.recipient),7)]}),Object(fe.jsxs)("p",{className:"redeemcard__unit",children:[Object(p.d)(t.amount),Object(fe.jsx)("sup",{children:Object(fe.jsx)("small",{children:(null===n||void 0===n?void 0:n.symbol)||"tokens"})})]}),Object(fe.jsx)(Dn,{daoTokenDetails:n}),A&&Object(fe.jsx)("p",{className:"redeemcard__redeemed",children:Object(fe.jsx)("span",{className:"pulse",role:"img","aria-label":"Redeemed!",style:{display:"inline-block"},children:"\ud83e\udd73"})}),Object(fe.jsx)("button",{className:"button",style:{marginTop:A?"1rem":"1.5rem"},onClick:Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,n);case 2:case"end":return e.stop()}}),e)}))),disabled:b||w,children:E?Object(fe.jsx)(ht.a,{}):A?"Redeemed!":"Redeem"}),w&&!t.isRedeemd&&Object(fe.jsx)("div",{className:"form__submit-status-container",style:{marginTop:"1rem"},children:function(){switch(i){case jt.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Awaiting your confirmation",Object(fe.jsx)(hr.a,{})]});case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Gt.a,{intervalMs:2e3,messages:Bt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Be.a,{children:e},e)}}),Object(fe.jsx)(Vt.a,{url:u,isPending:!0})]});case jt.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Finalized!"}),Object(fe.jsx)(Vt.a,{url:u})]});default:return null}}()}),b&&Object(fe.jsx)("button",{className:"button--help-centered",onClick:j,style:{margin:"1rem auto 0"},children:"Why is redeeming disabled?"}),o&&Object(fe.jsx)("div",{className:"form__submit-error-container",children:Object(fe.jsx)(Ot.a,{renderText:"Something went wrong while redeeming the coupon.",error:o})})]}),Object(fe.jsx)(O,{title:"Why is redeeming disabled?"})]})}function Nr(e){return Object(fe.jsx)(Be.a,{children:Object(fe.jsx)("div",{className:"grid--fluid grid-container",children:e.children})})}function Er(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(je.useState)([]),n=Object(Ae.a)(t,2),r=n[0],a=n[1],s=Object(je.useState)(ye.a.STANDBY),o=Object(Ae.a)(s,2),i=o[0],u=o[1],d=Object(we.g)(),l=d.connected,b=d.account,j=Object(we.e)().defaultChainError,f=Object(cn.a)(),p=f.abortController,h=f.isMountedRef,m=Ye(),v=m.daoTokenDetails,x=m.daoTokenDetailsStatus,g=Object(ie.g)(),N=new URLSearchParams(g.search).get("coupon"),E=i===ye.a.STANDBY||i===ye.a.PENDING||e&&x===ye.a.STANDBY||x===ye.a.PENDING,A=Object(je.useCallback)((function(){return w.apply(this,arguments)}),[null===p||void 0===p?void 0:p.signal,N,h]);function w(){return(w=Object(Ge.a)(Ue.a.mark((function e(){var t,n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==p&&void 0!==p&&p.signal){e.next=3;break}return e.abrupt("return");case 3:return u(ye.a.PENDING),e.next=6,fetch("".concat(O.d,"/api/coupon/redeem"),{method:"POST",body:JSON.stringify({signature:N}),headers:{"Content-Type":"application/json"},signal:p.signal});case 6:if(t=e.sent,h.current){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,t.json();case 11:n=e.sent,a(n),u(ye.a.FULFILLED),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(0),h.current){e.next=20;break}return e.abrupt("return");case 20:u(ye.a.REJECTED);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){b&&l&&!j&&A()}),[b,l,A,j]),l?j?Object(fe.jsx)(Ar,{children:Object(fe.jsx)("p",{className:"color-brightsalmon",children:j.message})}):l&&E?Object(fe.jsxs)(Ar,{children:[Object(fe.jsx)(pr,{emoji:"\ud83c\udf9f"}),Object(fe.jsx)("p",{children:"Checking\u2026 please wait."})]}):void 0!==N&&N?r&&r.length?Object(fe.jsx)(Ar,{children:Object(fe.jsx)(xr,{daoTokenDetails:v,redeemables:r})}):Object(fe.jsx)(Ar,{children:Object(fe.jsx)("p",{className:"color-brightsalmon",children:"Coupon not found."})}):Object(fe.jsx)(Ar,{children:Object(fe.jsx)("p",{className:"color-brightsalmon",children:"Coupon signature missing."})}):Object(fe.jsx)(Ar,{children:Object(fe.jsx)("p",{className:"color-brightsalmon",children:"Connect your wallet to view the coupon."})})}function Ar(e){return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsx)("div",{className:"titlebar",children:Object(fe.jsx)("h2",{className:"titlebar__title",children:"Redeem Coupon"})}),Object(fe.jsxs)("div",{className:"form-wrapper",children:[Object(fe.jsx)("div",{className:"form__description",children:Object(fe.jsx)("p",{children:"Redeem coupon to issue the membership tokens."})}),e.children]})]})})}function wr(e){var t=e.proposal.snapshotProposal,n=Object(je.useState)(),r=Object(Ae.a)(n,2),a=r[0],s=r[1],o=Object(je.useRef)({alreadyCompletedMessage:""}),i=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DistributeContract})),u=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),d=Object(we.g)(),l=d.account,b=d.web3Instance,j=Object(we.a)(),O=j.txEtherscanURL,p=j.txIsPromptOpen,h=j.txSend,m=j.txStatus,v=Object(we.c)().average,x=Object(cn.f)(),N=x.isDisabled,E=x.openWhyDisabledModal,A=x.WhyDisabledModal,w=x.setOtherDisabledReasons,y=Object(c.b)(),k=m===jt.f.AWAITING_CONFIRM||m===jt.f.PENDING,C=m===jt.f.FULFILLED,S=k||C||p,_=N||S;function I(){return(I=Object(Ge.a)(Ue.a.mark((function e(){var n,r,a,c,o;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(t){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(i){e.next=7;break}throw new Error("No DistributeContract found.");case 7:if(l){e.next=9;break}throw new Error("No account found.");case 9:if(b){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(n="0",!(null===t||void 0===t?void 0:t.msg.payload.metadata.isTypeAllMembers)){e.next=24;break}return e.prev=14,e.next=17,u.instance.methods.getNbMembers().call();case 17:r=e.sent,n=r.toString(),e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(14),new Error("Error while retrieving number of DAO members");case 24:return a=[u.contractAddress,n],c=Object(g.a)({from:l||""},v?{gasPrice:v}:null),e.next=28,h("distribute",i.instance.methods,a,c);case 28:if(!e.sent){e.next=32;break}return e.next=32,y(Object(f.A)({account:l,daoRegistryContract:u,web3Instance:b}));case 32:e.next=38;break;case 34:e.prev=34,e.t1=e.catch(0),o=e.t1,s(o);case 38:case"end":return e.stop()}}),e,null,[[0,34],[14,21]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){function e(){return(e=Object(Ge.a)(Ue.a.mark((function e(){var n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No Snapshot proposal was found.");case 3:if(u){e.next=5;break}throw new Error("No DAO Registry contract was found.");case 5:if(i){e.next=7;break}throw new Error("No DistributeContract found.");case 7:return e.next=9,i.instance.methods.distributions(u.contractAddress,t.idInDAO).call();case 9:n=e.sent,o.current=Object(g.a)(Object(g.a)({},o.current),{},{alreadyCompletedMessage:lt.a[n.status]!==lt.a[lt.a.IN_PROGRESS]?"The transfer has already been completed.":""}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:w(Object.values(o.current));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i,u,w,t]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:[Object(fe.jsx)("button",{className:"proposaldetails__button",disabled:_,onClick:_?function(){}:function(){return I.apply(this,arguments)},children:k?Object(fe.jsx)(ht.a,{}):C?"Transfer done":"Transfer assets"}),Object(fe.jsx)(Ot.a,{error:a,renderText:"Something went wrong"}),S&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){switch(m){case jt.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to transfer assets",Object(fe.jsx)(ut.a,{})]});case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Gt.a,{intervalMs:2e3,messages:Bt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Be.a,{children:e},e)}}),Object(fe.jsx)(Vt.a,{url:O,isPending:!0})]});case jt.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Assets transferred!"}),Object(fe.jsx)(Vt.a,{url:O})]});default:return null}}()}),N&&Object(fe.jsx)("button",{className:"button--help-centered",onClick:E,children:"Why is action disabled?"})]}),Object(fe.jsx)(A,{title:"Why is transfer disabled?"})]})}function yr(){var e=Object(ie.h)().proposalId,t=Object(bt.d)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(we.e)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal;return t.status===lt.c.Completed&&n&&Zn.b[n]===Zn.b[Zn.b.PASS]?Object(fe.jsx)(wr,{proposal:r}):null}if(c===ye.a.PENDING&&!o)return Object(fe.jsx)(kr,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(en.a,{})})});if(a)return Object(fe.jsx)(kr,{children:Object(fe.jsx)(tn,{})});if(o)return Object(fe.jsx)(kr,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(Ot.a,{error:o,renderText:"Something went wrong."})})});if(n){var u=n.getCommonSnapshotProposalData(),d="\u2014",l="";try{var b=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=b.transferAmount,l=b.transferAmountUnit}catch(o){d="\u2014",l=""}return Object(fe.jsx)(kr,{children:Object(fe.jsx)(nn,{proposal:n,renderAmountBadge:function(){return Object(fe.jsx)(jr,{amount:d,amountUnit:l})},renderActions:function(){return Object(fe.jsx)(lr,{adapterName:jt.a.distribute,proposal:n,renderAction:i})}})})}return Object(fe.jsx)(fe.Fragment,{})}function kr(e){var t=Object(ie.f)();return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Transfers"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/transfers")},children:"View all"})]}),e.children]})})}function Cr(){return Object(fe.jsx)(Sr,{children:Object(fe.jsx)(tr,{adapterName:Xn.a.DISTRIBUTE,proposalLinkPath:function(e){return"/transfers/".concat(e)}})})}function Sr(e){var t=Object(ie.f)();return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Transfers"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/transfer")},children:"Make Transfer"})]}),e.children]})})}var _r={skipIsActiveMemberCheck:!0};function Ir(e){var t=e.disabled,r=e.proposal.snapshotProposal,a=Object(je.useState)(),s=Object(Ae.a)(a,2),o=s[0],i=s[1],u=Object(je.useState)(),d=Object(Ae.a)(u,2),l=d[0],b=d[1],j=Object(je.useRef)({notProposerMessage:""}),O=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.TributeContract})),p=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),h=Object(we.g)(),m=h.account,v=h.web3Instance,x=Object(we.a)(),N=x.txEtherscanURL,E=x.txIsPromptOpen,A=x.txSend,w=x.txStatus,y=Object(we.c)().average,k=Object(we.a)(),C=k.txEtherscanURL,S=k.txIsPromptOpen,_=k.txSend,I=k.txStatus,T=Object(cn.f)(_r),D=T.isDisabled,R=T.openWhyDisabledModal,P=T.WhyDisabledModal,L=T.setOtherDisabledReasons,F=Ye().daoTokenDetails,M=Object(c.b)(),B=w===jt.f.AWAITING_CONFIRM||w===jt.f.PENDING||I===jt.f.AWAITING_CONFIRM||I===jt.f.PENDING,G=w===jt.f.FULFILLED,V=B||G||E||S,U=D||V||t,Y=Object(je.useCallback)((function(){return H.apply(this,arguments)}),[O,null===p||void 0===p?void 0:p.contractAddress,r]);function H(){return(H=Object(Ge.a)(Ue.a.mark((function e(){var t,n,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==p&&void 0!==p&&p.contractAddress&&r&&O){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,O.instance.methods.proposals(p.contractAddress,r.idInDAO).call();case 5:t=e.sent,n=t.token,a=t.tributeAmount,b({tokenAddress:n,tributeAmount:a}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),b(void 0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function W(){return K.apply(this,arguments)}function K(){return(K=Object(Ge.a)(Ue.a.mark((function e(){var t,r,a,c,s,o,i,u,d,b,j,f,p;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=3;break}throw new Error("No Tribute proposal details found.");case 3:if(O){e.next=5;break}throw new Error("No TributeContract found.");case 5:if(m){e.next=7;break}throw new Error("No account found.");case 7:if(v){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return t=l.tokenAddress,r=l.tributeAmount,e.next=12,Promise.resolve().then(n.t.bind(null,507,3));case 12:return a=e.sent,c=a.default,s=c,o=new v.eth.Contract(s,t),e.next=18,o.methods.allowance(m,O.contractAddress).call();case 18:if(i=e.sent,u=Object(We.toBN)(r),d=Object(We.toBN)(i),!u.gt(d)){e.next=34;break}return e.prev=22,b=u.sub(d),j=d.add(b),f=[O.contractAddress,j.toString()],p=Object(g.a)({from:m||""},y?{gasPrice:y}:null),e.next=29,_("approve",o.methods,f,p);case 29:e.next=34;break;case 31:throw e.prev=31,e.t0=e.catch(22),e.t0;case 34:e.next=39;break;case 36:throw e.prev=36,e.t1=e.catch(0),e.t1;case 39:case"end":return e.stop()}}),e,null,[[0,36],[22,31]])})))).apply(this,arguments)}function z(){return(z=Object(Ge.a)(Ue.a.mark((function e(){var t,n,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(r){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(O){e.next=7;break}throw new Error("No TributeContract found.");case 7:if(m){e.next=9;break}throw new Error("No account found.");case 9:if(v){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:return e.next=13,W();case 13:return t=[p.contractAddress,r.idInDAO],n=Object(g.a)({from:m||""},y?{gasPrice:y}:null),e.next=17,A("processProposal",O.instance.methods,t,n);case 17:if(!e.sent){e.next=24;break}return e.next=21,M(Object(f.A)({account:m,daoRegistryContract:p,web3Instance:v}));case 21:if(m.toLowerCase()!==r.msg.payload.metadata.submitActionArgs[0].toLowerCase()){e.next=24;break}return e.next=24,q();case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),a=e.t0,i(a);case 30:case"end":return e.stop()}}),e,null,[[0,26]])})))).apply(this,arguments)}function q(){return J.apply(this,arguments)}function J(){return(J=Object(Ge.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:F}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){Y()}),[Y]),Object(je.useEffect)((function(){var e=r.msg.payload.metadata.accountAuthorizedToProcessPassedProposal;e&&m&&(j.current=Object(g.a)(Object(g.a)({},j.current),{},{notProposerMessage:e.toLowerCase()!==m.toLowerCase()?"Only the original proposer can process the proposal.":""})),L(Object.values(j.current))}),[m,L,r]),Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:[Object(fe.jsx)("button",{className:"proposaldetails__button",disabled:U,onClick:U?function(){}:function(){return z.apply(this,arguments)},children:B?Object(fe.jsx)(ht.a,{}):G?"Done":"Process"}),Object(fe.jsx)(Ot.a,{error:o,renderText:"Something went wrong"}),V&&Object(fe.jsx)("div",{className:"form__submit-status-container",children:function(){if(I===jt.f.AWAITING_CONFIRM)return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to transfer your tokens",Object(fe.jsx)(ut.a,{})]});if(I===jt.f.PENDING)return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{children:["Approving your tokens for transfer",Object(fe.jsx)(ut.a,{})]}),Object(fe.jsx)(Vt.a,{url:C,isPending:!0})]});switch(w){case jt.f.AWAITING_CONFIRM:return Object(fe.jsxs)(fe.Fragment,{children:["Confirm to process the proposal",Object(fe.jsx)(ut.a,{})]});case jt.f.PENDING:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(Gt.a,{intervalMs:2e3,messages:Bt.b,useFirstItemStart:!0,render:function(e){return Object(fe.jsx)(Be.a,{children:e},e)}}),Object(fe.jsx)(Vt.a,{url:N,isPending:!0})]});case jt.f.FULFILLED:return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("div",{children:"Proposal processed!"}),Object(fe.jsx)(Vt.a,{url:N})]});default:return null}}()}),D&&Object(fe.jsx)("button",{className:"button--help-centered",onClick:R,children:"Why is processing disabled?"})]}),Object(fe.jsx)(P,{title:"Why is processing disabled?"})]})}var Tr="\u2014";function Dr(){var e=Object(ie.h)().proposalId,t=Object(bt.d)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(we.e)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal,a=t.status;if(a===lt.c.Submit){var c=r.snapshotDraft,s=null===c||void 0===c?void 0:c.msg.payload.metadata.submitActionArgs[0];return Object(fe.jsx)(br.a,{checkApplicant:s,proposal:r})}return a===lt.c.Process||a===lt.c.OffchainVotingGracePeriod?n&&Zn.b[n]!==Zn.b[Zn.b.PASS]?Object(fe.jsx)(fe.Fragment,{}):Object(fe.jsx)(Ir,{disabled:a===lt.c.OffchainVotingGracePeriod,proposal:r}):null}if(c===ye.a.PENDING&&!o)return Object(fe.jsx)(Rr,{children:Object(fe.jsx)("div",{className:"loader--large-container",children:Object(fe.jsx)(en.a,{})})});if(a)return Object(fe.jsx)(Rr,{children:Object(fe.jsx)(tn,{})});if(o)return Object(fe.jsx)(Rr,{children:Object(fe.jsx)("div",{className:"text-center",children:Object(fe.jsx)(Ot.a,{error:o,renderText:"Something went wrong."})})});if(n){var u=n.getCommonSnapshotProposalData(),d=Tr,l="",b=Tr,j="";try{var O=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=O.tributeAmount,l=O.tributeAmountUnit,b=O.requestAmount,j=O.requestAmountUnit}catch(o){d=Tr,l="",b=Tr,j=""}return Object(fe.jsx)(Rr,{children:Object(fe.jsx)(nn,{proposal:n,renderAmountBadge:function(){return Object(fe.jsx)(jr,{amount:d,amountUnit:l,amount2:b,amount2Unit:j})},renderActions:function(){return Object(fe.jsx)(lr,{adapterName:jt.a.tribute,proposal:n,renderAction:i})}})})}return Object(fe.jsx)(fe.Fragment,{})}function Rr(e){var t=Object(ie.f)();return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Tributes"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/tributes")},children:"View all"})]}),e.children]})})}function Pr(){return Object(fe.jsx)(Lr,{children:Object(fe.jsx)(tr,{adapterName:Xn.a.TRIBUTE,proposalLinkPath:function(e){return"/tributes/".concat(e)},includeProposalsExistingOnlyOffchain:!0})})}function Lr(e){var t=Object(ie.f)();return Object(fe.jsx)(Nt,{className:"section-wrapper",children:Object(fe.jsxs)(Be.a,{children:[Object(fe.jsxs)("div",{className:"titlebar",children:[Object(fe.jsx)("h2",{className:"titlebar__title",children:"Tributes"}),Object(fe.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/tribute")},children:"Provide Tribute"})]}),e.children]})})}function Fr(){return Object(fe.jsx)("div",{children:Object(fe.jsxs)("div",{className:"interest_submit-proposal_xyz",children:[Object(fe.jsx)("span",{className:"interest_submit-proposal__image__1JcQq","aria-label":"Unicorn emoji",role:"img",children:"\ud83c\udfa5"}),Object(fe.jsx)("br",{}),Object(fe.jsx)("div",{className:"interest_submit-proposal__title__dZrRm",children:Object(fe.jsx)("h2",{children:"Privacy Policy"})}),Object(fe.jsx)("div",{className:"interest_submit-proposal-slogan",children:Object(fe.jsxs)("ul",{children:[Object(fe.jsx)("li",{children:"Preambule :"}),Object(fe.jsx)("p",{children:"The purpose of this privacy policy is to describe what personal data is collected, the methods and purposes of processing, as well as the rights and security measures taken to protect them. These terms will apply, regardless of how and trough which device you accessed our website."}),Object(fe.jsx)("li",{children:"What data we collect :"}),Object(fe.jsx)("p",{children:"CINECAPSULE collects personal data, which refers to any information relating to you and that identifies you, directly or indirectly.This may be your identity data (such as contact data, your name, surname, language and country from which you interact with us), your areas of interest, your size or style preferences, events you participate in, the pages you visit, cv data, technical data (as connection, geolocation and browsing data) and commercial information."}),Object(fe.jsx)("li",{children:"Why we use your data and what for :"}),Object(fe.jsx)("p",{children:"we will use your data, among other purposes, to manage personalized content for you or to send you commercial communications, to analyze the ergonomy of our website through cookies or other technologies, improve our services for you."}),Object(fe.jsx)("li",{children:"Who we share your data with :"}),Object(fe.jsx)("p",{children:"We will treat all your personal information as confidential. We will never share or sell your data outside CINECAPSULE for marketing purposes. Data that we forward to third party companies are only for limited reasons below. We share your data on a limited basis with trusted suppliers that provide us with services we offer to you. These are suppliers who provide us with technological services as the internet platform, financial institutions, advertising and marketing partners, providers of customer service or government bodies and law enforcement agencies or the ones that help us to prevent fraud. We exclusively disclose data to them that is strictly necessary for them to support us and please them to use your data only for the listed purposes. \u200b"}),Object(fe.jsx)("li",{children:"How we store your data :"}),Object(fe.jsx)("p",{children:"CINECAPSULE keeps your data for the time necessary to achieve the purpose we collected it for. This may be to satisfy your needs or to meet legal obligations."}),Object(fe.jsx)("li",{children:"Where we store your data :"}),Object(fe.jsx)("p",{children:"Your data is stored in the eea european economic area and may be transferred and processed outside of the eea, considering the respectif laws."}),Object(fe.jsx)("li",{children:"Your rights :"}),Object(fe.jsx)("p",{children:"We want to make sure you are fully aware of all of your data protection rights under the european directive gdpr (general data protection regulation)."}),Object(fe.jsx)("li",{children:"You are entitled to the following :"}),Object(fe.jsx)("p",{children:"The right to access \u2013 you have the right to request information about your personal data. Contact us and we will provide you with it via email. The right to rectify \u2013 you have the right to request rectification of your data if you believe it is inaccurate or incomplete. The right to delete \u2013 you have the right to erase your personal data, under certain conditions. If the data is no longer needed for the purpose for which it was collected (for example a placed order that has not been completely shipped, an ongoing customer service matter, an unsettled debt with CINECAPSULE, misuse of our service, bookkeeping rules following your purchase, etc.). The right to data portability \u2013 you have the right to request that CINECAPSULE transfers the data that we have collected to another organization, or directly to you, under certain conditions. The right to restrict processing \u2013 you have the right to request that CINECAPSULE restrict the processing of your personal data, under certain conditions. The right to object to processing \u2013 you have the right to object to CINECAPSULE processing of your personal data, under certain conditions."}),Object(fe.jsx)("li",{children:"Cookies :"}),Object(fe.jsx)("p",{children:"Cookies are text files placed on your computer or mobile device to collect visitor behavior information. When you visit our website, we may collect information from you automatically through cookies or similar technologies to facilitate browsing, to make it more user-friendly and to save your preferences."}),Object(fe.jsx)("li",{children:"They do not damage your device :"}),Object(fe.jsx)("p",{children:"We assume that you agree to the use of cookies when you use our services. You can easily erase cookies from your computer or mobile device using your browser. Keep in mind that if you disable cookies, you will not be able to use all our features."}),Object(fe.jsx)("li",{children:"Google analytics :"}),Object(fe.jsx)("p",{children:"We use google analytics advertising features. If you want to read more about it or to opt out:"}),Object(fe.jsx)("a",{href:"https://tools.google.com/dlpage/gaoptout/",children:"https://tools.google.com/dlpage/gaoptout/"}),Object(fe.jsx)("br",{}),Object(fe.jsx)("p",{children:"Changes to our privacy policy** Our business is constantly evolving and so may need to update our privacy policies. You will always find the latest version of the privacy notice on our website."}),Object(fe.jsx)("li",{children:"How to contact us :"}),Object(fe.jsxs)("p",{children:["The Data Protection Officer may be contacted at the following address:"," "]}),Object(fe.jsxs)("a",{href:"mailto: hello@cinecapsule.com",children:["hello@cinecapsule.com"," "]})]})})]})})}function Mr(){return Object(fe.jsx)("div",{children:Object(fe.jsxs)("div",{className:"interest_submit-proposal_xyz",children:[Object(fe.jsx)("span",{className:"interest_submit-proposal__image__1JcQq","aria-label":"Unicorn emoji",role:"img",children:"\ud83d\udee0"}),Object(fe.jsx)("br",{}),Object(fe.jsx)("div",{className:"interest_submit-proposal__title__dZrRm",children:"Page under construction"}),Object(fe.jsx)("div",{className:"interest_submit-proposal-slogan",children:"Back soon for a new collection of trendy NFTS."})]})})}var Br=":proposalId";function Gr(){return Object(fe.jsx)(ie.c,{children:[Object(fe.jsx)(ie.a,{exact:!0,path:"/",render:function(){return Object(fe.jsx)(Xt,{})}},"splash"),O.h&&Object(fe.jsx)(ie.a,{exact:!0,path:"/join",render:function(){return Object(fe.jsx)(yn,{})}},"join"),Object(fe.jsx)(ie.a,{exact:!0,path:"/onboard",render:function(){return Object(fe.jsx)(Dt,{})}},"onboard"),Object(fe.jsx)(ie.a,{exact:!0,path:"/onboarding",render:function(){return Object(fe.jsx)(nr,{})}},"onboarding"),Object(fe.jsx)(ie.a,{exact:!0,path:"/onboarding/".concat(Br),render:function(){return Object(fe.jsx)(Or,{})}},"onboarding-details"),Object(fe.jsx)(ie.a,{exact:!0,path:"/transfer",render:function(){return Object(fe.jsx)(Yt,{})}},"transfer"),Object(fe.jsx)(ie.a,{exact:!0,path:"/transfers",render:function(){return Object(fe.jsx)(Cr,{})}},"transfers"),Object(fe.jsx)(ie.a,{exact:!0,path:"/transfers/".concat(Br),render:function(){return Object(fe.jsx)(yr,{})}},"transfer-details"),Object(fe.jsx)(ie.a,{exact:!0,path:"/tribute",render:function(){return Object(fe.jsx)(Wt,{})}},"tribute"),Object(fe.jsx)(ie.a,{exact:!0,path:"/tributes",render:function(){return Object(fe.jsx)(Pr,{})}},"tributes"),Object(fe.jsx)(ie.a,{exact:!0,path:"/tributes/".concat(Br),render:function(){return Object(fe.jsx)(Dr,{})}},"tribute-details"),Object(fe.jsx)(ie.a,{exact:!0,path:"/governance-proposal",render:function(){return Object(fe.jsx)(Et,{})}},"governance-proposal"),Object(fe.jsx)(ie.a,{exact:!0,path:"/governance",render:function(){return Object(fe.jsx)(jn,{})}},"governance-proposals"),Object(fe.jsx)(ie.a,{exact:!0,path:"/governance/".concat(Br),render:function(){return Object(fe.jsx)(rn,{})}},"governance-proposal-details"),Object(fe.jsx)(ie.a,{exact:!0,path:"/members",render:function(){return Object(fe.jsx)(Jn,{})}},"members"),Object(fe.jsx)(ie.a,{exact:!0,path:"/members/:ethereumAddress",render:function(){return Object(fe.jsx)(Hn,{})}},"member-profile"),Object(fe.jsx)(ie.a,{exact:!0,path:"/collection",render:function(){return Object(fe.jsx)(Mr,{})}},"collection"),Object(fe.jsx)(ie.a,{exact:!0,path:"/privacy",render:function(){return Object(fe.jsx)(Fr,{})}},"privacy"),Object(fe.jsx)(ie.a,{exact:!0,path:"/redeem",render:function(){return Object(fe.jsx)(Er,{})}},"redeem"),Object(fe.jsx)(ie.a,{component:tn},"no-match")]})}function Vr(e){var t=Object(ie.g)().pathname,n=(e||{}).renderMainContent,r=Object(fe.jsx)("main",{children:n?n():Object(fe.jsx)(Gr,{})});return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(_e,{}),"/"===t?Object(fe.jsx)(fe.Fragment,{children:r}):Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(st,{}),r,Object(fe.jsx)(Ee,{})]}),Object(fe.jsx)(Ce,{})]})}var Ur,Yr=n(3);function Hr(e){var t=e.render,n=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),r=Object(je.useState)(),a=Object(Ae.a)(r,2),s=a[0],o=a[1],i=Object(je.useState)(!1),u=Object(Ae.a)(i,2),d=u[0],l=u[1],b=Object(je.useState)(Object(Yr.a)({},Ur.initSnapshotAPI,ye.a.STANDBY)),j=Object(Ae.a)(b,2),p=j[0],h=j[1],m=Object(we.g)(),v=m.account,x=m.web3Instance,N=Object(we.e)().isDefaultChain,E=Object(cn.e)().isMountedRef,A=Object(we.d)(),w=Object(c.b)(),y=Object(je.useCallback)((function(){return _.apply(this,arguments)}),[A,N,x]),k=Object(je.useCallback)((function(){return I.apply(this,arguments)}),[v,n,w,N,x]),C=Object(je.useCallback)((function(){return S.apply(this,arguments)}),[E]);function S(){return(S=Object(Ge.a)(Ue.a.mark((function e(){var t;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O.v){e.next=3;break}throw new Error("No Snapshot Hub API URL was found.");case 3:return e.next=5,Object(it.getApiStatus)(O.v);case 5:if(t=e.sent,t.data.version){e.next=9;break}throw new Error("Snapshot API is not ready.");case 9:if(E.current){e.next=11;break}return e.abrupt("return");case 11:h((function(e){return Object(g.a)(Object(g.a)({},e),{},Object(Yr.a)({},Ur.initSnapshotAPI,ye.a.FULFILLED))})),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(0),E.current){e.next=18;break}return e.abrupt("return");case 18:o(new Error("Snapshot API is not responding."));case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function _(){return(_=Object(Ge.a)(Ue.a.mark((function e(){var t;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N&&x){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A({web3Instance:x});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t=e.t0,o(t);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function I(){return(I=Object(Ge.a)(Ue.a.mark((function e(){var t;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,v&&n&&N&&x){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w(Object(f.A)({account:v,daoRegistryContract:n,web3Instance:x}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t=e.t0,o(t);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(je.useEffect)((function(){l(Object.values(p).every((function(e){return e===ye.a.FULFILLED})))}),[p]),Object(je.useEffect)((function(){y()}),[y,x]),Object(je.useEffect)((function(){k()}),[k]),Object(je.useEffect)((function(){C()}),[C]),t({error:s,isInitComplete:d})}function Wr(e){var t=e.error;return Object(fe.jsxs)(Be.a,{children:[Object(fe.jsx)("div",{style:{padding:"2em 1em 1em",textAlign:"center"},children:Object(fe.jsxs)("h1",{style:{fontSize:"2rem"},children:[Object(fe.jsx)("span",{className:"pulse",role:"img","aria-label":"Emoji with eyes crossed out.",style:{display:"inline-block"},children:"\ud83d\ude35"})," ","Oops, something went wrong."]})}),Object(fe.jsx)("div",{style:{textAlign:"center",maxWidth:600,display:"block",margin:"0 auto"},children:Object(fe.jsx)(Ot.a,{error:t,renderText:""})})]})}!function(e){e.initSnapshotAPI="initSnapshotAPI"}(Ur||(Ur={}));var Kr=function(e){e&&e instanceof Function&&n.e(10).then(n.bind(null,1083)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},zr=n(237),qr=(n(1022),document.getElementById("root"));"production"===O.i&&Object(p.b)(),window.ethereum&&window.ethereum.autoRefreshOnNetworkChange&&(window.ethereum.autoRefreshOnNetworkChange=!1);var Jr=new i.a({uri:function(e){var t=e.operationName;return"".concat(O.o.CORE,"?").concat(t)}}),Qr=new i.a({uri:function(e){var t=e.operationName;return"".concat(O.o.COUPON_ONBOARDING,"?").concat(t)}}),Xr=new i.a({uri:function(e){var t=e.operationName;return"".concat(O.o.NFT_EXTENSION,"?").concat(t)}}),$r=Object(u.a)((function(e){return e.getContext().serviceName===O.n.COUPON_ONBOARDING}),Qr,Object(u.a)((function(e){return e.getContext().serviceName===O.n.NFT_EXTENSION}),Xr,Jr)),Zr=function(e){return new d.a({link:Object(l.a)(Object(h.d)(e),$r),cache:new b.a({typePolicies:{Adapter:{fields:{adapters:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(r.a)(e),Object(r.a)(t))}}}},Extension:{fields:{extensions:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(r.a)(e),Object(r.a)(t))}}}}}})})},ea=new j.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});null!==qr&&Object(a.render)(Object(fe.jsx)(c.a,{store:oe,children:Object(fe.jsx)(s.a,{children:Object(fe.jsx)(zr.b,{onBeforeDisconnect:function(){oe.dispatch(Object(f.w)()),oe.dispatch(Object(f.x)())},onBeforeConnect:function(){oe.dispatch(Object(f.x)())},providerOptions:O.z,children:Object(fe.jsx)(o.a,{client:Zr(oe),children:Object(fe.jsx)(j.QueryClientProvider,{client:ea,children:Object(fe.jsx)(Hr,{render:function(e){var t=e.error,n=e.isInitComplete;return t?Object(fe.jsx)(Vr,{renderMainContent:function(){return Object(fe.jsx)(Wr,{error:t})}}):n?Object(fe.jsx)(Vr,{}):null}})})})})})}),qr),Kr()},11:function(e,t,n){"use strict";function r(e,t){var n=void 0!==t?e.filter((function(e){return e!==t})):e;return n[Math.floor(Math.random()*n.length)]}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return g})),n.d(t,"l",(function(){return N})),n.d(t,"m",(function(){return E.a}));var a=n(4);function c(){var e=function(){},t=window.__REACT_DEVTOOLS_GLOBAL_HOOK__;if("object"===typeof t)for(var n=0,r=Object.entries(t);n<r.length;n++){var c=Object(a.a)(r[n],2),s=c[0],o=c[1];t[s]="function"===typeof o?e:null}}function s(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}var o=function(e){var t=Number(null!==e&&void 0!==e?e:void 0);return isNaN(t)?"":t.toLocaleString("en-US")};function i(e){var t=function(e){return(new Intl.NumberFormat).format(Math.round(10*e)/10)};return e>=1e12?t(e/1e12)+"T":e>=1e9?t(e/1e9)+"B":e>=1e6?t(e/1e6)+"M":e>=1e3?t(e/1e3)+"k":t(e)}var u=n(12);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.g;e!==u.b.GANACHE&&e!==u.b.HARMONY_MAIN&&e!==u.b.HARMONY_TEST&&e!==u.b.POLYGON&&e!==u.b.POLYGON_TEST&&e!==u.b.AVALANCHE_TEST&&u.b.AVALANCHE_MAIN}var l={days:0,hours:0,minutes:0,seconds:0,total:0};function b(e){var t=new Date;if(e<=t)return l;var n=e.getTime()-t.getTime(),r=Math.floor(n/1e3%60),a=Math.floor(n/1e3/60%60),c=Math.floor(n/36e5%24);return{days:Math.floor(n/864e5),hours:c,minutes:a,seconds:r,total:n}}function j(e,t){return t[e]&&"message"in t[e]?t[e].message:""}var O=n(5),f=n(2),p=n.n(f);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toLowerCase().trim()}function m(e,t){return v.apply(this,arguments)}function v(){return(v=Object(O.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getCode(h(t));case 3:return r=e.sent,a=!r||"0x"===r||"0x0"===r||"0x00"===r,e.abrupt("return",!1===a);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var x=n(33);function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e+1-t;return Object(x.a)(Array(n)).map((function(e,n){return t+n}))}n(164);var N=function(e){return e.toString().replace(/,/g,"")};var E=n(223);n(17)},117:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return f}));var r,a,c,s,o=n(134),i=n(1053),u=Object(i.a)(r||(r=Object(o.a)(["\n  query GetDao($id: ID) {\n    tributeDaos(where: {id: $id}) {\n      id # dao address\n      daoAddress\n      name\n      totalUnits\n      totalUnitsIssued\n    }\n  }\n"]))),d=(Object(i.a)(a||(a=Object(o.a)(["\n  query GetAdaptersAndExtensions($daoAddress: String) {\n    tributeDaos(where: {daoAddress: $daoAddress}) {\n      daoAddress\n      adapters {\n        id\n        acl\n        adapterId\n        adapterAddress\n      }\n      extensions {\n        id\n        extensionId\n        extensionAddress\n      }\n    }\n  }\n"]))),Object(i.a)(c||(c=Object(o.a)(["\n  query GetMembers($daoAddress: String) {\n    tributeDaos(where: {daoAddress: $daoAddress}) {\n      members(orderBy: createdAt, orderDirection: desc) {\n        createdAt\n        address: memberAddress\n        delegateKey\n        isDelegated\n        units\n        didFullyRagequit\n      }\n    }\n  }\n"])))),l=Object(i.a)(s||(s=Object(o.a)(["\n  query GetTokenHolderBalances($tokenAddress: String!) {\n    tokens(where: {tokenAddress: $tokenAddress}) {\n      symbol\n      tokenAddress\n      holders {\n        balance\n        member {\n          id\n          delegateKey\n        }\n      }\n    }\n  }\n"]))),b=n(494),j=n(25),O=n(94);function f(e){return Object(b.a)((function(t){var n=t.networkError;n&&(e.getState().subgraphNetworkStatus.status!==O.a.ERR&&(e.dispatch(Object(j.V)({status:O.a.ERR})),console.error("[Subgraph network error]: ".concat(n))));n||e.getState().subgraphNetworkStatus.status!==O.a.OK&&e.dispatch(Object(j.V)({status:O.a.OK}))}))}},12:function(e,t,n){"use strict";(function(e){n.d(t,"i",(function(){return Q})),n.d(t,"v",(function(){return X})),n.d(t,"d",(function(){return $})),n.d(t,"h",(function(){return Z})),n.d(t,"q",(function(){return ee})),n.d(t,"r",(function(){return te})),n.d(t,"o",(function(){return ne})),n.d(t,"n",(function(){return re})),n.d(t,"b",(function(){return ae})),n.d(t,"c",(function(){return ce})),n.d(t,"g",(function(){return se})),n.d(t,"l",(function(){return oe})),n.d(t,"k",(function(){return de})),n.d(t,"z",(function(){return le})),n.d(t,"f",(function(){return be})),n.d(t,"e",(function(){return je})),n.d(t,"a",(function(){return Oe})),n.d(t,"t",(function(){return fe})),n.d(t,"p",(function(){return pe})),n.d(t,"x",(function(){return he})),n.d(t,"y",(function(){return me})),n.d(t,"s",(function(){return ve})),n.d(t,"m",(function(){return xe})),n.d(t,"j",(function(){return ge})),n.d(t,"w",(function(){return Ne})),n.d(t,"u",(function(){return Ee}));var r,a,c,s,o,i,u,d,l,b,j,O,f,p,h,m,v,x,g,N,E,A,w,y=n(3),k=n(482),C=n(148),S=n(300),_=n(513),I=n(74);Object(k.config)({path:Object(S.resolve)(e,"../.env")});var T=Object({NODE_ENV:"production",PUBLIC_URL:"/my-tribute-dao",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ENVIRONMENT:"local",REACT_APP_ALCHEMY_API_KEY:"MtawOsuJOQ1ZY9nHPGYVTKlNKM4QvzVg",REACT_APP_DEFAULT_CHAIN_NAME_LOCAL:"POLYGON_TEST",REACT_APP_INFURA_PROJECT_ID_LOCAL:"MtawOsuJOQ1ZY9nHPGYVTKlNKM4QvzVg",REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS:"0x3b1121aB7A7043A2E6cdb8B39Ee4D2B8A1d838D3",REACT_APP_MULTICALL_CONTRACT_ADDRESS:"0xAcE6147B84ECd805dBA0068B1b02e1311b7405Bc",REACT_APP_SNAPSHOT_HUB_API_URL:"http://localhost:9090",REACT_APP_COUPON_API_URL:"http://localhost:8000/subgraphs/name/openlawteam/tribute",REACT_APP_SNAPSHOT_SPACE:"tribute",REACT_APP_GRAPH_CORE_URL:"..."}),D=T.REACT_APP_COUPON_API_URL,R=T.REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS,P=T.REACT_APP_DEFAULT_CHAIN_NAME_LOCAL,L=T.REACT_APP_ENABLE_KYC_ONBOARDING,F=T.REACT_APP_ENVIRONMENT,M=T.REACT_APP_GRAPH_CORE_URL,B=T.REACT_APP_GRAPH_COUPON_ONBOARDING_URL,G=T.REACT_APP_GRAPH_NFT_EXTENSION_URL,V=T.REACT_APP_INFURA_PROJECT_ID_DEV,U=T.REACT_APP_INFURA_PROJECT_ID_LOCAL,Y=T.REACT_APP_INFURA_PROJECT_ID_PROD,H=T.REACT_APP_KYC_BACKEND_URL,W=T.REACT_APP_KYC_FORMS_URL,K=T.REACT_APP_MULTICALL_CONTRACT_ADDRESS,z=T.REACT_APP_ONBOARDING_TOKEN_ADDRESS,q=T.REACT_APP_SNAPSHOT_HUB_API_URL,J=T.REACT_APP_SNAPSHOT_SPACE,Q=F,X="localhost"===Q?"/snapshot-hub":q,$=D,Z="true"===L,ee=H,te=W,ne={CORE:M,COUPON_ONBOARDING:B,NFT_EXTENSION:G},re={CORE:"core",COUPON_ONBOARDING:"coupon-onboarding",NFT_EXTENSION:"nft-extension"},ae={MAINNET:1,ROPSTEN:3,RINKEBY:4,GOERLI:5,KOVAN:42,GANACHE:1337,HARMONY_TEST:16667e5,HARMONY_MAIN:16666e5,POLYGON_TEST:80001,POLYGON:137,AVALANCHE_TEST:43113,AVALANCHE_MAIN:43114,FUSE_TEST:123,FUSE:122},ce=(r={},Object(y.a)(r,ae.MAINNET,"mainnet"),Object(y.a)(r,ae.ROPSTEN,"ropsten"),Object(y.a)(r,ae.RINKEBY,"rinkeby"),Object(y.a)(r,ae.GOERLI,"goerli"),Object(y.a)(r,ae.KOVAN,"kovan"),Object(y.a)(r,ae.GANACHE,"ganache"),Object(y.a)(r,ae.HARMONY_TEST,"harmony-testnet"),Object(y.a)(r,ae.HARMONY_MAIN,"harmony-mainnet"),Object(y.a)(r,ae.POLYGON,"polygon-mainnet"),Object(y.a)(r,ae.POLYGON_TEST,"polygon-testnet"),Object(y.a)(r,ae.AVALANCHE_TEST,"avalanche-fuji"),Object(y.a)(r,ae.AVALANCHE_MAIN,"avalanche-mainnet"),Object(y.a)(r,ae.FUSE_TEST,"fuse-testnet"),Object(y.a)(r,ae.FUSE,"fuse-mainnet"),a={},Object(y.a)(a,ae.MAINNET,"Main Ethereum Network"),Object(y.a)(a,ae.ROPSTEN,"Ropsten Test Network"),Object(y.a)(a,ae.RINKEBY,"Rinkeby Test Network"),Object(y.a)(a,ae.GOERLI,"G\xf6rli Test Network"),Object(y.a)(a,ae.KOVAN,"Kovan Test Network"),Object(y.a)(a,ae.GANACHE,"Ganache Test Network"),Object(y.a)(a,ae.HARMONY_TEST,"Harmony Test Network"),Object(y.a)(a,ae.HARMONY_MAIN,"Harmony Main Network"),Object(y.a)(a,ae.POLYGON_TEST,"Polygon Test Network"),Object(y.a)(a,ae.POLYGON,"Polygon Main Network"),Object(y.a)(a,ae.AVALANCHE_TEST,"Avalanche Fuji Test Network"),Object(y.a)(a,ae.AVALANCHE_MAIN,"Avalanche Main Network"),Object(y.a)(a,ae.FUSE_TEST,"Fuse Test Network"),Object(y.a)(a,ae.FUSE,"Fuse Main Network"),a),se="production"===F?ae.MAINNET:"development"===F?ae.RINKEBY:P?ae[P]:ae.GANACHE,oe=(c={},Object(y.a)(c,ae.MAINNET,"https://etherscan.io"),Object(y.a)(c,ae.ROPSTEN,"https://ropsten.etherscan.io"),Object(y.a)(c,ae.RINKEBY,"https://rinkeby.etherscan.io"),Object(y.a)(c,ae.GOERLI,"https://goerli.etherscan.io"),Object(y.a)(c,ae.KOVAN,"https://kovan.etherscan.io"),Object(y.a)(c,ae.HARMONY_TEST,"https://explorer.pops.one"),Object(y.a)(c,ae.HARMONY_MAIN,"https://explorer.harmony.one"),Object(y.a)(c,ae.POLYGON_TEST,"https://mumbai.polygonscan.com"),Object(y.a)(c,ae.POLYGON,"https://polygonscan.com"),Object(y.a)(c,ae.AVALANCHE_TEST,"https://testnet.snowtrace.io"),Object(y.a)(c,ae.AVALANCHE_MAIN,"https://snowtrace.io"),Object(y.a)(c,ae.FUSE_TEST,"https://explorer.fusespark.io/"),Object(y.a)(c,ae.FUSE,"https://explorer.fusespark.io/"),c),ie=(s={},Object(y.a)(s,ae.MAINNET,"wss://mainnet.infura.io/ws/v3"),Object(y.a)(s,ae.ROPSTEN,"wss://ropsten.infura.io/ws/v3"),Object(y.a)(s,ae.RINKEBY,"wss://rinkeby.infura.io/ws/v3"),Object(y.a)(s,ae.GOERLI,"wss://goerli.infura.io/ws/v3"),Object(y.a)(s,ae.KOVAN,"wss://kovan.infura.io/ws/v3"),Object(y.a)(s,ae.HARMONY_TEST,"wss://ws.s0.pops.one"),Object(y.a)(s,ae.HARMONY_MAIN,"wss://ws.s0.t.hmny.io"),Object(y.a)(s,ae.POLYGON_TEST,"wss://polygon-mumbai.g.alchemy.com/v2"),Object(y.a)(s,ae.POLYGON,"wss://ws-matic-mainnet.chainstacklabs.com"),Object(y.a)(s,ae.AVALANCHE_TEST,"wss://api.avax-test.network:9650/ext/bc/C/ws"),Object(y.a)(s,ae.AVALANCHE_MAIN,"wss://api.avax.network:9650/ext/bc/C/ws"),Object(y.a)(s,ae.FUSE_TEST,"https://rpc.fuse.io"),Object(y.a)(s,ae.FUSE,"https://rpc.fuse.io"),s),ue="production"===F?Y:"development"===F?V:U,de=ie[se]?ue?"".concat(ie[se],"/").concat(ue):ie[se]:se===ae.GANACHE?"ws://127.0.0.1:7545":"",le={injected:{display:{name:"MetaMask",description:"Connect with the provider in your Browser"},package:null},walletconnect:{display:{name:"WalletConnect",description:"Connect with your mobile wallet"},package:_.a,options:{infuraId:ue,qrcodeModalOptions:{mobileLinks:Object(C.isMobile)()?["rainbow","metamask","argent","trust"]:[]}}}},be=R,je=(o={},Object(y.a)(o,ae.MAINNET,""),Object(y.a)(o,ae.ROPSTEN,""),Object(y.a)(o,ae.RINKEBY,"0x76F5D63243AE3b176128Ab8C0451Ff347391f56e"),Object(y.a)(o,ae.GOERLI,""),Object(y.a)(o,ae.KOVAN,""),Object(y.a)(o,ae.GANACHE,"0x6d92a8E4aB80adcBbFDA44ef69fe847f82def641"),Object(y.a)(o,ae.HARMONY_TEST,""),Object(y.a)(o,ae.HARMONY_MAIN,""),Object(y.a)(o,ae.POLYGON_TEST,"0x083e3b23E4168c6864f9e6A3AdbA838950dCA576"),Object(y.a)(o,ae.POLYGON,""),Object(y.a)(o,ae.AVALANCHE_TEST,""),Object(y.a)(o,ae.AVALANCHE_MAIN,""),Object(y.a)(o,ae.FUSE_TEST,""),Object(y.a)(o,ae.FUSE,""),o),Oe=(i={},Object(y.a)(i,ae.MAINNET,""),Object(y.a)(i,ae.ROPSTEN,""),Object(y.a)(i,ae.RINKEBY,"0x80feBc0872aB9CEC472663C0fE33fA1e19C0D3BF"),Object(y.a)(i,ae.GOERLI,""),Object(y.a)(i,ae.KOVAN,""),Object(y.a)(i,ae.GANACHE,"0xcD1639FD072113CC86e15f65f1505C6D58Aa7412"),Object(y.a)(i,ae.HARMONY_TEST,""),Object(y.a)(i,ae.HARMONY_MAIN,""),Object(y.a)(i,ae.POLYGON_TEST,""),Object(y.a)(i,ae.POLYGON,""),Object(y.a)(i,ae.AVALANCHE_TEST,""),Object(y.a)(i,ae.AVALANCHE_MAIN,""),Object(y.a)(i,ae.FUSE_TEST,""),Object(y.a)(i,ae.FUSE,""),i),fe=(u={},Object(y.a)(u,ae.MAINNET,""),Object(y.a)(u,ae.ROPSTEN,""),Object(y.a)(u,ae.RINKEBY,"0xd0A4b78719e44fF94FB57702699c1655Ef6ca5DF"),Object(y.a)(u,ae.GOERLI,""),Object(y.a)(u,ae.KOVAN,""),Object(y.a)(u,ae.GANACHE,"0xcF34FFFBba648719DAe106202674949f1679772B"),Object(y.a)(u,ae.HARMONY_TEST,""),Object(y.a)(u,ae.HARMONY_MAIN,""),Object(y.a)(u,ae.POLYGON_TEST,""),Object(y.a)(u,ae.POLYGON,""),Object(y.a)(u,ae.AVALANCHE_TEST,""),Object(y.a)(u,ae.AVALANCHE_MAIN,""),Object(y.a)(u,ae.FUSE_TEST,""),Object(y.a)(u,ae.FUSE,""),d={},Object(y.a)(d,ae.MAINNET,""),Object(y.a)(d,ae.ROPSTEN,""),Object(y.a)(d,ae.RINKEBY,"0x8a3FF22C8E4589d73BA48a6Ee01f6Fa21C5F1a46"),Object(y.a)(d,ae.GOERLI,""),Object(y.a)(d,ae.KOVAN,""),Object(y.a)(d,ae.GANACHE,"0x862d71d6E9Be8a7495EfEBa6f2b657b00E629c95"),Object(y.a)(d,ae.HARMONY_TEST,""),Object(y.a)(d,ae.HARMONY_MAIN,""),Object(y.a)(d,ae.POLYGON_TEST,""),Object(y.a)(d,ae.POLYGON,""),Object(y.a)(d,ae.AVALANCHE_TEST,""),Object(y.a)(d,ae.AVALANCHE_MAIN,""),Object(y.a)(d,ae.FUSE_TEST,""),Object(y.a)(d,ae.FUSE,""),l={},Object(y.a)(l,ae.MAINNET,""),Object(y.a)(l,ae.ROPSTEN,""),Object(y.a)(l,ae.RINKEBY,"0xc079A93B9852eAa146de2Ea1057c5174ACdaDbCa"),Object(y.a)(l,ae.GOERLI,""),Object(y.a)(l,ae.KOVAN,""),Object(y.a)(l,ae.GANACHE,"0xfB4E7C2FD8Ceb2757D2C4cE4749ebE326fc369D4"),Object(y.a)(l,ae.HARMONY_TEST,""),Object(y.a)(l,ae.HARMONY_MAIN,""),Object(y.a)(l,ae.POLYGON_TEST,""),Object(y.a)(l,ae.POLYGON,""),Object(y.a)(l,ae.AVALANCHE_TEST,""),Object(y.a)(l,ae.AVALANCHE_MAIN,""),Object(y.a)(l,ae.FUSE_TEST,""),Object(y.a)(l,ae.FUSE,""),b={},Object(y.a)(b,ae.MAINNET,""),Object(y.a)(b,ae.ROPSTEN,""),Object(y.a)(b,ae.RINKEBY,"0x63B788B55cA25ECAf202066651d0287a59Bd8472"),Object(y.a)(b,ae.GOERLI,""),Object(y.a)(b,ae.KOVAN,""),Object(y.a)(b,ae.GANACHE,"0x65CaCA9F2638Fb2B245E9694f00343F0b6CB6F77"),Object(y.a)(b,ae.HARMONY_TEST,""),Object(y.a)(b,ae.HARMONY_MAIN,""),Object(y.a)(b,ae.POLYGON_TEST,""),Object(y.a)(b,ae.POLYGON,""),Object(y.a)(b,ae.AVALANCHE_TEST,""),Object(y.a)(b,ae.AVALANCHE_MAIN,""),Object(y.a)(b,ae.FUSE_TEST,""),Object(y.a)(b,ae.FUSE,""),j={},Object(y.a)(j,ae.MAINNET,""),Object(y.a)(j,ae.ROPSTEN,""),Object(y.a)(j,ae.RINKEBY,"0x7eEfF2b586793f8399d59b15585d32b6364B4CeE"),Object(y.a)(j,ae.GOERLI,""),Object(y.a)(j,ae.KOVAN,""),Object(y.a)(j,ae.GANACHE,"0x314C824Ea4586798DF8B46121E881Defa40CB47E"),Object(y.a)(j,ae.HARMONY_TEST,""),Object(y.a)(j,ae.HARMONY_MAIN,""),Object(y.a)(j,ae.POLYGON_TEST,""),Object(y.a)(j,ae.POLYGON,""),Object(y.a)(j,ae.AVALANCHE_TEST,""),Object(y.a)(j,ae.AVALANCHE_MAIN,""),Object(y.a)(j,ae.FUSE_TEST,""),Object(y.a)(j,ae.FUSE,""),O={},Object(y.a)(O,ae.MAINNET,""),Object(y.a)(O,ae.ROPSTEN,""),Object(y.a)(O,ae.RINKEBY,"0xD84AB37f3c7b381e36BCa500fBCfB0699f21696B"),Object(y.a)(O,ae.GOERLI,""),Object(y.a)(O,ae.KOVAN,""),Object(y.a)(O,ae.GANACHE,"0xeD025b5BA14b8f3A085057b9D7Baa13998343aA8"),Object(y.a)(O,ae.HARMONY_TEST,""),Object(y.a)(O,ae.HARMONY_MAIN,""),Object(y.a)(O,ae.POLYGON_TEST,""),Object(y.a)(O,ae.POLYGON,""),Object(y.a)(O,ae.AVALANCHE_TEST,""),Object(y.a)(O,ae.AVALANCHE_MAIN,""),Object(y.a)(O,ae.FUSE_TEST,""),Object(y.a)(O,ae.FUSE,""),f={},Object(y.a)(f,ae.MAINNET,""),Object(y.a)(f,ae.ROPSTEN,""),Object(y.a)(f,ae.RINKEBY,"0xc95e94250ABB136B4DbdC5726A68747DB65CbcED"),Object(y.a)(f,ae.GOERLI,""),Object(y.a)(f,ae.KOVAN,""),Object(y.a)(f,ae.GANACHE,"0x4a7A5946567672c577EaF2b866BCeBc177E455E8"),Object(y.a)(f,ae.HARMONY_TEST,""),Object(y.a)(f,ae.HARMONY_MAIN,""),Object(y.a)(f,ae.POLYGON_TEST,""),Object(y.a)(f,ae.POLYGON,""),Object(y.a)(f,ae.AVALANCHE_TEST,""),Object(y.a)(f,ae.AVALANCHE_MAIN,""),Object(y.a)(f,ae.FUSE_TEST,""),Object(y.a)(f,ae.FUSE,""),p={},Object(y.a)(p,ae.MAINNET,""),Object(y.a)(p,ae.ROPSTEN,""),Object(y.a)(p,ae.RINKEBY,"0x581234019E087B6F1d038157e9Ad05E7858C079e"),Object(y.a)(p,ae.GOERLI,""),Object(y.a)(p,ae.KOVAN,""),Object(y.a)(p,ae.GANACHE,"0x4e1Ccf6Bca8d14B670478d8C4e2aEc9f6277A7f5"),Object(y.a)(p,ae.HARMONY_TEST,""),Object(y.a)(p,ae.HARMONY_MAIN,""),Object(y.a)(p,ae.POLYGON_TEST,""),Object(y.a)(p,ae.POLYGON,""),Object(y.a)(p,ae.AVALANCHE_TEST,""),Object(y.a)(p,ae.AVALANCHE_MAIN,""),Object(y.a)(p,ae.FUSE_TEST,""),Object(y.a)(p,ae.FUSE,""),h={},Object(y.a)(h,ae.MAINNET,""),Object(y.a)(h,ae.ROPSTEN,""),Object(y.a)(h,ae.RINKEBY,"0xBa4FDDeEBd4Dd23fC503a591E41E8D386c1c16c3"),Object(y.a)(h,ae.GOERLI,""),Object(y.a)(h,ae.KOVAN,""),Object(y.a)(h,ae.GANACHE,"0x72a011Aa67F8214a146A162A99B322017ad763fD"),Object(y.a)(h,ae.HARMONY_TEST,""),Object(y.a)(h,ae.HARMONY_MAIN,""),Object(y.a)(h,ae.POLYGON_TEST,""),Object(y.a)(h,ae.POLYGON,""),Object(y.a)(h,ae.AVALANCHE_TEST,""),Object(y.a)(h,ae.AVALANCHE_MAIN,""),Object(y.a)(h,ae.FUSE_TEST,""),Object(y.a)(h,ae.FUSE,""),m={},Object(y.a)(m,ae.MAINNET,""),Object(y.a)(m,ae.ROPSTEN,""),Object(y.a)(m,ae.RINKEBY,"0x864E2A55d776749A7612D091c4553dA667543F01"),Object(y.a)(m,ae.GOERLI,""),Object(y.a)(m,ae.KOVAN,""),Object(y.a)(m,ae.GANACHE,"0x4d4243f2d605282CBd27C8391f05b77316d1a561"),Object(y.a)(m,ae.HARMONY_TEST,""),Object(y.a)(m,ae.HARMONY_MAIN,""),Object(y.a)(m,ae.POLYGON_TEST,""),Object(y.a)(m,ae.POLYGON,""),Object(y.a)(m,ae.AVALANCHE_TEST,""),Object(y.a)(m,ae.AVALANCHE_MAIN,""),Object(y.a)(m,ae.FUSE_TEST,""),v={},Object(y.a)(v,ae.MAINNET,""),Object(y.a)(v,ae.ROPSTEN,""),Object(y.a)(v,ae.RINKEBY,"0x23ec156efF19ddB55fcBAd0A49488Dd1FB26a041"),Object(y.a)(v,ae.GOERLI,""),Object(y.a)(v,ae.KOVAN,""),Object(y.a)(v,ae.GANACHE,"0xA8EA078cF1D3837a025329c46A4E0F441Cb2eE87"),Object(y.a)(v,ae.HARMONY_TEST,""),Object(y.a)(v,ae.HARMONY_MAIN,""),Object(y.a)(v,ae.POLYGON_TEST,""),Object(y.a)(v,ae.POLYGON,""),Object(y.a)(v,ae.AVALANCHE_TEST,""),Object(y.a)(v,ae.AVALANCHE_MAIN,""),Object(y.a)(v,ae.FUSE_TEST,""),Object(y.a)(v,ae.FUSE,""),x={},Object(y.a)(x,ae.MAINNET,""),Object(y.a)(x,ae.ROPSTEN,""),Object(y.a)(x,ae.RINKEBY,"0x374a5DEA375320513B630B7cA2946F740A33B90d"),Object(y.a)(x,ae.GOERLI,""),Object(y.a)(x,ae.KOVAN,""),Object(y.a)(x,ae.GANACHE,"0x9A2E533FBa58Ec8b0dA34438154C48E295C80576"),Object(y.a)(x,ae.HARMONY_TEST,""),Object(y.a)(x,ae.HARMONY_MAIN,""),Object(y.a)(x,ae.POLYGON_TEST,""),Object(y.a)(x,ae.POLYGON,""),Object(y.a)(x,ae.AVALANCHE_TEST,""),Object(y.a)(x,ae.AVALANCHE_MAIN,""),Object(y.a)(x,ae.FUSE_TEST,""),Object(y.a)(x,ae.FUSE,""),g={},Object(y.a)(g,ae.MAINNET,""),Object(y.a)(g,ae.ROPSTEN,""),Object(y.a)(g,ae.RINKEBY,"0x59914E5BBEe0E55119cD2DC2a4e08E18435271A2"),Object(y.a)(g,ae.GOERLI,""),Object(y.a)(g,ae.KOVAN,""),Object(y.a)(g,ae.GANACHE,"0xa7D723BFc4deC341da03E70Af4026B3926b1E8Db"),Object(y.a)(g,ae.HARMONY_TEST,""),Object(y.a)(g,ae.HARMONY_MAIN,""),Object(y.a)(g,ae.POLYGON_TEST,""),Object(y.a)(g,ae.POLYGON,""),Object(y.a)(g,ae.AVALANCHE_TEST,""),Object(y.a)(g,ae.AVALANCHE_MAIN,""),Object(y.a)(g,ae.FUSE_TEST,""),Object(y.a)(g,ae.FUSE,""),N={},Object(y.a)(N,ae.MAINNET,""),Object(y.a)(N,ae.ROPSTEN,""),Object(y.a)(N,ae.RINKEBY,"0xc71538123fC6FED3607ccBc6D52Cc7882f66f5d0"),Object(y.a)(N,ae.GOERLI,""),Object(y.a)(N,ae.KOVAN,""),Object(y.a)(N,ae.GANACHE,"0x6749b9151B654A77ddA3Fa8f2b259E0E592065F6"),Object(y.a)(N,ae.HARMONY_TEST,""),Object(y.a)(N,ae.HARMONY_MAIN,""),Object(y.a)(N,ae.POLYGON_TEST,""),Object(y.a)(N,ae.POLYGON,""),Object(y.a)(N,ae.AVALANCHE_TEST,""),Object(y.a)(N,ae.AVALANCHE_MAIN,""),Object(y.a)(N,ae.FUSE_TEST,""),Object(y.a)(N,ae.FUSE,""),E={},Object(y.a)(E,ae.MAINNET,""),Object(y.a)(E,ae.ROPSTEN,""),Object(y.a)(E,ae.RINKEBY,"0x4939D7Ff53AcDbDC1BbC18bDd2F5E5aaD0087Bc9"),Object(y.a)(E,ae.GOERLI,""),Object(y.a)(E,ae.KOVAN,""),Object(y.a)(E,ae.GANACHE,"0x4Df3729e7B952EBE6d18b52132D2A8af2F2D167A"),Object(y.a)(E,ae.HARMONY_TEST,""),Object(y.a)(E,ae.HARMONY_MAIN,""),Object(y.a)(E,ae.POLYGON_TEST,""),Object(y.a)(E,ae.POLYGON,""),Object(y.a)(E,ae.AVALANCHE_TEST,""),Object(y.a)(E,ae.AVALANCHE_MAIN,""),Object(y.a)(E,ae.FUSE_TEST,""),Object(y.a)(E,ae.FUSE,""),A={},Object(y.a)(A,ae.MAINNET,""),Object(y.a)(A,ae.ROPSTEN,""),Object(y.a)(A,ae.RINKEBY,"0x914eFbA7885f151AAe0665629F33Aff1Aa4Fe65d"),Object(y.a)(A,ae.GOERLI,""),Object(y.a)(A,ae.KOVAN,""),Object(y.a)(A,ae.GANACHE,"0xae02a075290D2efD74F0D3fE2DfE64831320855a"),Object(y.a)(A,ae.HARMONY_TEST,""),Object(y.a)(A,ae.HARMONY_MAIN,""),Object(y.a)(A,ae.POLYGON_TEST,""),Object(y.a)(A,ae.POLYGON,""),Object(y.a)(A,ae.AVALANCHE_TEST,""),Object(y.a)(A,ae.AVALANCHE_MAIN,""),Object(y.a)(A,ae.FUSE_TEST,""),Object(y.a)(A,ae.FUSE,""),w={},Object(y.a)(w,ae.MAINNET,""),Object(y.a)(w,ae.ROPSTEN,""),Object(y.a)(w,ae.RINKEBY,"0x596ADA187E2374352187479fB12e592Ae3E2f85e"),Object(y.a)(w,ae.GOERLI,""),Object(y.a)(w,ae.KOVAN,""),Object(y.a)(w,ae.GANACHE,""),Object(y.a)(w,ae.HARMONY_TEST,""),Object(y.a)(w,ae.HARMONY_MAIN,""),Object(y.a)(w,ae.POLYGON_TEST,""),Object(y.a)(w,ae.POLYGON,""),Object(y.a)(w,ae.AVALANCHE_TEST,""),Object(y.a)(w,ae.AVALANCHE_MAIN,""),Object(y.a)(w,ae.FUSE_TEST,""),Object(y.a)(w,ae.FUSE,""),K),pe="0x000000000000000000000000000000000000dead",he="0x000000000000000000000000000000000000babe",me="0x00000000000000000000000000000000000FF1CE",ve="0x00000000000000000000000000000000DECAFBAD",xe="0x0000000000000000000000000000000000000000",ge="0x0000000000000000000000000000000000004bec",Ne=J,Ee=z&&Object(I.a)(z)?z:xe}).call(this,"/")},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return Y})),n.d(t,"d",(function(){return K})),n.d(t,"e",(function(){return z}));var r=n(6),a=n(5),c=n(4),s=n(2),o=n.n(s),i=n(23),u=n(14),d=n(1),l=n(12),b=n(28),j=n(46),O=n(9),f=n(57),p=n(11),h=n(62),m=n(36),v=n(16),x=n(73),g=n(35),N=n(51),E=n(26),A=n(53),w=n(0);function y(e){var t,n=e.adapterName,s=e.proposal,y=s.daoProposalVotingAdapter,k=s.snapshotProposal,C=Object(d.useState)(O.f.STANDBY),S=Object(c.a)(C,2),_=S[0],I=S[1],T=Object(d.useState)(),D=Object(c.a)(T,2),R=D[0],P=D[1],L=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.contractAddress})),F=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.instance.methods})),M=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.abi.find((function(e){return"getPriorAmount"===e.name}))})),B=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),G=null===(t=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})))||void 0===t?void 0:t.find((function(e){return"getMemberAddress"===e.name})),V=Object(u.c)((function(e){return e.contracts})),U=Object(v.g)(),Y=U.account,H=U.provider,W=U.web3Instance,K=Object(v.a)(),z=K.txEtherscanURL,q=K.txIsPromptOpen,J=K.txSend,Q=K.txStatus,X=Object(v.c)().average,$=Object(m.f)(),Z=$.isDisabled,ee=$.openWhyDisabledModal,te=$.WhyDisabledModal,ne=null===y||void 0===y?void 0:y.getWeb3VotingAdapterContract().methods,re=_===O.f.AWAITING_CONFIRM||_===O.f.PENDING||Q===O.f.AWAITING_CONFIRM||Q===O.f.PENDING,ae=Q===O.f.FULFILLED&&_===O.f.FULFILLED,ce=re||ae||q;function se(){return(se=Object(a.a)(o.a.mark((function e(){var t,a,c,s,u,d,m,v,x,g,N,E,A,w,y,C,S,_,T,D,R,U,K,z;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,B){e.next=3;break}throw new Error("No DAO Registry address was found.");case 3:if(L){e.next=5;break}throw new Error("No Bank Extension address was found.");case 5:if(G){e.next=7;break}throw new Error("No ABI for `getMemberAddress` was found.");case 7:if(M){e.next=9;break}throw new Error("No ABI for `getPriorAmount` was found.");case 9:if(k){e.next=11;break}throw new Error("No Snapshot proposal was found.");case 11:if(k.votes){e.next=13;break}throw new Error("No Snapshot proposal votes Array was found.");case 13:if(ne){e.next=15;break}throw new Error('No "OffchainVotingContract" methods were found.');case 15:if(W){e.next=17;break}throw new Error("No Web3 instance was found.");case 17:if(F){e.next=19;break}throw new Error("No BankExtension methods were found.");case 19:if(Y){e.next=21;break}throw new Error("No account found.");case 21:return I(O.f.AWAITING_CONFIRM),a=k.idInDAO,c=k.msg.payload.snapshot.toString(),s=Object(b.d)(n,V),e.next=27,F.getPriorAmount(l.x,l.s,c).call();case 27:return u=e.sent,d=Object(p.k)(Number(u)-1,0).map((function(e){return[B,G,[e.toString()]]})),e.next=31,Object(b.l)({calls:d,web3Instance:W});case 31:return m=e.sent,v=m.map((function(e){return[L,M,[e,l.y,c]]})),e.next=35,Object(b.l)({calls:v,web3Instance:W});case 35:return x=e.sent,g=m.map((function(e,t){var n,r=Object.values((null===(n=k.votes)||void 0===n?void 0:n.find((function(t){return Object(p.j)(e)===Object(p.j)(Object.values(t)[0].msg.payload.metadata.memberAddress)})))||{})[0];return Object(i.createVote)({proposalId:a,sig:(null===r||void 0===r?void 0:r.sig)||"0x",timestamp:r?Number(r.msg.timestamp):0,voteYes:(null===r||void 0===r?void 0:r.msg.payload.choice)===i.VoteChoicesIndex.Yes,weight:r?x[t]:"0"})})),e.next=39,Object(i.prepareVoteResult)({actionId:s,chainId:l.g,daoAddress:B,votes:g});case 39:return N=e.sent,E=N.voteResultTree,A=N.result,w=E.getHexRoot(),y=A[A.length-1],e.next=46,ne.getBadNodeError(B,a,!0,w,c,0,u,y).call();case 46:if(C=e.sent,Number(C)===j.a.OK){e.next=49;break}throw new Error("Cannot submit off-chain voting result. Node has an error: ".concat(j.a[C],"."));case 49:return S=Object(i.getVoteResultRootDomainDefinition)(B,s,l.g),_=S.domain,T=S.types,D=JSON.stringify({domain:_,message:{root:w},primaryType:h.a,types:T}),e.next=53,Object(i.signMessage)(H,Y,D);case 53:return R=e.sent,e.next=56,Object(f.b)(w);case 56:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=60;break}e.t1=void 0===t;case 60:if(!e.t1){e.next=64;break}e.t3=void 0,e.next=65;break;case 64:e.t3=t.merkle_root.length;case 65:if(e.t0=e.t3,e.t0){e.next=68;break}e.t0="";case 68:if(e.t4=e.t0,e.t4>0){e.next=73;break}return e.next=73,Object(f.g)({actionId:s,chainId:l.g,steps:A,merkleRoot:w,verifyingContract:B});case 73:return I(O.f.FULFILLED),U=[B,a,w,Y,y,R],K=Object(r.a)({from:Y||""},X?{gasPrice:X}:null),e.next=78,J("submitVoteResult",ne,U,K);case 78:e.next=85;break;case 80:e.prev=80,e.t5=e.catch(0),z=e.t5,P(z),I(O.f.REJECTED);case 85:case"end":return e.stop()}}),e,null,[[0,80]])})))).apply(this,arguments)}return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{className:"proposaldetails__button",disabled:Z||ce,onClick:Z||ce?function(){}:function(){return se.apply(this,arguments)},children:re?Object(w.jsx)(A.a,{}):ae?"Done":"Submit Vote Result"}),Object(w.jsx)(g.a,{error:R,renderText:"Something went wrong"}),ce&&Object(w.jsx)("div",{className:"form__submit-status-container",children:function(){if(Q===O.f.AWAITING_CONFIRM||_===O.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(Q){case O.f.PENDING:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(x.a,{intervalMs:2e3,messages:h.b,useFirstItemStart:!0,render:function(e){return Object(w.jsx)(E.a,{children:e},e)}}),Object(w.jsx)(N.a,{url:z,isPending:!0})]});case O.f.FULFILLED:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:"Result submitted!"}),Object(w.jsx)(N.a,{url:z})]});default:return null}}()}),Z&&Object(w.jsx)("button",{className:"button--help-centered",onClick:ee,children:"Why is submitting disabled?"})]}),Object(w.jsx)(te,{title:"Why is this disabled?"})]})}var k=n(3),C=n(10),S=n(44),_=C.a.FULFILLED,I=C.a.PENDING,T=C.a.REJECTED;function D(e){var t=e.adapterName,n=e.proposal,s=n.snapshotProposal,l=n.refetchProposalOrDraft,b=Object(d.useState)(),j=Object(c.a)(b,2),p=j[0],h=j[1],x=Object(d.useState)(),N=Object(c.a)(x,2),E=N[0],A=N[1],y=Object(d.useRef)({alreadyVotedMessage:"",fetchingMembershipAtSnapshotMessage:"",noMembershipAtSnapshotMessage:"",undeterminedMembershipAtSnapshotMessage:""}),C=Object(u.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.memberAddress})),D=Object(v.g)().account,R=Object(S.h)(),P=R.signAndSendVote,L=R.voteDataStatus,F=Object(f.c)(null===s||void 0===s?void 0:s.votes,D||""),M=Object(m.f)(),B=M.isDisabled,G=M.openWhyDisabledModal,V=M.setOtherDisabledReasons,U=M.WhyDisabledModal,Y=Object(m.g)(C,null===s||void 0===s?void 0:s.msg.payload.snapshot),H=Y.hasMembershipAtSnapshot,W=Y.memberUnitsAtSnapshotError,K=Y.memberUnitsAtSnapshotStatus,q=null===s||void 0===s?void 0:s.msg.payload.snapshot,J=(null===s||void 0===s?void 0:s.idInDAO)||"",Q=(null===s||void 0===s?void 0:s.idInSnapshot)||"",X=L===O.f.AWAITING_CONFIRM||L===O.f.PENDING,$=L===O.f.FULFILLED,Z=B||(X||$),ee=X?p:void 0,te=E||W;function ne(){return(ne=Object(a.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,J){e.next=3;break}throw new Error("No proposal hash was found.");case 3:if(Q){e.next=5;break}throw new Error("No proposal ID was found.");case 5:return h(i.VoteChoices[n]),e.next=8,P(Object(r.a)(Object(r.a)({},t?{adapterName:t}:void 0),{},{partialVoteData:{choice:n},proposalIdInDAO:J,proposalIdInSnapshot:Q}));case 8:l(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),a=e.t0,A(a);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function re(e,t){y.current=Object(r.a)(Object(r.a)({},y.current),{},Object(k.a)({},e,t))}return Object(d.useEffect)((function(){re("alreadyVotedMessage",F?"You have already voted.":""),re("noMembershipAtSnapshotMessage",H||K!==_?"":"You were not a member when the proposal was sponsored at snapshot ".concat(q,".")),re("fetchingMembershipAtSnapshotMessage",K===I?"We are waiting on your membership status for when this proposal was sponsored at snapshot ".concat(q,"."):""),re("undeterminedMembershipAtSnapshotMessage",K===T?"Something went wrong. Your membership status when this proposal was sponsored at snapshot ".concat(q," cannot be determined."):""),V(Object.values(y.current))}),[H,K,V,q,F]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(z,{onClick:Z?function(){}:function(e){return ne.apply(this,arguments)},buttonProps:{disabled:Z,"aria-disabled":Z},voteChosen:F,voteProgress:ee}),B&&Object(w.jsx)("button",{className:"button--help-centered",onClick:G,children:"Why is voting disabled?"}),Object(w.jsx)(g.a,{error:te,renderText:"Something went wrong"}),Object(w.jsx)(U,{title:"Why is voting disabled?"})]})}var R=n(50);function P(e){var t=e.countdownFrom,n=e.renderCountdownText,r=e.showDaysOnly,a=Object(p.g)(t),c=a.days,s=a.hours,o=a.minutes,i=a.seconds,u=null===n||void 0===n?void 0:n({days:c,formatTimePeriod:L,hours:s,minutes:o,seconds:i,showDaysOnly:r}),d=L;return u||(c>2&&r?"~".concat(c," days"):c>0?"".concat(d(c,"day")," : ").concat(d(s,"hr")," : ").concat(d(o,"min")):s>0?"".concat(d(s,"hr")," : ").concat(d(o,"min")):o>0?"".concat(d(o,"min")," : ").concat(d(i,"sec")):Object(w.jsx)("span",{className:"color-brightsalmon",children:d(i,"sec")}))}function L(e,t){var n=0===e||e>1?"".concat(t,"s"):t;return"".concat(e," ").concat(n)}function F(e){var t=e.endedLabel,n=e.endLabel,r=e.endPeriodMs,a=e.renderCountdownText,s=e.startLabel,o=e.startPeriodMs,i=Object(d.useState)(),u=Object(c.a)(i,2),l=u[0],b=u[1],j=new Date(o),O=new Date(r);return Object(d.useEffect)((function(){var e=setInterval((function(){b(new Date)}),1e3);return function(){clearInterval(e)}}),[]),l?l<j?Object(w.jsx)("div",{children:Object(w.jsxs)("span",{children:[Object(w.jsx)("span",{className:"votingstatus",children:s||"Starts:"})," ",Object(w.jsx)("span",{className:"votingstatus__timer",children:P({countdownFrom:j,renderCountdownText:a,showDaysOnly:!0})})]})}):l<O?Object(w.jsx)("div",{children:Object(w.jsxs)("span",{children:[Object(w.jsx)("span",{className:"votingstatus",children:n||"Ends:"})," ",Object(w.jsx)("span",{className:"votingstatus__timer",children:P({countdownFrom:O,renderCountdownText:a})})]})}):Object(w.jsx)("div",{children:Object(w.jsx)("span",{className:"votingstatus",children:t||"Ended"})}):null}function M(e){return Object(w.jsxs)("svg",Object(r.a)(Object(r.a)({width:"20px",height:"20px",viewBox:"0 0 21 24",version:"1.1"},e),{},{children:[Object(w.jsx)("defs",{children:Object(w.jsx)("path",{d:"M17.6516,6.408 C19.8162,8.36 21,11.02 21,13.844 C21,19.458 16.303,24 10.5,24 C4.69616,24 0,19.457 0,13.844 C0,8.506 4.22802,4.197 9.53077,3.731 L9.53077,1.875 L6.68768,1.875 C6.15238,1.875 5.71845,1.455 5.71845,0.938 C5.71845,0.42 6.15238,0 6.68768,0 L14.3123,0 C14.8476,0 15.2815,0.42 15.2815,0.938 C15.2815,1.455 14.8476,1.875 14.3123,1.875 L11.46923,1.875 L11.46923,3.731 C13.1316,3.877 14.7126,4.398 16.1059,5.252 L17.4392,3.962 C17.8177,3.596 18.4314,3.596 18.8099,3.962 C19.1885,4.328 19.1885,4.922 18.8099,5.288 L17.6516,6.408 Z M10.5,22.125 C15.2208,22.125 19.0615,18.41 19.0615,13.844 C19.0615,9.277 15.2209,5.562 10.5,5.562 C5.77913,5.562 1.93846,9.277 1.93846,13.844 C1.93846,18.41 5.77917,22.125 10.5,22.125 Z M11.46923,8.312 L11.46923,13.844 C11.46923,14.362 11.03531,14.781 10.5,14.781 C9.96469,14.781 9.53077,14.362 9.53077,13.844 L9.53077,8.312 C9.53077,7.795 9.96469,7.375 10.5,7.375 C11.03531,7.375 11.46923,7.795 11.46923,8.312 Z",id:"path-1"})}),Object(w.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(w.jsxs)("g",{id:"Group-70",children:[Object(w.jsx)("mask",{id:"mask-2",fill:"white",children:Object(w.jsx)("use",{xlinkHref:"#path-1"})}),Object(w.jsx)("use",{id:"Clip-69",fill:"currentColor",xlinkHref:"#path-1"})]})})]}))}function B(e){var t=e.hasVotingEnded,n=e.noUnits,r=e.renderStatus,a=e.renderTimer,c=e.showPercentages,s=void 0===c||c,o=e.totalUnits,i=e.yesUnits,u=r();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"votingstatus-container",children:[Object(w.jsx)(M,{"aria-label":"Proposal status",role:"img"}),u&&Object(w.jsx)("span",{className:"votingstatus",children:u}),a(F)]}),Object(w.jsx)(K,{yesUnits:i,noUnits:n,totalUnits:o,votingExpired:t,showPercentages:s})]})}function G(e){var t=e.days,n=e.hours,r=e.formatTimePeriod;if(t>0)return"".concat(r(t,"day")," : ").concat(r(n,"hr"))}var V=Object(w.jsx)("span",{children:"Grace period:"}),U={duration:150};function Y(e){var t=e.countdownGracePeriodEndMs,n=void 0===t?0:t,r=e.countdownGracePeriodStartMs,a=void 0===r?0:r,c=e.countdownVotingEndMs,s=void 0===c?0:c,o=e.countdownVotingStartMs,i=void 0===o?0:o,u=e.onGracePeriodChange,l=e.onVotingPeriodChange,b=e.proposalId,j=e.renderStatus,O=e.votingResult,f=Object(m.h)(i/1e3,s/1e3),p=f.hasTimeEnded,h=f.hasTimeStarted,v=f.timeStartEndInitReady,x=Object(m.h)(a/1e3,n/1e3),g=x.hasTimeEnded,N=x.hasTimeStarted,E=x.timeStartEndInitReady,A=E&&N&&!g,y=(null===O||void 0===O?void 0:O.No.units)||0,k=(null===O||void 0===O?void 0:O.totalUnits)||0,C=(null===O||void 0===O?void 0:O.Yes.units)||0,S=p?C>y:void 0,_=null===j||void 0===j?void 0:j({countdownGracePeriodEndMs:n,countdownGracePeriodStartMs:a,countdownVotingEndMs:s,countdownVotingStartMs:i,didVotePassSimpleMajority:S,gracePeriodStartEndInitReady:E,hasGracePeriodEnded:g,hasGracePeriodStarted:N,hasVotingEnded:p,hasVotingStarted:h,votingStartEndInitReady:v});return Object(d.useEffect)((function(){v&&(null===l||void 0===l||l({hasVotingStarted:h,hasVotingEnded:p,proposalId:b,votingStartEndInitReady:v}))}),[p,h,l,b,v]),Object(d.useEffect)((function(){E&&(null===u||void 0===u||u({hasGracePeriodEnded:g,hasGracePeriodStarted:N,proposalId:b,gracePeriodStartEndInitReady:E}))}),[E,g,N,u,b]),Object(w.jsx)(B,{hasVotingEnded:p,noUnits:y,renderStatus:function(){return _||(v?A?"":S?"Approved":!1===S?"Failed":void 0:Object(w.jsx)(R.a,{ariaLabel:"Getting off-chain voting status",fadeInProps:U,intervalMs:200}))},renderTimer:function(e){return v&&h&&!p?Object(w.jsx)(e,{endPeriodMs:s,renderCountdownText:G,startPeriodMs:i}):A?Object(w.jsx)(e,{endLabel:V,endPeriodMs:n||0,renderCountdownText:G,startPeriodMs:a||0}):void 0},totalUnits:k,yesUnits:C})}function H(e){return Object(w.jsx)("svg",Object(r.a)(Object(r.a)({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"18",height:"18",viewBox:"0 0 512 512"},e),{},{children:Object(w.jsx)("path",{fill:"currentColor",d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"})}))}function W(e,t){return(e/t*100).toFixed(2).replace(/\.00$/,"")}function K(e){var t=e.yesUnits,n=void 0===t?0:t,r=e.noUnits,a=void 0===r?0:r,c=e.totalUnits,s=e.votingExpired,o=e.showPercentages,i=c?W(n,c):"0",u=c?W(a,c):"0";return Object(w.jsxs)("div",{className:"votingbar-container",children:[Object(w.jsxs)("div",{className:"votingbar",children:[Object(w.jsx)("div",{className:"votingbar__segment--yes","aria-label":"".concat(i,"% yes votes"),style:{width:"".concat(i,"%")}}),Object(w.jsx)("div",{className:"votingbar__segment--no","aria-label":"".concat(u,"% no votes"),style:{width:"".concat(u,"%")}})]}),Object(w.jsx)("div",{className:"votingbar__percentages",children:o&&Object(w.jsxs)(w.Fragment,{children:[s&&n>a&&Object(w.jsx)("span",{className:"yes-check",children:Object(w.jsx)(H,{"aria-label":"Vote has passed"})}),Object(w.jsxs)("span",{className:"yes-percent",children:[i,"%"]}),Object(w.jsxs)("span",{className:"no-percent",children:[u,"%"]}),s&&n<=a&&Object(w.jsx)("span",{className:"no-check",children:Object(w.jsx)(H,{"aria-label":"Vote has failed"})})]})})]})}function z(e){var t=e.buttonProps,n=e.onClick,a=e.voteChosen,c=e.voteProgress;function s(e){return c===e?{"aria-label":"Voting ".concat(e," \u2026")}:{}}function o(e){return c===e?Object(w.jsx)(A.a,{"aria-label":"Currently voting ".concat(e,"..."),role:"img"}):a===e?"Voted ".concat(e):"Vote ".concat(e)}function u(e){return function(){n(e)}}function d(e,t){return a===e?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(H,{"aria-label":t})," "]}):""}return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("button",Object(r.a)(Object(r.a)(Object(r.a)({},t),s(i.VoteChoices.Yes)),{},{className:"proposaldetails__button",onClick:u(i.VoteChoices.Yes),children:[d(i.VoteChoices.Yes,"You voted yes"),o(i.VoteChoices.Yes)]})),Object(w.jsxs)("button",Object(r.a)(Object(r.a)(Object(r.a)({},t),s(i.VoteChoices.No)),{},{className:"proposaldetails__button",onClick:u(i.VoteChoices.No),children:[d(i.VoteChoices.No,"You voted no"),o(i.VoteChoices.No)]}))]})}},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return C})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return l.a}));n(33);var r=n(5),a=n(4),c=n(2),s=n.n(c),o=n(1);var i=n(12),u=n(28),d=n(11),l=n(100),b=n(9);function j(){var e=Object(o.useState)(),t=Object(a.a)(e,2),n=t[0],c=t[1],j=Object(o.useState)(""),O=Object(a.a)(j,2),f=O[0],p=O[1],h=Object(o.useState)(!1),m=Object(a.a)(h,2),v=m[0],x=m[1],g=Object(o.useState)(),N=Object(a.a)(g,2),E=N[0],A=N[1],w=Object(o.useState)(b.f.STANDBY),y=Object(a.a)(w,2),k=y[0],C=y[1],S=Object(l.a)().networkId;function _(e){return function(t){C(b.f.PENDING),x(!1),S&&S!==i.b.GANACHE&&p("".concat(i.l[S],"/tx/").concat(t)),e&&e(t)}}function I(){return I=Object(r.a)(s.a.mark((function e(){var t,n,r,a,o,i,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Object(d.c)(),e.prev=1,c(void 0),p(""),C(b.f.AWAITING_CONFIRM),x(!0),n=l.length,r=new Array(n),a=0;a<n;a++)r[a]=l[a];return r[4]=_(r[4]),e.next=10,u.b.apply(void 0,r);case 10:return o=e.sent,A(o),C(b.f.FULFILLED),t(),e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(1),i=e.t0,c(i),C(b.f.REJECTED),x(!1),t(),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,17]])}))),I.apply(this,arguments)}return{txError:n,txEtherscanURL:f,txIsPromptOpen:v,txReceipt:E,txSend:function(){return I.apply(this,arguments)},txStatus:k}}function O(e){var t=Object(o.useState)([]),n=Object(a.a)(t,2),c=n[0],i=n[1],d=Object(o.useState)([]),l=Object(a.a)(d,2),b=l[0],j=l[1],O=Object(o.useCallback)((function(e,t){return f.apply(this,arguments)}),[]);function f(){return f=Object(r.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=j,e.next=4,Object(u.m)(t,n);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),j(t);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),f.apply(this,arguments)}return Object(o.useEffect)((function(){e&&c.length&&O(c,e)}),[c,O,e]),[b,i]}var f=n(6),p=n(17),h=n(135),m=n.n(h),v=n(10),x=n(36),g="https://ethgasstation.info/json/ethgasAPI.json";function N(e){return Object(p.toWei)(new m.a((e/10).toFixed(4)).toString(),"Gwei")}var E={average:void 0,fast:void 0,fastest:void 0,safeLow:void 0};function A(e){var t=e||{},c=t.ignoreEnvironment,u=void 0!==c&&c,d=t.noRunIfEIP1559,b=void 0!==d&&d,j=Object(o.useState)(E),O=Object(a.a)(j,2),p=O[0],h=O[1],m=Object(o.useState)(),A=Object(a.a)(m,2),w=A[0],y=A[1],k=Object(o.useState)(v.a.STANDBY),C=Object(a.a)(k,2),S=C[0],_=C[1],I=Object(l.a)().web3Instance,T=Object(x.a)(),D=T.abortController,R=T.isMountedRef,P=!1===u&&"production"!==i.i,L=Object(o.useCallback)((function(){return F.apply(this,arguments)}),[D,R,b,P,I]);function F(){return(F=Object(r.a)(s.a.mark((function e(){var t,r,a,c,o,i,u,d,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==D&&void 0!==D&&D.signal){e.next=2;break}return e.abrupt("return");case 2:if(I){e.next=4;break}return e.abrupt("return");case 4:if(y(void 0),!P){e.next=8;break}return _(v.a.FULFILLED),e.abrupt("return");case 8:if(!b){e.next=18;break}return e.next=11,Promise.resolve().then(n.bind(null,461));case 11:return t=e.sent,r=t.isEIP1559Compatible,e.next=15,r(I);case 15:if(!e.sent){e.next=18;break}return _(v.a.FULFILLED),e.abrupt("return");case 18:return _(v.a.PENDING),e.prev=19,e.next=22,fetch(g,{signal:D.signal});case 22:if((a=e.sent).ok){e.next=25;break}throw new Error("Something went wrong while getting the latest gas price.");case 25:return e.next=27,a.json();case 27:if(c=e.sent,R.current){e.next=30;break}return e.abrupt("return");case 30:o=c.average,i=c.fast,u=c.fastest,d=c.safeLow,h({average:N(o),fast:N(i),fastest:N(u),safeLow:N(d)}),_(v.a.FULFILLED),e.next=43;break;case 35:if(e.prev=35,e.t0=e.catch(19),R.current){e.next=39;break}return e.abrupt("return");case 39:l=e.t0,y(l),h(E),_(v.a.REJECTED);case 43:case"end":return e.stop()}}),e,null,[[19,35]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){return L(),function(){null===D||void 0===D||D.abort()}}),[D,L]),Object(f.a)(Object(f.a)({},p),{},{gasPriceError:w,gasPriceStatus:S})}var w=n(14),y=n(25);function k(){var e=Object(w.b)(),t=Object(o.useCallback)((function(e){return n.apply(this,arguments)}),[e]);function n(){return(n=Object(r.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.web3Instance,t.prev=1,t.next=4,e(Object(y.H)(r));case 4:return t.next=6,e(Object(y.B)(r));case 6:return t.next=8,e(Object(y.C)(r));case 8:return t.next=10,e(Object(y.D)(r));case 10:return t.next=12,e(Object(y.E)(r));case 12:return t.next=14,e(Object(y.F)(r));case 14:return t.next=16,e(Object(y.G)(r));case 16:return t.next=18,e(Object(y.I)(r));case 18:return t.next=20,e(Object(y.J)(r));case 20:return t.next=22,e(Object(y.K)(r));case 22:return t.next=24,e(Object(y.L)(r));case 24:return t.next=26,e(Object(y.M)(r));case 26:return t.next=28,e(Object(y.N)(r));case 28:return t.next=30,e(Object(y.O)(r));case 30:return t.next=32,e(Object(y.P)(r));case 32:return t.next=34,e(Object(y.Q)(r));case 34:return t.next=36,e(Object(y.R)(r));case 36:return t.next=38,e(Object(y.S)(r));case 38:return t.next=40,e(Object(y.T)(r));case 40:return t.next=42,e(Object(y.U)(r));case 42:t.next=47;break;case 44:throw t.prev=44,t.t0=t.catch(1),t.t0;case 47:case"end":return t.stop()}}),t,null,[[1,44]])})))).apply(this,arguments)}return t}function C(){var e=Object(l.a)(),t=e.networkId,n=e.connected,r=Object(o.useState)(),c=Object(a.a)(r,2),s=c[0],u=c[1];return Object(o.useEffect)((function(){n&&t!==i.g?u(new Error("Please connect to the ".concat(i.c[i.g],"."))):u(void 0)}),[n,t]),{defaultChain:i.g,defaultChainError:s,isDefaultChain:t===i.g}}var S=n(1050),_=!1;function I(e,t){var n=Object(o.useState)(_),c=Object(a.a)(n,2),i=c[0],u=c[1],l=Object(x.e)().isMountedRef,b=Object(o.useCallback)((function(e,t){return j.apply(this,arguments)}),[l]);function j(){return j=Object(r.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.i)(t,new S.a(n));case 3:if(r=e.sent,l.current){e.next=6;break}return e.abrupt("return");case 6:u(r),e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(0),l.current){e.next=13;break}return e.abrupt("return");case 13:u(_);case 14:case"end":return e.stop()}}),e,null,[[0,9]])}))),j.apply(this,arguments)}return Object(o.useEffect)((function(){t&&e&&b(e,t)}),[e,b,t]),i}n(194)},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(){return Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"times","data-prefix":"fal",viewBox:"0 0 320 512",children:Object(r.jsx)("path",{fill:"currentColor",d:"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"})})}},164:function(e,t,n){"use strict";function r(e){if(void 0!==e&&!isNaN(e))return"0x".concat(Math.abs(e).toString(16))}n.d(t,"a",(function(){return r}))},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return p}));var r,a=n(6),c=n(5),s=n(4),o=n(2),i=n.n(o),u=n(1),d=n(14),l=n(17),b=n(16),j=n(12),O=n(25),f=n(11);function p(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(d.c)((function(e){return e.contracts.CouponOnboardingContract})),n=Object(u.useState)(),o=Object(s.a)(n,2),p=o[0],h=o[1],m=Object(u.useState)(r.STANDBY),v=Object(s.a)(m,2),x=v[0],g=v[1],N=Object(b.g)(),E=N.account,A=N.web3Instance,w=Object(b.e)().defaultChainError,y=Object(b.c)().average,k=Object(b.a)(),C=k.txError,S=k.txEtherscanURL,_=k.txIsPromptOpen,I=k.txSend,T=k.txStatus,D=Object(d.b)();function R(){return(R=Object(c.a)(i.a.mark((function n(c,s){var o,u,d,b;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!w){n.next=3;break}throw new Error("Wrong network connected.");case 3:if(c){n.next=5;break}throw new Error("No coupon data was found.");case 5:if(E){n.next=7;break}throw new Error("No account found.");case 7:if(e){n.next=9;break}throw new Error("No DAO Registry contract was found.");case 9:if(t){n.next=11;break}throw new Error("No Coupon Onboarding contract was found.");case 11:if(A){n.next=13;break}throw new Error("No Web3 instance was found.");case 13:return g(r.PENDING),o=Object(l.toChecksumAddress)(c.recipient),u=[e.contractAddress,o,String(c.amount),Number(c.nonce),c.signature],d=Object(a.a)({from:E||""},y?{gasPrice:y}:null),n.next=19,I("redeemCoupon",t.instance.methods,u,d);case 19:if(!n.sent){n.next=32;break}return n.next=23,fetch("".concat(j.d,"/api/coupon/redeem"),{method:"PATCH",body:JSON.stringify({signature:c.signature}),headers:{"Content-Type":"application/json"}});case 23:if(n.sent.ok){n.next=26;break}throw new Error("Something went wrong while updating the coupon.");case 26:if(g(r.FULFILLED),Object(f.j)(c.recipient)!==Object(f.j)(E)){n.next=32;break}return n.next=30,D(Object(O.A)({account:E,daoRegistryContract:e,web3Instance:A}));case 30:return n.next=32,P(s);case 32:n.next=39;break;case 34:n.prev=34,n.t0=n.catch(0),b=n.t0,h(b),g(r.REJECTED);case 39:case"end":return n.stop()}}),n,null,[[0,34]])})))).apply(this,arguments)}function P(e){return L.apply(this,arguments)}function L(){return(L=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:t}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return{isInProcessOrDone:x===r.PENDING||x===r.FULFILLED,redeemCoupon:function(e,t){return R.apply(this,arguments)},submitError:p,submitStatus:x,txStatus:T,txError:C,txEtherscanURL:S,txIsPromptOpen:_}}!function(e){e.STANDBY="STANDBY",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(r||(r={}))},190:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return p}));var r=n(6),a=n(4),c=n(5),s=n(2),o=n.n(s),i=n(48),u=n(28),d=n(9),l=n(11),b="SET_CONNECTED_MEMBER",j="CLEAR_CONNECTED_MEMBER";function O(e){var t=e.account,n=e.daoRegistryContract,r=e.web3Instance;return function(){var e=Object(c.a)(o.a.mark((function e(c){var s,b,j,O,h,m,v,x,g,N,E,A,w,y,k,C,S,_,I,T,D,R,P,L,F,M;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===n||void 0===n?void 0:n.contractAddress,b=null===n||void 0===n?void 0:n.instance,j=null===n||void 0===n?void 0:n.abi.find((function(e){return"getAddressIfDelegated"===e.name})),O=null===n||void 0===n?void 0:n.abi.find((function(e){return"members"===e.name})),h=null===n||void 0===n?void 0:n.abi.find((function(e){return"isActiveMember"===e.name})),m=null===n||void 0===n?void 0:n.abi.find((function(e){return"getCurrentDelegateKey"===e.name})),t&&s&&b&&j&&m&&h&&O){e.next=9;break}return c(p()),e.abrupt("return");case 9:return e.prev=9,e.next=12,Object(u.l)({calls:[[s,j,[t]],[s,O,[t]],[s,h,[s,t]],[s,m,[t]]],web3Instance:r});case 12:v=e.sent,x=Object(a.a)(v,4),g=x[0],N=x[1],E=x[2],A=x[3],w=Object(u.i)(d.d.EXISTS,N),y=E||w?A:i.a,k=E||w?g:i.a,C=Object(l.j)(t)===Object(l.j)(k)&&Object(l.j)(t)!==Object(l.j)(y),c(f({delegateKey:y,isAddressDelegated:C,isActiveMember:E,memberAddress:k})),e.next=61;break;case 25:return e.prev=25,e.t0=e.catch(9),e.prev=27,e.next=30,Object(u.l)({calls:[[s,j,[t]],[s,O,[t]],[s,m,[t]]],web3Instance:r});case 30:return S=e.sent,_=Object(a.a)(S,3),I=_[0],T=_[1],D=_[2],R=!1,e.prev=36,e.next=39,b.methods.isActiveMember(s,t).call();case 39:R=e.sent,e.next=50;break;case 42:if(e.prev=42,e.t1=e.catch(36),!e.t1.message.includes("call with your delegate key")){e.next=49;break}R=!1,e.next=50;break;case 49:throw e.t1;case 50:P=Object(u.i)(d.d.EXISTS,T),L=R||P?D:i.a,F=R||P?I:i.a,M=Object(l.j)(t)===Object(l.j)(F)&&Object(l.j)(t)!==Object(l.j)(L),c(f({delegateKey:L,isAddressDelegated:M,isActiveMember:R,memberAddress:F})),e.next=61;break;case 57:throw e.prev=57,e.t2=e.catch(27),c(p()),e.t2;case 61:case"end":return e.stop()}}),e,null,[[9,25],[27,57],[36,42]])})));return function(t){return e.apply(this,arguments)}}()}function f(e){return Object(r.a)({type:b},e)}function p(){return{type:j}}},191:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s}));var r="CONNECT_MODAL_CLOSE",a="CONNECT_MODAL_OPEN";function c(){return{type:r}}function s(){return{type:a}}},194:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return g}));var r,a,c,s=n(5),o=n(4),i=n(6),u=n(2),d=n.n(u),l=n(1),b=n(68),j=n.n(b),O=n(497),f=n.n(O),p=n(10),h=n(12),m=n(37);!function(e){e.DARK="dark",e.LIGHT="light"}(r||(r={})),function(e){e[e.CONNECT_WEB3MODAL=0]="CONNECT_WEB3MODAL",e[e.DEACTIVATE_PROVIDER_WEB3MODAL=1]="DEACTIVATE_PROVIDER_WEB3MODAL",e[e.ERROR_WEB3MODAL=2]="ERROR_WEB3MODAL",e[e.INITIAL_CACHED_CONNECTOR_CHECK_STATUS=3]="INITIAL_CACHED_CONNECTOR_CHECK_STATUS",e[e.NEW_WEB3MODAL=4]="NEW_WEB3MODAL",e[e.UPDATE_ACCOUNT=5]="UPDATE_ACCOUNT"}(a||(a={})),function(e){e.CONNECT="CONNECT",e.DISCONNECT="DISCONNECT"}(c||(c={}));var v={};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case a.CONNECT_WEB3MODAL:var c=r||{},s=c.provider,o=c.networkId,u=c.account,d=c.connected,l=c.web3Instance;return Object(i.a)(Object(i.a)({},e),{},{account:u,connected:d,networkId:o,provider:s,web3Instance:l});case a.DEACTIVATE_PROVIDER_WEB3MODAL:return v;case a.ERROR_WEB3MODAL:var b=r||{},j=b.error;return Object(i.a)(Object(i.a)({},e),{},{error:j});case a.INITIAL_CACHED_CONNECTOR_CHECK_STATUS:var O=r||{},f=O.initialCachedConnectorCheckStatus;return Object(i.a)(Object(i.a)({},e),{},{initialCachedConnectorCheckStatus:f});case a.NEW_WEB3MODAL:var p=r||{},h=p.web3Modal;return{web3Modal:h};case a.UPDATE_ACCOUNT:var m=r||{},x=m.account;return Object(i.a)(Object(i.a)({},e),{},{account:x});default:return v}}function g(e){var t,n,r=e.defaultChain,u=e.defaultTheme,b=e.onBeforeConnect,O=e.onBeforeDisconnect,v=e.providerOptions,g=Object(l.useReducer)(x,{initialCachedConnectorCheckStatus:p.a.STANDBY}),N=Object(o.a)(g,2),E=N[0],A=N[1],w=u,y=r||h.g,k=Object(l.useCallback)(I,[b,E.web3Modal]),C=Object(l.useCallback)((function(e){var t,n;if(null===(t=E.web3Modal)||void 0===t||!t.cachedProvider)return;k(null===(n=E.web3Modal)||void 0===n?void 0:n.cachedProvider)}),[k,null===(t=E.web3Modal)||void 0===t?void 0:t.cachedProvider]);function S(e){var t=Object(o.a)(e,1)[0];A({type:a.UPDATE_ACCOUNT,payload:{account:t}})}function _(){return(_=Object(s.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.INITIAL_CACHED_CONNECTOR_CHECK_STATUS,"string"===typeof t){e.next=3;break}return e.abrupt("return");case 3:if(A({type:r,payload:{initialCachedConnectorCheckStatus:p.a.PENDING}}),!t){e.next=7;break}return e.next=7,n(t);case 7:A({type:r,payload:{initialCachedConnectorCheckStatus:p.a.FULFILLED}});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return(T=Object(s.a)(d.a.mark((function e(t){var n,r,s,i,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E.web3Modal){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,E.web3Modal.connectTo(t);case 5:return n=e.sent,r=new j.a(n),e.next=9,r.eth.getAccounts();case 9:return s=e.sent,i=Object(o.a)(s,1),u=i[0],e.next=14,null===b||void 0===b?void 0:b();case 14:return e.t0=A,e.t1=a.CONNECT_WEB3MODAL,e.t2=u,e.next=19,r.eth.net.getId();case 19:e.t3=e.sent,e.t4=n,e.t5=r,e.t6={account:e.t2,connected:!0,networkId:e.t3,provider:e.t4,web3Instance:e.t5},e.t7={type:e.t1,payload:e.t6},(0,e.t0)(e.t7),e.next=30;break;case 27:e.prev=27,e.t8=e.catch(0),A({type:a.ERROR_WEB3MODAL,payload:{error:{connectorId:t,error:new Error("Failed to connect to ".concat(t,".")),type:c.CONNECT}}});case 30:case"end":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}function D(){return(D=Object(s.a)(d.a.mark((function e(){var t,n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=E.provider)||void 0===t||null===(n=t.close)||void 0===n?void 0:n.call(t);case 3:if(e.t0=E.web3Modal,!e.t0){e.next=7;break}return e.next=7,E.web3Modal.clearCachedProvider();case 7:return e.next=9,null===O||void 0===O?void 0:O();case 9:A({type:a.DEACTIVATE_PROVIDER_WEB3MODAL}),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(0),s=(null===(r=E.web3Modal)||void 0===r?void 0:r.cachedProvider)||"",A({type:a.ERROR_WEB3MODAL,payload:{error:{connectorId:s,error:new Error("Failed to disconnect from ".concat(s||"provider",".")),type:c.DISCONNECT}}});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(l.useEffect)((function(){var e,t,n=E.provider;return null===n||void 0===n||null===(e=n.on)||void 0===e||e.call(n,"accountsChanged",S),null===n||void 0===n||null===(t=n.on)||void 0===t||t.call(n,"chainChanged",C),function(){var e,t;null===n||void 0===n||null===(e=n.removeListener)||void 0===e||e.call(n,"accountsChanged",S),null===n||void 0===n||null===(t=n.removeListener)||void 0===t||t.call(n,"chainChanged",C)}}),[C,E.provider]),Object(l.useEffect)((function(){E.web3Modal||A({type:a.NEW_WEB3MODAL,payload:{web3Modal:new f.a({cacheProvider:!0,network:m.c[m.b[y]],providerOptions:v,theme:w})}})}),[v,E.web3Modal,y,w]),Object(l.useEffect)((function(){var e;E.initialCachedConnectorCheckStatus!==p.a.FULFILLED&&E.initialCachedConnectorCheckStatus!==p.a.PENDING&&function(e,t){_.apply(this,arguments)}(null===(e=E.web3Modal)||void 0===e?void 0:e.cachedProvider,k)}),[k,E.initialCachedConnectorCheckStatus,null===(n=E.web3Modal)||void 0===n?void 0:n.cachedProvider]),Object(i.a)(Object(i.a)({},E),{},{connectWeb3Modal:I,disconnectWeb3Modal:function(){return D.apply(this,arguments)},providerOptions:v})}},195:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(6),a=n(4),c=n(1),s=n(1029),o=n(108),i=n(511),u=n(0);function d(e){var t=e.copySuccessResetMs,n=void 0===t?3e3:t,d=e.render,l=e.textToCopy,b=void 0===l?"":l,j=e.tooltipProps,O=Object(i.a)(b,{successDuration:n}),f=Object(a.a)(O,2),p=f[0],h=f[1];Object(c.useEffect)((function(){m.current&&(p&&o.a.show(m.current),!p&&v.current&&o.a.show(m.current))}),[p]);var m=Object(c.useRef)(null),v=Object(c.useRef)(!1),x=Object(c.useRef)(Object(s.a)());return Object(u.jsxs)(u.Fragment,{children:[d({elementRef:m,isCopied:p,setCopied:h,tooltipID:x.current}),Object(u.jsx)(o.a,Object(r.a)(Object(r.a)({delayShow:200,effect:"solid"},j),{},{afterHide:function(e){var t;v.current=!1,null===j||void 0===j||null===(t=j.afterHide)||void 0===t||t.call(j,e)},afterShow:function(e){var t;v.current=!0,null===j||void 0===j||null===(t=j.afterShow)||void 0===t||t.call(j,e)},id:x.current}))]})}},223:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(74);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(!e)return"---";if(!Object(r.a)(e))return e;var n=e.substring(0,t),a=e.substring(e.length-4);return"".concat(n,"...").concat(a)}},224:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),a=n(2),c=n.n(a),s=n(68),o=n.n(s);function i(e,t){return u.apply(this,arguments)}function u(){return(u=Object(r.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:if(r=o.a.utils.sha3(t)){e.next=6;break}throw new Error("No sha3 extension name was returned.");case 6:return e.next=8,n.methods.getExtensionAddress(r).call();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}},225:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(6),a="SET_SUBGRAPH_NETWORK_STATUS";function c(e){return Object(r.a)({type:a},e)}},226:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(6),c=n(1),s=n(26),o=n(0),i=["",".",".","."],u={position:"absolute"},d={height:1,width:1};function l(e){var t=e.ariaLabel,n=e.intervalMs,l=void 0===n?1e3:n,b=e.fadeInProps,j=Object(a.a)(Object(a.a)({},b),{},{inline:!0}),O=Object(c.useState)(1),f=Object(r.a)(O,2),p=f[0],h=f[1];return Object(c.useEffect)((function(){var e=setInterval((function(){return h((function(e){return(e+1)%i.length}))}),l);return function(){clearInterval(e)}}),[l]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("span",{"aria-label":t,style:u,children:[Object(o.jsx)("span",{children:p>=0&&i[0]}),Object(o.jsx)("span",{children:p>=1&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[1]}))}),Object(o.jsx)("span",{children:p>=2&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[2]}))}),Object(o.jsx)("span",{children:p>=3&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[3]}))})]}),Object(o.jsx)("span",{style:d,children:"\xa0"})]})}},227:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(33),a=n(5),c=n(6),s=n(4),o=n(2),i=n.n(o),u=n(1),d=n(14),l=n(23),b=n(10),j=n(28),O=n(12),f=n(62),p=n(44),h=n(16),m=n(36),v=n(9),x=n(73),g=n(35),N=n(51),E=n(26),A=n(53),w=n(0),y=b.a.FULFILLED,k=v.f.AWAITING_CONFIRM,C=v.f.FULFILLED,S=v.f.PENDING,_=f.c;function I(e){var t=e.checkApplicant,n=e.proposal,o=n.snapshotDraft,b=n.snapshotProposal,v=n.refetchProposalOrDraft,I=b||{msg:{payload:{}}},T=I.address,D=void 0===T?"":T,R=I.msg,P=R.payload,L=P.choices,F=void 0===L?_:L,M=P.name,B=void 0===M?"":M,G=P.body,V=void 0===G?"":G,U=P.start,Y=void 0===U?0:U,H=P.end,W=void 0===H?0:H,K=P.snapshot,z=void 0===K?0:K,q=R.timestamp,J=void 0===q?"":q,Q=I.sig,X=void 0===Q?"":Q,$=Object(u.useState)(((null===b||void 0===b?void 0:b.sig.length)||"")>0),Z=Object(s.a)($,2),ee=Z[0],te=Z[1],ne=Object(u.useRef)({body:V,choices:F,end:W,name:B,sig:X,snapshot:z,space:O.w||"",start:Y,submitter:D,timestamp:J}),re=Object(u.useState)(),ae=Object(s.a)(re,2),ce=ae[0],se=ae[1],oe=Object(u.useRef)({invalidApplicantMessage:""}),ie=Object(d.c)((function(e){return e.contracts})),ue=Object(d.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),de=Object(h.g)(),le=de.account,be=de.web3Instance,je=Object(h.a)(),Oe=je.txEtherscanURL,fe=je.txIsPromptOpen,pe=je.txSend,he=je.txStatus,me=Object(h.c)().average,ve=Object(m.f)(),xe=ve.isDisabled,ge=ve.openWhyDisabledModal,Ne=ve.WhyDisabledModal,Ee=ve.setOtherDisabledReasons,Ae=Object(p.i)(),we=Ae.proposalSignAndSendStatus,ye=Ae.signAndSendProposal,ke=Object(p.a)(t),Ce=ke.checkApplicantError,Se=ke.checkApplicantInvalidMsg,_e=ke.checkApplicantStatus,Ie=ke.isApplicantValid,Te=he===k||he===S||we===k||we===S,De=ee?he===C:he===C&&we===C,Re=Te||De||fe;function Pe(){return(Pe=Object(a.a)(i.a.mark((function e(){var t,n,a,s,u,d,O,f,p,h,m,x,g,N,E,A,w,y,k,C,S,_,I,T,D,R,P,L,F,M,B,G;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ue){e.next=3;break}throw new Error("No DAO Registry address was found.");case 3:if(s=(null===(t=o||b)||void 0===t?void 0:t.actionId)||"",u=Object(j.e)(s,ie)){e.next=7;break}throw Error("No contract was found for action id ".concat(s,"."));case 7:if(d=(null===(n=o||b)||void 0===n?void 0:n.idInDAO)||"",O=null===(a=(null===o||void 0===o?void 0:o.msg.payload)||(null===b||void 0===b?void 0:b.msg.payload))||void 0===a?void 0:a.metadata.submitActionArgs,ee||!o){e.next=19;break}return f=o.msg,p=f.payload,h=p.name,m=p.body,x=p.metadata,g=f.timestamp,e.next=13,ye({partialProposalData:{name:h,body:m,metadata:x,timestamp:g},adapterAddress:u.contractAddress,type:l.SnapshotType.proposal});case 13:N=e.sent,E=N.data,A=N.signature,w=N.submitter,ne.current={body:E.payload.body,choices:E.payload.choices,end:E.payload.end,name:E.payload.name,sig:A,snapshot:E.payload.snapshot,space:E.space,start:E.payload.start,submitter:w,timestamp:E.timestamp},te(!0);case 19:return y=ne.current,k=y.body,C=y.choices,S=y.end,_=y.name,I=y.sig,T=y.snapshot,D=y.space,R=y.start,P=y.submitter,L=y.timestamp,F=Object(l.prepareVoteProposalData)({payload:{body:k,choices:C,end:S,name:_,snapshot:T.toString(),start:R},submitter:P,sig:I,space:D,timestamp:parseInt(L)},be),M=[ue,d].concat(Object(r.a)(O||[]),[F]),B=Object(c.a)({from:le||""},me?{gasPrice:me}:null),e.next=25,pe("submitProposal",u.instance.methods,M,B);case 25:v(),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),G=e.t0,se(G);case 32:case"end":return e.stop()}}),e,null,[[0,28]])})))).apply(this,arguments)}return Object(u.useEffect)((function(){t&&_e===y&&(!Ie&&Se&&(oe.current=Object(c.a)(Object(c.a)({},oe.current),{},{invalidApplicantMessage:Se})),Ee(Object.values(oe.current)))}),[t,Se,_e,Ie,Ee]),Ce&&console.warn("Error checking if the applicant address is valid: ".concat(Ce.message)),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{className:"proposaldetails__button",disabled:xe||Re,onClick:xe||Re?function(){}:function(){return Pe.apply(this,arguments)},children:Te?Object(w.jsx)(A.a,{}):De?"Done":"Sponsor"}),Object(w.jsx)(g.a,{error:ce,renderText:"Something went wrong"}),Re&&Object(w.jsx)("div",{className:"form__submit-status-container",children:function(){if(he===k||we===k)return"Awaiting your confirmation\u2026";switch(he){case S:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(x.a,{intervalMs:2e3,messages:f.b,useFirstItemStart:!0,render:function(e){return Object(w.jsx)(E.a,{children:e},e)}}),Object(w.jsx)(N.a,{url:Oe,isPending:!0})]});case C:return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:"Proposal submitted!"}),Object(w.jsx)(N.a,{url:Oe})]});default:return null}}()}),xe&&Object(w.jsx)("button",{className:"button--help-centered",onClick:ge,children:"Why is sponsoring disabled?"})]}),Object(w.jsx)(Ne,{title:"Why is sponsoring disabled?"})]})}},237:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O}));var r=n(4),a=n(1),c=n(68),s=n.n(c),o=n(194),i=n(10),u=n(12),d=n(11),l=n(16),b=n(0),j=Object(a.createContext)({});function O(e){var t,n=e.children,c=e.defaultChain,O=e.defaultTheme,f=void 0===O?o.a.DARK:O,p=e.onBeforeConnect,h=e.onBeforeDisconnect,m=e.providerOptions,v=Object(a.useRef)(new s.a(new s.a.providers.WebsocketProvider(u.k))),x=Object(a.useState)(),g=Object(r.a)(x,2),N=g[0],E=g[1],A={defaultChain:c,defaultTheme:f,onBeforeConnect:p,onBeforeDisconnect:h,providerOptions:m},w=Object(o.b)(A),y=w.account,k=w.connected,C=w.connectWeb3Modal,S=w.disconnectWeb3Modal,_=w.error,I=w.initialCachedConnectorCheckStatus,T=w.networkId,D=void 0===T?N:T,R=w.provider,P=void 0===R?null===(t=v.current)||void 0===t?void 0:t.currentProvider:R,L=w.web3Instance,F=void 0===L?v.current:L,M=w.web3Modal,B=Object(l.b)(F),G=Object(r.a)(B,2),V=G[0],U=G[1],Y=Object(r.a)(V,1)[0],H=Y&&Object(d.j)(Y)!==Object(d.j)(y)?Y:void 0;Object(a.useEffect)((function(){var e;k||I!==i.a.FULFILLED||(null===(e=v.current)||void 0===e||e.eth.net.getId().then(E).catch((function(){return E(void 0)})))}),[k,I]),Object(a.useEffect)((function(){y&&U([y])}),[y,U]);var W={account:y,accountENS:H,connected:k,connectWeb3Modal:C,disconnectWeb3Modal:S,error:_,initialCachedConnectorCheckStatus:I,networkId:D,provider:P,providerOptions:m,web3Instance:F,web3Modal:M};return Object(b.jsx)(j.Provider,{value:W,children:n})}},25:function(e,t,n){"use strict";n.d(t,"A",(function(){return r.d})),n.d(t,"w",(function(){return r.c})),n.d(t,"y",(function(){return a.c})),n.d(t,"z",(function(){return a.d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return A})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return k})),n.d(t,"m",(function(){return C})),n.d(t,"n",(function(){return S})),n.d(t,"o",(function(){return _})),n.d(t,"p",(function(){return I})),n.d(t,"q",(function(){return T})),n.d(t,"r",(function(){return D})),n.d(t,"s",(function(){return R})),n.d(t,"t",(function(){return P})),n.d(t,"u",(function(){return L})),n.d(t,"v",(function(){return F})),n.d(t,"x",(function(){return M})),n.d(t,"D",(function(){return B})),n.d(t,"G",(function(){return G})),n.d(t,"H",(function(){return V})),n.d(t,"Q",(function(){return H})),n.d(t,"C",(function(){return W})),n.d(t,"S",(function(){return K})),n.d(t,"J",(function(){return z})),n.d(t,"O",(function(){return q})),n.d(t,"B",(function(){return J})),n.d(t,"I",(function(){return Q})),n.d(t,"R",(function(){return X})),n.d(t,"M",(function(){return $})),n.d(t,"L",(function(){return Z})),n.d(t,"E",(function(){return ee})),n.d(t,"T",(function(){return te})),n.d(t,"F",(function(){return ne})),n.d(t,"N",(function(){return re})),n.d(t,"P",(function(){return ae})),n.d(t,"K",(function(){return ce})),n.d(t,"U",(function(){return se})),n.d(t,"V",(function(){return ue.b}));var r=n(190),a=n(191),c=n(6),s=n(66),o=n(5),i=n(2),u=n.n(i),d=n(9),l=n(12),b=n(28),j=n(40),O=n(224),f=["type"],p="CLEAR_CONTRACTS",h="CONTRACT_BANK_ADAPTER",m="CONTRACT_BANK_EXTENSION",v="CONTRACT_BANK_FACTORY",x="CONTRACT_CONFIGURATION",g="CONTRACT_COUPON_ONBOARDING",N="CONTRACT_DAO_FACTORY",E="CONTRACT_DAO_REGISTRY",A="CONTRACT_DAO_REGISTRY_ADAPTER",w="CONTRACT_DISTRIBUTE",y="CONTRACT_ERC20_EXTENSION",k="CONTRACT_FINANCING",C="CONTRACT_GUILDKICK",S="CONTRACT_KYC_ONBOARDING",_="CONTRACT_MANAGING",I="CONTRACT_NFT_EXTENSION",T="CONTRACT_ONBOARDING",D="CONTRACT_RAGEQUIT",R="CONTRACT_TRIBUTE",P="CONTRACT_TRIBUTE_NFT",L="CONTRACT_VOTING",F="CONTRACT_VOTING_OP_ROLLUP";function M(){return{type:p}}function B(e){return function(){var t=Object(o.a)(u.a.mark((function t(r){var a,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=10;break}return t.next=4,n.e(13).then(n.t.bind(null,1060,3));case 4:a=t.sent,c=a.default,s=c,o=l.a[l.g],i=new e.eth.Contract(s,o),r(oe({type:v,abi:s,contractAddress:o,instance:i}));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function G(e){return function(){var t=Object(o.a)(u.a.mark((function t(r){var a,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=10;break}return t.next=4,n.e(16).then(n.t.bind(null,1061,3));case 4:a=t.sent,c=a.default,s=c,o=l.e[l.g],i=new e.eth.Contract(s,o),r(oe({type:N,abi:s,contractAddress:o,instance:i}));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function V(e){return function(){var t=Object(o.a)(u.a.mark((function t(r){var a,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=12;break}return t.next=4,n.e(17).then(n.t.bind(null,1062,3));case 4:if(a=t.sent,c=a.default,s=c,o=l.f){t.next=10;break}throw new Error("No DAO Registry contract address was found.");case 10:i=new e.eth.Contract(s,o),r(oe({type:E,abi:s,contractAddress:o,instance:i}));case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}function U(e,t){return ie({actionType:L,adapterOrExtensionName:d.a.voting,adapterNameForRedux:j.c.VotingContract,contractAddress:t,lazyImport:function(){return n.e(2).then(n.t.bind(null,1063,3))},web3Instance:e})}function Y(e,t){return ie({actionType:F,adapterOrExtensionName:d.a.voting,adapterNameForRedux:j.c.OffchainVotingContract,contractAddress:t,lazyImport:function(){return n.e(1).then(n.t.bind(null,1064,3))},web3Instance:e})}function H(e,t){return ie({actionType:T,adapterNameForRedux:j.a.ONBOARDING,adapterOrExtensionName:d.a.onboarding,contractAddress:t,lazyImport:function(){return n.e(27).then(n.t.bind(null,1065,3))},web3Instance:e})}function W(e,t){return ie({actionType:m,adapterNameForRedux:j.b.BANK,adapterOrExtensionName:d.c.bank,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(12).then(n.t.bind(null,1066,3))},web3Instance:e})}function K(e,t){return ie({actionType:R,adapterNameForRedux:j.a.TRIBUTE,adapterOrExtensionName:d.a.tribute,contractAddress:t,lazyImport:function(){return n.e(29).then(n.t.bind(null,1067,3))},web3Instance:e})}function z(e,t){return ie({actionType:w,adapterNameForRedux:j.a.DISTRIBUTE,adapterOrExtensionName:d.a.distribute,contractAddress:t,lazyImport:function(){return n.e(19).then(n.t.bind(null,1068,3))},web3Instance:e})}function q(e,t){return ie({actionType:_,adapterNameForRedux:j.a.MANAGING,adapterOrExtensionName:d.a.managing,contractAddress:t,lazyImport:function(){return n.e(24).then(n.t.bind(null,1069,3))},web3Instance:e})}function J(e,t){return ie({actionType:h,adapterNameForRedux:j.a.BANK,adapterOrExtensionName:d.a.bank,contractAddress:t,lazyImport:function(){return n.e(11).then(n.t.bind(null,1070,3))},web3Instance:e})}function Q(e,t){return ie({actionType:A,adapterNameForRedux:j.a.DAO_REGISTRY,adapterOrExtensionName:d.a.dao_registry,contractAddress:t,lazyImport:function(){return n.e(18).then(n.t.bind(null,1071,3))},web3Instance:e})}function X(e,t){return ie({actionType:D,adapterNameForRedux:j.a.RAGEQUIT,adapterOrExtensionName:d.a.ragequit,contractAddress:t,lazyImport:function(){return n.e(28).then(n.t.bind(null,1072,3))},web3Instance:e})}function $(e,t){return ie({actionType:C,adapterNameForRedux:j.a.GUILDKICK,adapterOrExtensionName:d.a.guildkick,contractAddress:t,lazyImport:function(){return n.e(22).then(n.t.bind(null,1073,3))},web3Instance:e})}function Z(e,t){return ie({actionType:k,adapterNameForRedux:j.a.FINANCING,adapterOrExtensionName:d.a.financing,contractAddress:t,lazyImport:function(){return n.e(21).then(n.t.bind(null,1074,3))},web3Instance:e})}function ee(e,t){return ie({actionType:x,adapterNameForRedux:j.a.CONFIGURATION,adapterOrExtensionName:d.a.configuration,contractAddress:t,lazyImport:function(){return n.e(14).then(n.t.bind(null,1075,3))},web3Instance:e})}function te(e,t){return ie({actionType:P,adapterNameForRedux:j.a.TRIBUTE_NFT,adapterOrExtensionName:d.a.tribute_nft,contractAddress:t,lazyImport:function(){return n.e(30).then(n.t.bind(null,1076,3))},web3Instance:e})}function ne(e,t){return ie({actionType:g,adapterNameForRedux:j.a.COUPON_ONBOARDING,adapterOrExtensionName:d.a.coupon_onboarding,contractAddress:t,lazyImport:function(){return n.e(15).then(n.t.bind(null,1077,3))},web3Instance:e})}function re(e,t){return ie({actionType:S,adapterNameForRedux:j.a.KYC_ONBOARDING,adapterOrExtensionName:d.a.kyc_onboarding,contractAddress:t,lazyImport:function(){return n.e(23).then(n.t.bind(null,1078,3))},web3Instance:e})}function ae(e,t){return ie({actionType:I,adapterNameForRedux:j.b.NFT,adapterOrExtensionName:d.c.nft,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(26).then(n.t.bind(null,1079,3))},web3Instance:e})}function ce(e,t){return ie({actionType:y,adapterNameForRedux:j.b.ERC20,adapterOrExtensionName:d.c.erc20,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(20).then(n.t.bind(null,1080,3))},web3Instance:e})}function se(e,t){return function(){var n=Object(o.a)(u.a.mark((function n(r,a){var c,s,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!e){n.next=29;break}if(a().contracts.DaoRegistryContract){n.next=6;break}return console.warn("Please init the DaoRegistry contract before the voting contract."),n.abrupt("return");case 6:if(c="",!(s=t||"")){n.next=12;break}return n.next=11,Object(b.h)(s,e);case 11:c=n.sent;case 12:if(s||c){n.next=19;break}return n.next=15,Object(b.c)(d.a.voting,null===(o=a().contracts.DaoRegistryContract)||void 0===o?void 0:o.instance);case 15:return s=n.sent,n.next=18,Object(b.h)(s,e);case 18:c=n.sent;case 19:n.t0=c,n.next="VotingContract"===n.t0?22:"OffchainVotingContract"===n.t0?25:28;break;case 22:return n.next=24,U(e,s)(r,a);case 24:return n.abrupt("return",n.sent);case 25:return n.next=27,Y(e,s)(r,a);case 27:return n.abrupt("return",n.sent);case 28:throw new Error("Voting contract name could not be found.");case 29:n.next=34;break;case 31:n.prev=31,n.t1=n.catch(0),console.warn("The voting contract could not be found in the DAO. Are you sure you meant to add this contract's ABI?");case 34:case"end":return n.stop()}}),n,null,[[0,31]])})));return function(e,t){return n.apply(this,arguments)}}()}function oe(e){var t=e.type,n=Object(s.a)(e,f);return Object(c.a)({type:t},n)}function ie(e){var t=e.actionType,n=e.adapterNameForRedux,r=e.adapterOrExtensionName,a=e.contractAddress,c=e.isExtension,s=void 0!==c&&c,i=e.lazyImport,d=e.web3Instance;return function(){var e=Object(o.a)(u.a.mark((function e(c,o){var l,j,f,p,h,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:if(f=e.sent,p=f.default,h=p,e.t0=a,e.t0){e.next=18;break}if(!s){e.next=14;break}return e.next=11,Object(O.a)(r,null===(l=o().contracts.DaoRegistryContract)||void 0===l?void 0:l.instance);case 11:e.t1=e.sent,e.next=17;break;case 14:return e.next=16,Object(b.c)(r,null===(j=o().contracts.DaoRegistryContract)||void 0===j?void 0:j.instance);case 16:e.t1=e.sent;case 17:e.t0=e.t1;case 18:m=e.t0,c(oe({type:t,abi:h,contractAddress:m,adapterOrExtensionName:n,instance:new d.eth.Contract(h,m)})),e.next=25;break;case 22:e.prev=22,e.t2=e.catch(0),console.warn('The contract "'.concat(r,"\" could not be found in the DAO. Are you sure you meant to add this contract's ABI?"));case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,n){return e.apply(this,arguments)}}()}var ue=n(225)},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),a=(n(1),n(1030)),c=n(0),s=function(e){return{transition:"opacity ".concat(e.duration||300,"ms cubic-bezier(0, 0.69, 0.32, 0.64)"),opacity:0}},o={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}};function i(e){var t=e.inline;return Object(c.jsx)(a.a,{appear:!0,in:void 0===e.show||e.show,timeout:e.duration||300,children:function(n){return t?Object(c.jsx)("span",{style:Object(r.a)(Object(r.a)({},s(e)),o[n]),children:e.children}):Object(c.jsx)("div",{style:Object(r.a)(Object(r.a)({},s(e)),o[n]),children:e.children})}})}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return _})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return D})),n.d(t,"k",(function(){return P})),n.d(t,"l",(function(){return F})),n.d(t,"m",(function(){return W}));var r=n(33),a=n(6),c=n(5),s=n(2),o=n.n(s),i=n(12),u=n(11),d=n(164);function l(){return b.apply(this,arguments)}function b(){return b=Object(c.a)(o.a.mark((function e(){var t,n,c,s,b,j,O,f,p,h,m,v,x,g,N=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N.length>0&&void 0!==N[0]?N[0]:{fromBlock:0},c=N.length>1&&void 0!==N[1]?N[1]:{},s=Object(u.f)(i.b.MAINNET)){e.next=5;break}throw new Error("No Alchemy URL was found.");case 5:return b=n.fromBlock,j=void 0===b?0:b,O=n.maxCount,f=void 0===O?1e3:O,p=Object(d.a)(n.toBlock)||"latest",h={id:0,jsonrpc:"2.0",method:"alchemy_getAssetTransfers",params:[Object(a.a)(Object(a.a)({},n),{},{fromBlock:Object(d.a)(j),maxCount:Object(d.a)(f),toBlock:p})]},e.next=10,fetch(s,{body:JSON.stringify(h),headers:{"Content-Type":"application/json"},method:"POST",signal:null===c||void 0===c||null===(t=c.abortController)||void 0===t?void 0:t.signal});case 10:if((m=e.sent).ok){e.next=13;break}throw new Error("Something went wrong while fetching alchemy_getAssetTransfers.");case 13:return e.next=15,m.json();case 15:if(v=e.sent,x=v.result,g=Object(r.a)(x.transfers),!x.pageKey){e.next=27;break}return e.t0=g.push,e.t1=g,e.t2=r.a,e.next=24,l(Object(a.a)(Object(a.a)({},n),{},{pageKey:x.pageKey}));case 24:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 27:return e.abrupt("return",g);case 28:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var j=n(135),O=n.n(j);function f(e,t,n,r,a){return p.apply(this,arguments)}function p(){return p=Object(c.a)(o.a.mark((function e(t,n,s,i,u){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(o.a.mark((function e(c,d){var l,b,j,f;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=O.a,b=n[t],e.next=5,b.apply(void 0,Object(r.a)(s)).estimateGas({from:i.from,value:i.value});case 5:return j=e.sent,f=new l(j).decimalPlaces(0,O.a.ROUND_DOWN).toNumber(),e.next=9,b.apply(void 0,Object(r.a)(s)).send(Object(a.a)(Object(a.a)({},i),{},{gas:f})).on("transactionHash",(function(e){u&&u(e)})).on("receipt",(function(e){c(e)})).on("error",(function(e){d(e)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),d(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var h=n(68),m=n.n(h);function v(e,t){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:if(r=m.a.utils.sha3(t)){e.next=6;break}throw new Error("No sha3 adapter name was returned.");case 6:return e.next=8,n.methods.getAdapterAddress(r).call();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var g,N=n(9);function E(e){try{var t=null===e||void 0===e?void 0:e.contractAddress;if(!t)throw new Error("Contract address was not found in the store.");return t}catch(n){throw n}}function A(e,t){try{switch(e){case N.a.configuration:return"";case N.a.distribute:return E(t.DistributeContract);case N.a.financing:case N.a.guildkick:return"";case N.a.kyc_onboarding:return E(t.KycOnboardingContract);case N.a.managing:return E(t.ManagingContract);case N.a.onboarding:return E(t.OnboardingContract);case N.a.ragequit:return"";case N.a.tribute:return E(t.TributeContract);case N.a.tribute_nft:return E(t.TributeNFTContract);case N.a.voting:return E(t.VotingContract);default:throw new Error("Contract address was not found in the store.")}}catch(n){throw n}}function w(e,t){try{var n=Object.values(t).find((function(t){return(null===t||void 0===t?void 0:t.contractAddress)&&Object(u.j)(t.contractAddress)===Object(u.j)(e)}));if(!n)throw new Error("Contract was not found in the store.");return n}catch(r){throw r}}function y(e,t,n){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(o.a.mark((function e(t,n,r){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:if(a=m.a.utils.sha3(n),r&&(c=new m.a,a=m.a.utils.sha3(c.eth.abi.encodeParameters(["address","bytes32"],[r,m.a.utils.sha3(n)]))),a){e.next=7;break}throw new Error("No sha3 config key was returned.");case 7:return e.next=9,t.methods.getAddressConfiguration(a).call();case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function C(e,t,n){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(o.a.mark((function e(t,n,r){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:if(a=m.a.utils.sha3(n),r&&(c=new m.a,a=m.a.utils.sha3(c.eth.abi.encodeParameters(["address","bytes32"],[r,m.a.utils.sha3(n)]))),a){e.next=7;break}throw new Error("No sha3 config key was returned.");case 7:return e.next=9,t.methods.getConfiguration(a).call();case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}!function(e){e.CREATION="CREATION",e.READY="READY"}(g||(g={}));n(224);function _(e,t){return I.apply(this,arguments)}function I(){return(I=Object(c.a)(o.a.mark((function e(t,r){var a,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.e(0).then(n.t.bind(null,1058,3));case 3:return a=e.sent,c=a.default,e.next=7,new r.eth.Contract(c,t).methods.getAdapterName().call();case 7:return s=e.sent,e.abrupt("return",s);case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function T(e,t){return e===Math.log2(Number(t)+1)-1}n(461);function D(e){return e!==i.p&&e!==i.x&&e!==i.j}var R=n(48);function P(e){return e!==R.a}var L=n(4);function F(e){return M.apply(this,arguments)}function M(){return(M=Object(c.a)(o.a.mark((function e(t){var r,a,c,s,u,d,l,b,j,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.blockNumber,a=void 0===r?"latest":r,c=t.calls,s=t.web3Instance,e.next=3,n.e(25).then(n.t.bind(null,1059,3));case 3:if(u=e.sent,d=u.default,i.t){e.next=7;break}throw new Error("No Multicall address was found. Are you sure it is set?");case 7:return e.prev=7,l=new s.eth.Contract(d,i.t),b=l.methods,e.next=11,b.aggregate(c.map((function(e){var t=Object(L.a)(e,3),n=t[0],r=t[1],a=t[2];return[n.toLowerCase(),s.eth.abi.encodeFunctionCall(r,a)]}))).call({},a);case 11:return j=e.sent,O=j.returnData,e.abrupt("return",O.map((function(e,t){var n=c[t][1].outputs||[],r=s.eth.abi.decodeParameters(n,e);return 1===r.__length__&&void 0!==r[0]?r[0]:s.eth.abi.decodeParameters(n||[],e)})));case 16:throw e.prev=16,e.t0=e.catch(7),e.t0;case 19:case"end":return e.stop()}}),e,null,[[7,16]])})))).apply(this,arguments)}var B,G=n(3),V=n(492),U=n.n(V),Y=n(493),H=(B={},Object(G.a)(B,i.b.GOERLI,"0x333Fc8f550043f239a2CF79aEd5e9cF4A20Eb41e"),Object(G.a)(B,i.b.MAINNET,"0x3671aE578E63FdF66ad4F3E12CC0c0d71Ac7510C"),Object(G.a)(B,i.b.RINKEBY,"0x196eC7109e127A353B709a20da25052617295F6f"),Object(G.a)(B,i.b.ROPSTEN,"0x72c33B247e62d0f1927E8d325d0358b8f9971C68"),B);function W(e,t){return K.apply(this,arguments)}function K(){return(K=Object(c.a)(o.a.mark((function e(t,n){var r,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=H[i.g])&&t&&t.length){e.next=3;break}return e.abrupt("return",t);case 3:return a=new n.eth.Contract(Y,r),e.next=6,a.methods.getNames(t).call();case 6:return c=e.sent,e.abrupt("return",c.map((function(e,n){return""!==e&&U.a.normalize(e)===e?e:t[n]})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(6),a=n(4),c=n(1),s=n(11),o=n(26),i=n(0);function u(e){var t=e.error,n=e.renderText,u=Object(c.useState)(!1),d=Object(a.a)(u,2),l=d[0],b=d[1],j="function"!==typeof t&&(4001===(null===t||void 0===t?void 0:t.code)||/^(the )?user rejected (the )?request$/g.test(Object(s.j)((null===t||void 0===t?void 0:t.message)||""))),O="string"===typeof n?n:n(),f="string"===typeof n&&"function"!==typeof t&&Object(s.j)(n)===Object(s.j)((null===t||void 0===t?void 0:t.message)||"");return!t||j?null:Object(i.jsx)(o.a,{children:Object(i.jsxs)("div",{className:"text-center",children:[Object(i.jsx)("p",{className:"error-message",children:O}),t&&!f&&Object(i.jsxs)("details",Object(r.a)(Object(r.a)({},e.detailsProps),{},{children:[Object(i.jsx)("summary",{"aria-expanded":l,className:"error-message",onClick:function(){return b(!l)},style:{cursor:"pointer",outline:"none"},children:Object(i.jsx)("small",{children:"Details"})}),Object(i.jsx)("p",{className:"error-message",children:Object(i.jsx)("small",{children:"function"===typeof t?t():t.message})})]}))]})})}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return A})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return V})),n.d(t,"h",(function(){return K}));var r=n(4),a=n(1);function c(){var e=Object(a.useState)(),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return s.current=!0,!n&&c(new AbortController),function(){s.current=!1,n&&n.abort()}}),[n]),{abortController:n,isMountedRef:s}}var s={count:0};function o(e,t){return"increment"===t.type?{count:e.count+1}:e}function i(){var e=Object(a.useReducer)(o,s),t=Object(r.a)(e,2),n=t[0],c=t[1];return[n.count,c]}var u=n(1055),d=n(14),l=n(117);var b=n(5),j=n(2),O=n.n(j),f=n(10),p=n(28),h=n(16),m=[];function v(e){var t=Object(d.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),n=Object(d.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),c=Object(a.useState)(m),s=Object(r.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(f.a.STANDBY),l=Object(r.a)(u,2),j=l[0],v=l[1],x=Object(a.useState)(),g=Object(r.a)(x,2),N=g[0],E=g[1],A=Object(h.g)().web3Instance,w=null===n||void 0===n?void 0:n.find((function(e){return"getConfiguration"===e.name}));function y(){return y=Object(b.a)(O.a.mark((function e(t){var n,r,a,c,s,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.abi,r=t.configKeys,a=t.contractAddress,c=t.web3Instance,e.prev=1,s=r.map((function(e){return[a,n,[c.utils.sha3(e)||""]]})),E(void 0),v(f.a.PENDING),e.t0=i,e.next=8,Object(p.l)({calls:s,web3Instance:c});case 8:e.t1=e.sent,(0,e.t0)(e.t1),v(f.a.FULFILLED),e.next=19;break;case 13:e.prev=13,e.t2=e.catch(1),o=e.t2,i(m),v(f.a.REJECTED),E(o);case 19:case"end":return e.stop()}}),e,null,[[1,13]])}))),y.apply(this,arguments)}return Object(a.useEffect)((function(){t&&w&&A&&function(e){y.apply(this,arguments)}({abi:w,configKeys:e,contractAddress:t,web3Instance:A})}),[e,t,w,A]),{daoConfigurations:o,daoConfigurationsError:N,daoConfigurationsStatus:j}}var x=n(17),g=n(94),N=n(12);function E(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(d.c)((function(e){return e.contracts.BankExtensionContract})),n=Object(d.c)((function(e){return e.subgraphNetworkStatus.status})),c=Object(u.a)(l.a,{variables:{id:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),s=Object(r.a)(c,2),o=s[0],i=s[1],j=i.called,p=i.loading,h=i.data,m=i.error,v=Object(a.useState)(),E=Object(r.a)(v,2),A=E[0],w=E[1],y=Object(a.useState)(),k=Object(r.a)(y,2),C=k[0],S=k[1],_=Object(a.useState)(f.a.STANDBY),I=Object(r.a)(_,2),T=I[0],D=I[1],R=Object(a.useState)(),P=Object(r.a)(R,2),L=P[0],F=P[1],M=Object(a.useCallback)((function(){return G.apply(this,arguments)}),[t]),B=Object(a.useCallback)((function(){try{if(D(f.a.PENDING),h){var e=h.tributeDaos[0],t=e.totalUnits,n=e.totalUnitsIssued;w(Number(t)),S(Number(n)),D(f.a.FULFILLED)}else{if(m)throw new Error("subgraph query error: ".concat(m.message));if("undefined"===typeof h)throw new Error("subgraph query error: data is undefined")}}catch(m){var r=m,a=r.message;console.log(a),M()}}),[h,m,M]);function G(){return(G=Object(b.a)(O.a.mark((function e(){var n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,D(f.a.PENDING),e.next=6,t.instance.methods.balanceOf(N.x,N.y).call();case 6:return n=e.sent,e.next=9,t.instance.methods.balanceOf(N.p,N.y).call();case 9:r=e.sent,a=Object(x.toBN)(n).sub(Object(x.toBN)(r)),w(Number(n)),S(Number(a)),D(f.a.FULFILLED),e.next=24;break;case 16:e.prev=16,e.t0=e.catch(2),c=e.t0,console.log(c),w(void 0),S(void 0),F(c),D(f.a.REJECTED);case 24:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){j||o()}),[j,o]),Object(a.useEffect)((function(){n===g.a.OK?j&&!p&&null!==e&&void 0!==e&&e.contractAddress&&B():M()}),[null===e||void 0===e?void 0:e.contractAddress,j,M,B,p,n]),{totalUnits:A,totalUnitsError:L,totalUnitsIssued:C,totalUnitsStatus:T}}function A(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),{isMountedRef:e}}var w=n(165),y=n.n(w),k=n(11),C=n(26),S=n(163),_=n(0);function I(e){var t=(e||{}).skipIsActiveMemberCheck,n=void 0!==t&&t,c=Object(a.useState)([]),s=Object(r.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(!1),l=Object(r.a)(u,2),b=l[0],j=l[1],O=Object(d.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.delegateKey})),f=Object(d.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),p=Object(d.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),m=Object(h.g)().connected,v=o&&o.find((function(e){return e})),x=function(){if(!m)return"Your wallet is not connected.";if(!p&&!f&&!n)return"Either you are not a member, or your membership is not active.";if(O&&f&&!n)return e=O,"Your member address is delegated to ".concat(Object(k.m)(e,7),". You must use that address.");var e;return v||""}(),g=!!x||!!v,N=!(!g||!x),E=Object(a.useCallback)((function(e){if(!N)return null;var t=e.title;return Object(_.jsx)(y.a,{ariaHideApp:!1,className:"modal-container",isOpen:b,onRequestClose:function(){j(!1)},overlayClassName:"modal-overlay",role:"dialog",style:{overlay:{zIndex:1e3}},children:Object(_.jsx)(C.a,{children:Object(_.jsxs)("div",{className:"modal",children:[Object(_.jsx)("button",{className:"modal__close-button modal__close-button--icon",onClick:function(){j(!1)},children:Object(_.jsx)(S.a,{})}),Object(_.jsxs)("div",{className:"card",children:[Object(_.jsx)("h2",{className:"modal__title",children:t||"Why disabled?"}),Object(_.jsx)("p",{children:x})]})]})})})}),[N,x,b]),A=Object(a.useCallback)((function(e){i(e.filter(Boolean))}),[]);return{disabledReason:x,isDisabled:g,openWhyDisabledModal:function(){j(!0)},setOtherDisabledReasons:A,WhyDisabledModal:E}}var T=n(135),D=n.n(T),R=f.a.STANDBY,P=f.a.PENDING,L=f.a.FULFILLED,F=f.a.REJECTED,M="production"===N.i?15e3:5e3;function B(e){return G.apply(this,arguments)}function G(){return G=Object(b.a)(O.a.mark((function e(t){var n,r,a,c,s,o,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.block,r=t.blockOffset,a=void 0===r?2:r,c=t.isMountedRef,s=t.pollInterval,o=void 0===s?M:s,i=t.web3Instance,e.abrupt("return",new Promise(function(){var e=Object(b.a)(O.a.mark((function e(t,r){var s,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e,t){return t-e>=Math.abs(a)},e.prev=1,e.t0=s,e.t1=n,e.next=6,i.eth.getBlockNumber();case 6:if(e.t2=e.sent,!(0,e.t0)(e.t1,e.t2)){e.next=10;break}return t(!0),e.abrupt("return");case 10:e.next=16;break;case 12:return e.prev=12,e.t3=e.catch(1),r(e.t3),e.abrupt("return");case 16:u=setInterval(Object(b.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==c&&void 0!==c&&c.current){e.next=4;break}return clearInterval(u),e.abrupt("return");case 4:return e.t0=s,e.t1=n,e.next=8,i.eth.getBlockNumber();case 8:if(e.t2=e.sent,!(0,e.t0)(e.t1,e.t2)){e.next=12;break}clearInterval(u),t(!0);case 12:e.next=18;break;case 14:e.prev=14,e.t3=e.catch(0),clearInterval(u),r(e.t3);case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))),o);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function V(e,t,n){var c=n||{},s=c.blockCheckOffset,o=c.currentBlockPollIntervalMs,i=Object(d.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.instance.methods})),u=Object(a.useState)(),l=Object(r.a)(u,2),j=l[0],f=l[1],p=Object(a.useState)(!1),m=Object(r.a)(p,2),v=m[0],x=m[1],g=Object(a.useState)(),E=Object(r.a)(g,2),w=E[0],y=E[1],k=Object(a.useState)(R),C=Object(r.a)(k,2),S=C[0],_=C[1],I=Object(h.g)().web3Instance,T=A().isMountedRef,M=Object(a.useCallback)((function(e){return G.apply(this,arguments)}),[T]);function G(){return G=Object(b.a)(O.a.mark((function e(t){var n,r,a,c,s,o,i,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bankExtensionMethods,r=t.blockCheckOffset,a=t.currentBlockPollIntervalMs,c=t.memberAddress,s=t.snapshot,o=t.web3Instance,e.prev=1,y(void 0),_(P),e.next=6,B({block:s,blockOffset:r,isMountedRef:T,pollInterval:a,web3Instance:o});case 6:return e.next=8,n.getPriorAmount(c,N.y,s).call();case 8:if(i=e.sent,T.current){e.next=11;break}return e.abrupt("return");case 11:f(i),x(new D.a(i).isGreaterThan(new D.a(0))),_(L),e.next=25;break;case 16:if(e.prev=16,e.t0=e.catch(1),T.current){e.next=20;break}return e.abrupt("return");case 20:u=e.t0,x(!1),f(void 0),y(u),_(F);case 25:case"end":return e.stop()}}),e,null,[[1,16]])}))),G.apply(this,arguments)}return Object(a.useEffect)((function(){e&&t&&i&&I&&M({bankExtensionMethods:i,blockCheckOffset:s,currentBlockPollIntervalMs:o,memberAddress:e,snapshot:t,web3Instance:I})}),[i,s,o,M,e,t,I]),{hasMembershipAtSnapshot:v,memberUnitsAtSnapshot:j,memberUnitsAtSnapshotError:w,memberUnitsAtSnapshotStatus:S}}n(166);var U=f.a.FULFILLED,Y=f.a.PENDING,H=f.a.STANDBY;function W(e){return Object.values(e).every((function(e){return e===U}))}function K(e,t){var n=Object(a.useRef)({start:H,end:H}),c=Object(a.useState)(!1),s=Object(r.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(!1),d=Object(r.a)(u,2),l=d[0],b=d[1],j=Object(a.useState)(W(n.current)),O=Object(r.a)(j,2),f=O[0],p=O[1],h=void 0===e||void 0===t||e<=0||t<=0;return Object(a.useEffect)((function(){if(!o&&!h){p((function(){return n.current.start=Y,W(n.current)}));var t=setInterval((function(){var t=Math.floor(Date.now()/1e3)>(null!==e&&void 0!==e?e:0);i(t),n.current.start!==U&&p((function(){return n.current.start=U,W(n.current)}))}),1e3);return function(){t&&clearInterval(t)}}p((function(){return n.current.start=U,W(n.current)}))}),[o,h,e]),Object(a.useEffect)((function(){if(!l&&!h){p((function(){return n.current.end=Y,W(n.current)}));var e=setInterval((function(){var e=Math.ceil(Date.now()/1e3)>(null!==t&&void 0!==t?t:0);b(e),n.current.end!==U&&p((function(){return n.current.end=U,W(n.current)}))}),1e3);return function(){e&&clearInterval(e)}}p((function(){return n.current.end=U,W(n.current)}))}),[t,l,h]),{hasTimeStarted:o,hasTimeEnded:l,timeStartEndInitReady:f}}},37:function(e,t,n){"use strict";var r,a,c,s;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s})),function(e){e[e.GOERLI=5]="GOERLI",e[e.KOVAN=42]="KOVAN",e[e.RINKEBY=4]="RINKEBY",e[e.ROPSTEN=3]="ROPSTEN",e[e.MAINNET=1]="MAINNET"}(r||(r={})),function(e){e.GOERLI="goerli",e.KOVAN="kovan",e.RINKEBY="rinkeby",e.ROPSTEN="ropsten",e.MAINNET="mainnet"}(a||(a={})),function(e){e.REQUIRED="This field is required.",e.INVALID_BYTES32="The value is not a bytes32.",e.INVALID_BYTES32_ARRAY="The value is not a comma-separated bytes32 format, ie. 0x...,0x...",e.INVALID_EMAIL="The email address is invalid.",e.INVALID_ETHEREUM_ADDRESS="The ethereum address is invalid.",e.INVALID_NUMBER="The value is not a number.",e.INVALID_NUMBER_ARRAY="The value is not a comma-separated number format, ie. 42,5,124"}(c||(c={})),function(e){e.FAILED="Failed",e.PASSED="Passed",e.REQUESTS="Proposals",e.VOTING="Voting"}(s||(s={}))},40:function(e,t,n){"use strict";var r,a,c;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),function(e){e.BANK="bank",e.CONFIGURATION="configuration",e.COUPON_ONBOARDING="coupon-onboarding",e.DAO_REGISTRY="daoRegistry",e.DISTRIBUTE="distribute",e.EXECUTION="execution",e.FINANCING="financing",e.GUILDKICK="guildkick",e.KYC_ONBOARDING="kyc-onboarding",e.MANAGING="managing",e.NFT="nft",e.NONVOTING_ONBOARDING="nonvoting-onboarding",e.OFFCHAINVOTING="offchainvoting",e.ONBOARDING="onboarding",e.RAGEQUIT="ragequit",e.TRIBUTE="tribute",e.TRIBUTE_NFT="tribute-nft",e.VOTING="voting"}(r||(r={})),function(e){e.BANK="bank",e.ERC20="erc20-ext",e.NFT="nft"}(a||(a={})),function(e){e.OffchainVotingContract="OffchainVotingContract",e.VotingContract="VotingContract"}(c||(c={}))},42:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s}));var r,a,c,s;n(23),n(40);!function(e){e[e.EXISTS=0]="EXISTS",e[e.SPONSORED=1]="SPONSORED",e[e.PROCESSED=2]="PROCESSED"}(r||(r={})),function(e){e.Submit="Submit",e.Sponsor="Sponsor",e.OffchainVoting="OffchainVoting",e.OffchainVotingSubmitResult="OffchainVotingSubmitResult",e.OffchainVotingGracePeriod="OffchainVotingGracePeriod",e.OnchainVoting="OnchainVoting",e.Process="Process",e.Completed="Completed"}(a||(a={})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.DONE=2]="DONE",e[e.FAILED=3]="FAILED"}(c||(c={})),function(e){e.Governance="Governance"}(s||(s={}))},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return P})),n.d(t,"f",(function(){return U})),n.d(t,"g",(function(){return Y})),n.d(t,"e",(function(){return ee})),n.d(t,"h",(function(){return re})),n.d(t,"i",(function(){return ae}));var r=n(5),a=n(4),c=n(2),s=n.n(c),o=n(14),i=n(1),u=n(505),d=n.n(u),l=n(10),b=n(28),j=n(11),O=n(16);function f(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.instance})),n=Object(i.useState)(),c=Object(a.a)(n,2),u=c[0],f=c[1],p=Object(i.useState)(),h=Object(a.a)(p,2),m=h[0],v=h[1],x=Object(i.useState)(l.a.STANDBY),g=Object(a.a)(x,2),N=g[0],E=g[1],A=Object(i.useState)(),w=Object(a.a)(A,2),y=w[0],k=w[1],C=Object(O.g)().web3Instance,S=d()(e),_=Object(i.useCallback)((function(){return I.apply(this,arguments)}),[e,t,C]);function I(){return(I=Object(r.a)(s.a.mark((function n(){var r,a,c;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t&&C){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,E(l.a.PENDING),r=Object(j.m)(e,7),n.next=7,t.methods.getAddressIfDelegated(e).call();case 7:a=n.sent,Object(b.j)(e)?Object(b.k)(e)?Object(j.j)(e)!==Object(j.j)(a)?(k(!1),v("The applicant address ".concat(r," is already in use as a delegate key. The address must be removed as a delegate before it can become a member."))):(k(!0),v(void 0)):(k(!1),v("The applicant address ".concat(r," is invalid."))):(k(!1),v("The applicant address ".concat(r," is invalid because it is a DAO reserved address."))),E(l.a.FULFILLED),n.next=19;break;case 12:n.prev=12,n.t0=n.catch(2),c=n.t0,k(void 0),v(void 0),f(c),E(l.a.REJECTED);case 19:case"end":return n.stop()}}),n,null,[[2,12]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){S&&!e&&(f(void 0),v(void 0),k(void 0),E(l.a.STANDBY)),e&&_()}),[e,_,S]),{checkApplicantError:u,checkApplicantInvalidMsg:m,checkApplicantStatus:N,isApplicantValid:y}}var p=n(67),h=[];function m(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi.find((function(e){return"proposals"===e.name}))})),n=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),c=Object(i.useState)(h),u=Object(a.a)(c,2),d=u[0],j=u[1],f=Object(i.useState)(l.a.STANDBY),m=Object(a.a)(f,2),v=m[0],x=m[1],g=Object(i.useState)(),N=Object(a.a)(g,2),E=N[0],A=N[1],w=Object(i.useState)(),y=Object(a.a)(w,2),k=y[0],C=y[1],S=Object(i.useState)(),_=Object(a.a)(S,2),I=_[0],T=_[1],D=Object(O.g)().web3Instance,R=Object(p.useQuery)(["daoProposals",I],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==I&&void 0!==I&&I.length&&D){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.l)({calls:I,web3Instance:D});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!(null===I||void 0===I||!I.length)&&!!D}),P=R.data,L=R.error,F=Object(i.useCallback)((function(){return M.apply(this,arguments)}),[P,L,k]);function M(){return(M=Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k){e.next=3;break}return e.abrupt("return");case 3:if(k.length){e.next=7;break}return x(l.a.FULFILLED),j([]),e.abrupt("return");case 7:if(x(l.a.PENDING),A(void 0),!L){e.next=11;break}throw L;case 11:P&&(j(k.map((function(e,t){return[e,P[t]]}))),x(l.a.FULFILLED)),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(0),t=e.t0,j(h),A(t),x(l.a.REJECTED);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){e.length&&k&&t&&n&&D&&F()}),[F,e.length,t,n,k,D]),Object(i.useEffect)((function(){if(e.length&&D){var t=e.filter(D.utils.isHexStrict);C(t)}}),[e,D]),Object(i.useEffect)((function(){if(t&&n&&null!==k&&void 0!==k&&k.length){var e=k.map((function(e){return[n,t,[e]]}));T(e)}}),[t,n,k]),{daoProposals:d,daoProposalsStatus:v,daoProposalsError:E}}var v=n(506),x=n(33),g=n(3),N=n(17),E=n(23),A=n(12),w=n(36),y=n(9);function k(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.abi})),n=Object(o.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.contractAddress})),c=Object(i.useState)([]),u=Object(a.a)(c,2),d=u[0],j=u[1],f=Object(i.useState)(l.a.STANDBY),h=Object(a.a)(f,2),m=h[0],k=h[1],C=Object(i.useState)(),S=Object(a.a)(C,2),_=S[0],I=S[1],T=Object(i.useState)([]),D=Object(a.a)(T,2),R=D[0],P=D[1],L=null===t||void 0===t?void 0:t.find((function(e){return"getPriorAmount"===e.name})),F=Object(O.g)().web3Instance,M=Object(w.e)().isMountedRef,B=Object(p.useQuery)(["votingResultsToSet",R],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&L&&R.length&&F){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all(R.map(function(){var e=Object(r.a)(s.a.mark((function e(t){var r,a,c,o,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===t||void 0===t?void 0:t.msg.payload.snapshot,(c=null===t||void 0===t?void 0:t.idInSnapshot)&&a){e.next=4;break}return e.abrupt("return");case 4:if((o=null===t||void 0===t||null===(r=t.votes)||void 0===r?void 0:r.map((function(e){var t=e[Object.keys(e)[0]];return[t.msg.payload.metadata.memberAddress,t.msg.payload.choice]})))&&o.length){e.next=7;break}return e.abrupt("return");case 7:return i=Object.entries(Object.fromEntries(o)),e.prev=8,e.next=11,U({bankAddress:n,getPriorAmountABI:L,snapshot:a,voterAddressesAndChoices:i,web3Instance:F});case 11:return u=e.sent,e.abrupt("return",[c,u]);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!n&&!!L&&!!R.length&&!!F}),G=B.data,V=B.error,U=Object(i.useCallback)((function(e){return W.apply(this,arguments)}),[]),Y=Object(i.useCallback)((function(){return H.apply(this,arguments)}),[n,L,M,R.length,G,V,F]);function H(){return(H=Object(r.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&L&&R.length&&F){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,k(l.a.PENDING),!V){e.next=6;break}throw V;case 6:if(!G){e.next=13;break}if(t=G.filter((function(e){return e})),M.current){e.next=10;break}return e.abrupt("return");case 10:k(l.a.FULFILLED),j(t),I(void 0);case 13:e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(2),M.current){e.next=19;break}return e.abrupt("return");case 19:r=e.t0,k(l.a.REJECTED),j([]),I(r);case 23:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function W(){return W=Object(r.a)(s.a.mark((function e(t){var n,r,c,o,i,u,d,l,j,O,f,p,h,m,w,k,C;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bankAddress,r=t.getPriorAmountABI,c=t.snapshot,o=t.voterAddressesAndChoices,i=t.web3Instance,e.prev=1,u={},Object(g.a)(u,y.e.Yes,{percentage:0,units:0}),Object(g.a)(u,y.e.No,{percentage:0,units:0}),Object(g.a)(u,"totalUnits",0),d=u,l=[n,r,[A.x,A.y,c.toString()]],j=[n,r,[A.p,A.y,c.toString()]],O=o.map((function(e){var t=Object(a.a)(e,1)[0];return[n,r,[t,A.y,c.toString()]]})),f=[l,j].concat(Object(x.a)(O)),e.next=9,Object(b.l)({calls:f,web3Instance:i});case 9:return p=e.sent,h=Object(v.a)(p),m=h[0],w=h[1],k=h.slice(2),C=Object(N.toBN)(m).sub(Object(N.toBN)(w)),k.forEach((function(e,t){var n=E.VoteChoicesIndex[o[t][1]]===E.VoteChoicesIndex[E.VoteChoicesIndex.Yes]?y.e.Yes:y.e.No;d[n].units+=Number(e)})),d[y.e.Yes].percentage=d[y.e.Yes].units/Number(C)*100,d[y.e.No].percentage=d[y.e.No].units/Number(C)*100,d.totalUnits=Number(C),e.abrupt("return",d);case 22:throw e.prev=22,e.t0=e.catch(1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,22]])}))),W.apply(this,arguments)}return Object(i.useEffect)((function(){Y()}),[Y]),Object(i.useEffect)((function(){var t=Array.isArray(e)?e:[e];P(t)}),[e]),{offchainVotingResults:d,offchainVotingResultsError:_,offchainVotingResultsStatus:m}}var C=n(6),S=n(48),_=n(57),I=[];function T(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),c=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),u=Object(O.g)().web3Instance,d=Object(i.useState)(I),j=Object(a.a)(d,2),f=j[0],p=j[1],h=Object(i.useState)(),m=Object(a.a)(h,2),v=m[0],x=m[1],g=Object(i.useState)(l.a.STANDBY),N=Object(a.a)(g,2),E=N[0],A=N[1],w=Object(i.useCallback)((function(){return y.apply(this,arguments)}),[e,c,t,u]);function y(){return y=Object(r.a)(s.a.mark((function a(){var o,i,d,j,O,f,h,m,v,g,N,E,w;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.length&&c&&t&&u){a.next=2;break}return a.abrupt("return");case 2:if((o=e.filter(u.utils.isHexStrict)).length){a.next=7;break}return p(I),A(l.a.FULFILLED),a.abrupt("return");case 7:if(a.prev=7,i=c.find((function(e){return"votingAdapter"===e.name}))){a.next=11;break}throw new Error('No "votingAdapter" ABI function was found in the DAO registry ABI.');case 11:return d=o.map((function(e){return[t,i,[e]]})),A(l.a.PENDING),a.next=15,Object(b.l)({calls:d,web3Instance:u});case 15:return j=a.sent,a.next=18,n.e(0).then(n.t.bind(null,1058,3));case 18:if(O=a.sent,f=O.default,h=f.find((function(e){return"getAdapterName"===e.name}))){a.next=23;break}throw new Error('No "getAdapterName" ABI function was found in the IVoting ABI.');case 23:if(m=o.filter((function(e,t){return j[t]!==S.a})),(v=j.filter((function(e){return e!==S.a}))).length){a.next=29;break}return p(I),A(l.a.FULFILLED),a.abrupt("return");case 29:return g=v.map((function(e){return[e,h,[]]})),a.next=32,Object(b.l)({calls:g,web3Instance:u});case 32:return N=a.sent,a.next=35,Promise.all(m.map(function(){var e=Object(r.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.d)(N[n]);case 2:return r=e.sent,a=v[n],e.abrupt("return",[t,{votingAdapterName:N[n],votingAdapterAddress:a,getVotingAdapterABI:function(){return r},getWeb3VotingAdapterContract:function(){return new u.eth.Contract(r,a)}}]);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 35:E=a.sent,p(E),A(l.a.FULFILLED),a.next=46;break;case 40:a.prev=40,a.t0=a.catch(7),w=a.t0,A(l.a.REJECTED),p([]),x(w);case 46:case"end":return a.stop()}}),a,null,[[7,40]])}))),y.apply(this,arguments)}return Object(i.useEffect)((function(){w()}),[w]),{proposalsVotingAdapters:f,proposalsVotingAdaptersError:v,proposalsVotingAdaptersStatus:E}}var D="Something went wrong while getting the proposal.",R="Proposal was not found.";function P(e,t){var n,c=Object(i.useState)(),o=Object(a.a)(c,1)[0],u=Object(i.useState)(),d=Object(a.a)(u,2),b=d[0],j=d[1],O=Object(i.useState)(),f=Object(a.a)(O,2),h=f[0],m=f[1],v=Object(i.useState)(!1),x=Object(a.a)(v,2),g=x[0],N=x[1],y=Object(i.useState)(),k=Object(a.a)(y,2),S=k[0],_=k[1],I=Object(i.useState)(l.a.STANDBY),P=Object(a.a)(I,2),L=P[0],F=P[1],M=Object(i.useState)([e]),B=Object(a.a)(M,2),G=B[0],V=B[1],U=Object(i.useState)(l.a.STANDBY),Y=Object(a.a)(U,2),H=Y[0],W=Y[1],K=Object(i.useState)(),z=Object(a.a)(K,2),q=z[0],J=z[1],Q=Object(w.a)(),X=Q.abortController,$=Q.isMountedRef,Z=Object(w.b)(),ee=Object(a.a)(Z,2),te=ee[0],ne=ee[1],re=T(G),ae=re.proposalsVotingAdapters,ce=re.proposalsVotingAdaptersError,se=re.proposalsVotingAdaptersStatus,oe=Object(p.useQueryClient)(),ie=Object(i.useCallback)((function(){return je.apply(this,arguments)}),[null===X||void 0===X?void 0:X.signal,e,$]),ue=Object(i.useCallback)((function(){return Oe.apply(this,arguments)}),[null===X||void 0===X?void 0:X.signal,e,$,t]),de=Object(i.useCallback)((function(){return fe.apply(this,arguments)}),[ie,ue]),le=h?E.SnapshotType.proposal:b?E.SnapshotType.draft:void 0,be=b||h?{daoProposal:o,daoProposalVotingAdapter:null===(n=ae[0])||void 0===n?void 0:n[1],getCommonSnapshotProposalData:function(){switch(le){case E.SnapshotType.draft:return b;case E.SnapshotType.proposal:return h;default:return}},refetchProposalOrDraft:function(){ne({type:"increment"})},snapshotDraft:b,snapshotProposal:h,snapshotType:le}:void 0;function je(){return(je=Object(r.a)(s.a.mark((function t(){var n,r,a,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,F(l.a.PENDING),t.next=4,fetch("".concat(A.v,"/api/").concat(A.w,"/draft/").concat(e),{signal:null===X||void 0===X?void 0:X.signal});case 4:if((n=t.sent).ok){t.next=7;break}throw new Error(D);case 7:return t.next=9,n.json();case 9:if(r=t.sent,$.current){t.next=12;break}return t.abrupt("return");case 12:if(r&&Object.keys(r).length){t.next=15;break}throw N(!0),new Error(R);case 15:return a=Object.keys(r)[0],c=Object(C.a)({idInDAO:a,idInSnapshot:a},r[a]),F(l.a.FULFILLED),j(c),t.abrupt("return",c);case 22:if(t.prev=22,t.t0=t.catch(0),$.current){t.next=26;break}return t.abrupt("return");case 26:o=t.t0,F(l.a.REJECTED),_(o);case 29:case"end":return t.stop()}}),t,null,[[0,22]])})))).apply(this,arguments)}function Oe(){return(Oe=Object(r.a)(s.a.mark((function n(){var r,a,c,o,i,u,d;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,F(l.a.PENDING),n.next=4,fetch("".concat(A.v,"/api/").concat(A.w,"/proposal/").concat(e,"?searchUniqueDraftId=true&includeVotes=true"),{signal:null===X||void 0===X?void 0:X.signal});case 4:if((a=n.sent).ok){n.next=9;break}if(t!==E.SnapshotType.proposal){n.next=8;break}throw new Error(D);case 8:return n.abrupt("return");case 9:return n.next=11,a.json();case 11:if(c=n.sent,$.current){n.next=14;break}return n.abrupt("return");case 14:if(c&&Object.keys(c).length){n.next=19;break}if(t!==E.SnapshotType.proposal){n.next=18;break}throw N(!0),new Error(R);case 18:return n.abrupt("return");case 19:return o=Object.keys(c)[0],i=(null===(r=c[o])||void 0===r?void 0:r.data.erc712DraftHash)||o,u=Object(C.a)({idInDAO:i,idInSnapshot:o},c[o]),F(l.a.FULFILLED),m(u),n.abrupt("return",u);case 27:if(n.prev=27,n.t0=n.catch(0),$.current){n.next=31;break}return n.abrupt("return");case 31:d=n.t0,F(l.a.REJECTED),_(d);case 34:case"end":return n.stop()}}),n,null,[[0,27]])})))).apply(this,arguments)}function fe(){return(fe=Object(r.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:if(t=e.sent){e.next=9;break}return e.next=6,ie();case 6:return n=e.sent,j(n),e.abrupt("return");case 9:m(t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){if(null!==X&&void 0!==X&&X.signal)switch(t){case E.SnapshotType.draft:ie();break;case E.SnapshotType.proposal:ue();break;default:de()}}),[null===X||void 0===X?void 0:X.signal,ie,ue,de,te,t]),Object(i.useEffect)((function(){0!==te&&V([e])}),[e,te]),Object(i.useEffect)((function(){function e(){return(e=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==te){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,oe.resetQueries();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[oe,te]),Object(i.useEffect)((function(){var e=l.a.STANDBY,t=l.a.PENDING,n=l.a.FULFILLED,r=l.a.REJECTED,a=[L,se];L!==e?a.some((function(e){return e===t}))&&0===te?W(t):a.every((function(e){return e===n}))?W(n):L!==n||se!==n||ae.length?a.some((function(e){return e===r}))&&W(r):W(n):W(e)}),[L,ae.length,se,te]),Object(i.useEffect)((function(){J([S,ce].find((function(e){return e})))}),[S,ce]),{proposalData:be,proposalError:q,proposalNotFound:g,proposalStatus:H}}var L=n(40);var F=[];function M(e){return B.apply(this,arguments)}function B(){return(B=Object(r.a)(s.a.mark((function e(t){var n,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(A.v,"/api/").concat(A.w),e.next=4,fetch("".concat(n,"/drafts/").concat(t));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot drafts.");case 7:return e.next=9,r.json();case 9:return c=e.sent,o=Object.entries(c).filter((function(e){var t=Object(a.a)(e,2);t[0];return!1===t[1].data.sponsored})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function G(e){return V.apply(this,arguments)}function V(){return(V=Object(r.a)(s.a.mark((function e(t){var n,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(A.v,"/api/").concat(A.w),e.next=4,fetch("".concat(n,"/proposals/").concat(t,"?includeVotes=true"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot proposals.");case 7:return e.next=9,r.json();case 9:return c=e.sent,o=Object.entries(c).map((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return[r.data.erc712DraftHash||n,r]})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function U(e){var t=e.adapterName,n=e.includeProposalsExistingOnlyOffchain,c=void 0!==n&&n,u=Object(i.useState)(),d=Object(a.a)(u,2),f=d[0],h=d[1],v=Object(i.useState)(F),N=Object(a.a)(v,2),A=N[0],w=N[1],y=Object(i.useState)(l.a.STANDBY),k=Object(a.a)(y,2),S=k[0],_=k[1],I=Object(i.useState)(),D=Object(a.a)(I,2),R=D[0],P=D[1],B=Object(i.useState)(F),V=Object(a.a)(B,2),U=V[0],H=V[1],W=Object(i.useState)(F),K=Object(a.a)(W,2),z=K[0],q=K[1],J=Object(i.useState)(l.a.STANDBY),Q=Object(a.a)(J,2),X=Q[0],$=Q[1],Z=Object(i.useState)(),ee=Object(a.a)(Z,2),te=ee[0],ne=ee[1],re=Object(o.c)((function(e){return e.contracts})),ae=m(Object(i.useMemo)((function(){return A.map((function(e){return e[0]}))}),[A])),ce=ae.daoProposals,se=ae.daoProposalsError,oe=ae.daoProposalsStatus,ie=T(U),ue=ie.proposalsVotingAdapters,de=ie.proposalsVotingAdaptersError,le=ie.proposalsVotingAdaptersStatus,be=Y(ue),je=be.proposalsVotingState,Oe=be.proposalsVotingStateError,fe=be.proposalsVotingStateStatus,pe=function(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),n=Object(i.useState)([]),c=Object(a.a)(n,2),u=c[0],d=c[1],j=Object(i.useState)(),f=Object(a.a)(j,2),h=f[0],m=f[1],v=Object(i.useState)(l.a.STANDBY),x=Object(a.a)(v,2),N=x[0],E=x[1],A=Object(i.useState)(),w=Object(a.a)(A,2),y=w[0],k=w[1],C=Object(O.g)().web3Instance,S=Object(p.useQuery)(["votesDataCalls",y],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all(y.map(function(){var e=Object(r.a)(s.a.mark((function e(n){var r,c,o,i,u,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(a.a)(n,2),c=r[0],o=r[1],i=o.votingAdapterAddress,u=o.getVotingAdapterABI,d=o.votingAdapterName,e.t0=i,e.next=4,B(d,u());case 4:return e.t1=e.sent,e.t2=[t,c],e.abrupt("return",[e.t0,e.t1,e.t2]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!e.length&&!!y&&!!t&&!!C}),_=S.data,I=S.error,T=Object(p.useQuery)(["votesDataResults",null===_||void 0===_?void 0:_.length],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==_&&void 0!==_&&_.length&&C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.l)({calls:_,web3Instance:C});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!(null===_||void 0===_||!_.length)&&!!C}),D=T.data,R=T.error,P=Object(i.useCallback)((function(){return F.apply(this,arguments)}),[y,_,I,D,R]);function F(){return(F=Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:if(y.length){e.next=6;break}return E(l.a.FULFILLED),d([]),e.abrupt("return");case 6:if(e.prev=6,E(l.a.PENDING),!I){e.next=10;break}throw I;case 10:if(!_){e.next=14;break}if(!R){e.next=13;break}throw R;case 13:D&&(d(y.map((function(e,t){var n=Object(a.a)(e,2),r=n[0],c=n[1].votingAdapterName;return[r,Object(g.a)({},c,M(c,D[t]))]}))),E(l.a.FULFILLED));case 14:e.next=22;break;case 16:e.prev=16,e.t0=e.catch(6),t=e.t0,d([]),E(l.a.REJECTED),m(t);case 22:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}function M(e,t){try{switch(e){case L.c.OffchainVotingContract:return{snapshot:t[0],reporter:t[1],resultRoot:t[2],nbYes:t[3],nbNo:t[4],startingTime:t[5],gracePeriodStartingTime:t[6],isChallenged:t[7],stepRequested:t[8],forceFailed:t[9],fallbackVotesCount:t[10]};case L.c.VotingContract:return t;default:throw new Error('No voting adapter name was found for "'.concat(e,'".'))}}catch(n){throw n}}function B(e,t){return G.apply(this,arguments)}function G(){return(G=Object(r.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next=e.t0===L.c.OffchainVotingContract?4:e.t0===L.c.VotingContract?8:12;break;case 4:if(r=n.find((function(e){return"getVote"===e.name}))){e.next=7;break}throw new Error('No "votes" function ABI was found for "'.concat(t,'".'));case 7:return e.abrupt("return",r);case 8:if(a=n.find((function(e){return"votes"===e.name}))){e.next=11;break}throw new Error('No "votes" function ABI was found for "'.concat(t,'".'));case 11:return e.abrupt("return",a);case 12:throw new Error('No voting adapter name was found for "'.concat(t,'".'));case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(0),e.t1;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){e.length&&y&&t&&C&&P()}),[P,e.length,t,y,C]),Object(i.useEffect)((function(){if(e.length&&C){var t=e.filter((function(e){var t=Object(a.a)(e,1)[0];return C.utils.isHexStrict(t)}));k(t)}}),[e,C]),{proposalsVotes:u,proposalsVotesError:h,proposalsVotesStatus:N}}(ue),he=pe.proposalsVotes,me=pe.proposalsVotesError,ve=pe.proposalsVotesStatus,xe=Object(p.useQuery)(["snapshotDraftEntries",f],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,M(f);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!f}),ge=xe.data,Ne=xe.error,Ee=Object(p.useQuery)(["snapshotProposalEntries",f],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,G(f);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!!f}),Ae=Ee.data,we=Ee.error,ye=Ne||we,ke=Object(i.useCallback)((function(){return Ce.apply(this,arguments)}),[ye,ge,Ae]);function Ce(){return(Ce=Object(r.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_(l.a.PENDING),P(void 0),!ye){e.next=5;break}throw ye;case 5:if(!ge||!Ae){e.next=12;break}if((t=[].concat(Object(x.a)(ge),Object(x.a)(Ae))).length){e.next=10;break}return _(l.a.FULFILLED),e.abrupt("return");case 10:w(t),_(l.a.FULFILLED);case 12:e.next=20;break;case 14:e.prev=14,e.t0=e.catch(0),n=e.t0,_(l.a.REJECTED),w(F),P(n);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){var e,n,r=null===(e=Object.entries(re).find((function(e){var n=Object(a.a)(e,2),r=(n[0],n[1]);return(null===r||void 0===r?void 0:r.adapterOrExtensionName)===t})))||void 0===e||null===(n=e[1])||void 0===n?void 0:n.contractAddress;h(r)}),[f,t,re]),Object(i.useEffect)((function(){f&&ke()}),[f,ke]),Object(i.useEffect)((function(){if(ce.length)return H(c?ce.map((function(e){return Object(a.a)(e,1)[0]})):ce.filter((function(e){var t=Object(a.a)(e,2);t[0];return"0"!==t[1].flags})).map((function(e){return Object(a.a)(e,1)[0]})))}),[ce,c]),Object(i.useEffect)((function(){if(X===l.a.FULFILLED){var e=U.map((function(e){var t,n,r,c=ce.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(n)===Object(j.j)(e)}))||[],s=Object(a.a)(c,2)[1],o=A.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(n)===Object(j.j)(e)}))||[],i=Object(a.a)(o,2),u=i[0],d=i[1],l=(null===d||void 0===d?void 0:d.msg.type)===E.SnapshotType.draft,b=u&&l?Object(C.a)(Object(C.a)({},d),{},{idInDAO:e,idInSnapshot:u}):void 0,O=u&&!l?Object(C.a)(Object(C.a)({},d),{},{idInDAO:e,idInSnapshot:u}):void 0,f=null===(t=ue.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(n)===Object(j.j)(e)})))||void 0===t?void 0:t[1],p=null===(n=je.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(n)===Object(j.j)(e)})))||void 0===n?void 0:n[1];return{daoProposal:s,daoProposalVote:null===(r=he.find((function(t){var n=Object(a.a)(t,1)[0];return Object(j.j)(e)===Object(j.j)(n)})))||void 0===r?void 0:r[1],daoProposalVotingAdapter:f,daoProposalVotingState:p,idInDAO:e,snapshotDraft:b,snapshotProposal:O,snapshotType:l?E.SnapshotType.draft:E.SnapshotType.proposal,getCommonSnapshotProposalData:function(){},refetchProposalOrDraft:function(){}}})).filter((function(e){return e.snapshotDraft||e.snapshotProposal}));q(e)}}),[U,ce,X,he,ue,je,A]),Object(i.useEffect)((function(){var e=l.a.STANDBY,t=l.a.PENDING,n=l.a.FULFILLED,r=l.a.REJECTED,a=[oe,le,fe,ve,S];S!==e?a.some((function(e){return e===t}))?$(t):a.every((function(e){return e===n}))?$(n):(S!==n||A.length)&&(le!==n||ue.length)?a.some((function(e){return e===r}))&&$(r):$(n):$(e)}),[U.length,oe,ve,ue,le,fe,A.length,S]),Object(i.useEffect)((function(){ne([se,me,de,Oe,R].find((function(e){return e})))}),[se,me,de,Oe,R]),{proposals:z,proposalsError:te,proposalsStatus:X}}function Y(e){var t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),c=Object(i.useState)([]),u=Object(a.a)(c,2),d=u[0],j=u[1],f=Object(i.useState)(),h=Object(a.a)(f,2),m=h[0],v=h[1],x=Object(i.useState)(l.a.STANDBY),g=Object(a.a)(x,2),N=g[0],E=g[1],A=Object(i.useState)(),w=Object(a.a)(A,2),y=w[0],k=w[1],C=Object(i.useState)(),S=Object(a.a)(C,2),_=S[0],I=S[1],T=Object(i.useState)(),D=Object(a.a)(T,2),R=D[0],P=D[1],L=Object(O.g)().web3Instance,F=Object(p.useQuery)(["proposalsVotingStateResult",_],Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==_&&void 0!==_&&_.length&&L){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.l)({calls:_,web3Instance:L});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),{enabled:!(null===_||void 0===_||!_.length)&&!!L}),M=F.data,B=F.error,G=Object(i.useCallback)((function(){return V.apply(this,arguments)}),[e.length,_,M,B,t,R,y,L]);function V(){return(V=Object(r.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&e.length&&R&&L){n.next=2;break}return n.abrupt("return");case 2:if(R.length){n.next=5;break}return E(l.a.FULFILLED),n.abrupt("return");case 5:if(n.prev=5,!y){n.next=8;break}throw y;case 8:if(_){n.next=10;break}return n.abrupt("return");case 10:if(E(l.a.PENDING),!B){n.next=13;break}throw B;case 13:M&&(E(l.a.FULFILLED),j(R.map((function(e,t){return[Object(a.a)(e,1)[0],M[t]]})))),n.next=22;break;case 16:n.prev=16,n.t0=n.catch(5),r=n.t0,E(l.a.REJECTED),j([]),v(r);case 22:case"end":return n.stop()}}),n,null,[[5,16]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){G()}),[G]),Object(i.useEffect)((function(){if(e.length&&L){var t=e.filter((function(e){var t=Object(a.a)(e,1)[0];return L.utils.isHexStrict(t)}));P(t)}}),[e,L]),Object(i.useEffect)((function(){function e(){return(e=Object(r.a)(s.a.mark((function e(){var r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!==R&&void 0!==R&&R.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(0).then(n.t.bind(null,1058,3));case 4:if(r=e.sent.default,c=r.find((function(e){return"voteResult"===e.name}))){e.next=9;break}return k(new Error('No "voteResult" ABI function was found on the "IVoting" contract.')),e.abrupt("return");case 9:o=R.map((function(e){var n=Object(a.a)(e,2),r=n[0];return[n[1].votingAdapterAddress,c,[t,r]]})),I(o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,R]),{proposalsVotingState:d,proposalsVotingStateError:m,proposalsVotingStateStatus:N}}var H=n(42),W=n(46),K=H.c.Completed,z=H.c.OffchainVotingGracePeriod,q=H.c.OffchainVotingSubmitResult,J=H.c.OffchainVoting,Q=H.c.Process,X=H.c.Sponsor,$=H.c.Submit,Z="production"===A.i?15e3:5e3;function ee(e){var t=e.countdownVotingEndSeconds,n=void 0===t?0:t,c=e.countdownVotingStartSeconds,u=void 0===c?0:c,d=e.pollInterval,l=void 0===d?Z:d,f=e.proposal,p=e.useCountdownToCheckInVoting,h=void 0!==p&&p,m=Object(O.g)().web3Instance,v=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),x=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),g=Object(i.useState)(),E=Object(a.a)(g,2),A=E[0],y=E[1],k=Object(i.useState)(!1),C=Object(a.a)(k,2),I=C[0],T=C[1],D=Object(i.useState)(),R=Object(a.a)(D,2),P=R[0],L=R[1],F=Object(i.useState)(),M=Object(a.a)(F,2),B=M[0],G=M[1],V=Object(i.useState)(),U=Object(a.a)(V,2),Y=U[0],ee=U[1],te=Object(i.useState)(),ne=Object(a.a)(te,2),re=ne[0],ae=ne[1],ce=Object(i.useRef)(),se=Object(i.useRef)(!1),oe=Object(w.h)(u,n),ie=oe.hasTimeStarted,ue=oe.hasTimeEnded,de=oe.timeStartEndInitReady,le=I&&(!h||de),be=f.daoProposalVotingAdapter,je=f.snapshotDraft,Oe=f.snapshotProposal,fe=(null===je||void 0===je?void 0:je.idInDAO)||(null===Oe||void 0===Oe?void 0:Oe.idInDAO),pe=!!P&&Object(_.e)(H.b.EXISTS,P.flags),he=!!P&&Object(_.e)(H.b.SPONSORED,P.flags),me=!!P&&Object(_.e)(H.b.PROCESSED,P.flags),ve=null===be||void 0===be?void 0:be.votingAdapterAddress,xe=null===be||void 0===be?void 0:be.getVotingAdapterABI(),ge=Object(N.isAddress)((null===B||void 0===B?void 0:B.reporter)||"")&&Object(j.j)((null===B||void 0===B?void 0:B.reporter)||"")!==S.a,Ne=h?ie&&!ue:W.b[Y||""]===W.b[W.b.IN_PROGRESS],Ee=W.b[Y||""]===W.b[W.b.GRACE_PERIOD],Ae=Object(i.useCallback)((function(){return we.apply(this,arguments)}),[be,x,v,xe,ve,fe,m]);function we(){return(we=Object(r.a)(s.a.mark((function e(){var t,n,r,c,o,i,u,d,l,j,O,f,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x&&v&&fe&&m){e.next=3;break}return e.abrupt("return");case 3:if(t=x.filter((function(e){return"proposals"===e.name}))[0],be){e.next=13;break}return e.next=7,Object(b.l)({calls:[[v,t,[fe]]],web3Instance:m});case 7:return n=e.sent,r=Object(a.a)(n,1),c=r[0],L(c),T(!0),e.abrupt("return",c);case 13:if(xe&&ve){e.next=15;break}return e.abrupt("return");case 15:return o=xe.filter((function(e){return"voteResult"===e.name}))[0],i=xe.filter((function(e){return"getVote"===e.name}))[0],u=[[v,t,[fe]],[ve,i,[v,fe]],[ve,o,[v,fe]]],e.next=20,Object(b.l)({calls:u,web3Instance:m});case 20:return d=e.sent,l=Object(a.a)(d,3),j=l[0],O=l[1],f=l[2],p={snapshot:O[0],reporter:O[1],resultRoot:O[2],nbYes:O[3],nbNo:O[4],startingTime:O[5],gracePeriodStartingTime:O[6],isChallenged:O[7],stepRequested:O[8],forceFailed:O[9],fallbackVotesCount:O[10]},L(j),G(p),ee(f),T(!0),e.abrupt("return",{proposal:j,voteResult:f,votes:O});case 33:throw e.prev=33,e.t0=e.catch(0),e.t0;case 36:case"end":return e.stop()}}),e,null,[[0,33]])})))).apply(this,arguments)}function ye(){ce.current&&(clearInterval(ce.current),ce.current=void 0)}return Object(i.useEffect)((function(){I||Ae().catch((function(e){ae(e)}))}),[Ae,I]),Object(i.useEffect)((function(){me&&(se.current=!0),ye();var e=setInterval(Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,se.current&&ye(),e.next=4,Ae();case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),t=e.t0,ye(),ae(t);case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),l);ce.current=e}),[me,l,Ae]),Object(i.useEffect)((function(){return me&&ye(),function(){ye()}}),[me]),Object(i.useEffect)((function(){if(le){var e=void 0===A;pe||he||me||A!==$&&!e?!pe||Ne||A!==$&&!e?!he||!Ne||ge||A!==$&&A!==X&&!e?!he||Ne||ge||A!==J&&!e?he&&!Ne&&ge&&Ee&&(A===q||e)?y(z):!he||Ne||!ge||Ee||A!==z&&!e?!me||A!==Q&&!e||y(K):y(Q):y(q):y(J):y(X):y($)}else y(void 0)}),[pe,me,he,le,Ne,Ee,ge,A]),{daoProposal:P,daoProposalVote:B,daoProposalVoteResult:Y,proposalFlowStatusError:re,status:A,stopPollingForStatus:ye}}var te=n(62),ne=n(100);function re(){var e=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),t=Object(o.c)((function(e){return e.contracts})),n=Object(o.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.memberAddress})),c=Object(ne.a)(),u=c.account,d=c.provider,l=c.web3Instance,j=Object(i.useState)(),O=Object(a.a)(j,2),f=O[0],p=O[1],h=Object(i.useState)(),m=Object(a.a)(h,2),v=m[0],x=m[1],g=Object(i.useState)(y.f.STANDBY),N=Object(a.a)(g,2),w=N[0],k=N[1];function _(){return(_=Object(r.a)(s.a.mark((function r(a){var c,o,i,j,O,f,h,m,v,g,N,w,_,I,T,D,R,P,L,F,M,B,G;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=a.partialVoteData,o=a.adapterName,i=a.proposalIdInDAO,j=a.proposalIdInSnapshot,r.prev=1,l){r.next=4;break}throw new Error("No Web3 instance was found.");case 4:if(u){r.next=6;break}throw new Error("No account was found.");case 6:if(n){r.next=8;break}throw new Error("No member address was found.");case 8:if(e){r.next=10;break}throw new Error('No "DaoRegistry" address was found.');case 10:if(A.v){r.next=12;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 12:if(A.w){r.next=14;break}throw new Error('No Snapshot "SPACE" was found.');case 14:return k(y.f.AWAITING_CONFIRM),O=o?Object(b.d)(o,t):S.a,f=c.choice,h=c.metadata,m=void 0===h?{}:h,r.next=19,Object(E.getSpace)(A.v,A.w);case 19:return v=r.sent,g=v.data,N={chainId:A.g,choice:f,metadata:Object(C.a)(Object(C.a)({},m),{},{memberAddress:n})},w={proposalId:i,space:A.w,token:g.token},r.next=25,Object(E.buildVoteMessage)(N,w,A.v);case 25:return _=r.sent,I=Object(E.prepareVoteMessage)({timestamp:_.timestamp,payload:{proposalId:_.payload.proposalId,choice:E.VoteChoicesIndex[f]}}),T=Object(E.getDomainDefinition)(Object(C.a)(Object(C.a)({},I),{},{type:E.SnapshotType.vote}),e,O,A.g),D=T.domain,R=T.types,P=JSON.stringify({types:R,domain:D,primaryType:te.a,message:I}),r.next=31,Object(E.signMessage)(d,u,P);case 31:return L=r.sent,k(y.f.PENDING),r.next=35,Object(E.submitMessage)(A.v,u,Object(C.a)(Object(C.a)({},_),{},{payload:Object(C.a)(Object(C.a)({},_.payload),{},{proposalId:j})}),L,{actionId:D.actionId,chainId:D.chainId,verifyingContract:D.verifyingContract,message:I});case 35:return F=r.sent,M=F.data,B={data:_,signature:L,uniqueId:M.uniqueId},k(y.f.FULFILLED),p(B),r.abrupt("return",B);case 43:throw r.prev=43,r.t0=r.catch(1),G=r.t0,k(y.f.REJECTED),x(G),r.t0;case 49:case"end":return r.stop()}}),r,null,[[1,43]])})))).apply(this,arguments)}return{signAndSendVote:function(e){return _.apply(this,arguments)},voteData:f,voteDataError:v,voteDataStatus:w}}function ae(){var e=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),t=Object(o.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.instance})),n=Object(o.c)((function(e){return e.contracts})),c=Object(ne.a)(),u=c.account,d=c.provider,l=c.web3Instance,j=Object(i.useState)(),O=Object(a.a)(j,2),f=O[0],p=O[1],h=Object(i.useState)(),m=Object(a.a)(h,2),v=m[0],x=m[1],g=Object(i.useState)(y.f.STANDBY),N=Object(a.a)(g,2),w=N[0],k=N[1];function _(e){return I.apply(this,arguments)}function I(){return(I=Object(r.a)(s.a.mark((function e(n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A.v){e.next=2;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 2:if(l){e.next=4;break}throw new Error("No Web3 instance was found.");case 4:return e.next=6,l.eth.getBlockNumber();case 6:return r=e.sent,e.t0=parseInt,e.next=10,Object(b.g)(t,y.b.offchainVotingVotingPeriod);case 10:return e.t1=e.sent,a=(0,e.t0)(e.t1),e.next=14,Object(E.buildProposalMessage)(Object(C.a)(Object(C.a)({},n),{},{votingTimeSeconds:a,snapshot:r}),A.v);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(r.a)(s.a.mark((function t(r){var a,c,o,i,j,O,f,h,m,v,g,N,w,I,T,D,R,P,L,F,M,B,G;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.partialProposalData,c=r.adapterAddress,o=r.adapterName,i=r.type,t.prev=1,u){t.next=4;break}throw new Error("No account was found to send.");case 4:if(l){t.next=6;break}throw new Error("No Web3 instance was found.");case 6:if(e){t.next=8;break}throw new Error('No "DaoRegistry" address was found.');case 8:if(A.v){t.next=10;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 10:if(A.w){t.next=12;break}throw new Error('No Snapshot "SPACE" was found.');case 12:if(i===E.SnapshotType.draft||i===E.SnapshotType.proposal){t.next=14;break}throw new Error('Handling for type "vote" is not implemented.');case 14:return k(y.f.AWAITING_CONFIRM),j=c||(o?Object(b.d)(o,n):S.a),O=a.body,f=a.name,h=a.metadata,m=a.timestamp,t.next=19,Object(E.getSpace)(A.v,A.w);case 19:if(v=t.sent,g=v.data,N={name:f,body:O,metadata:h,token:g.token,space:A.w},i!==E.SnapshotType.draft){t.next=28;break}return t.next=25,Object(E.buildDraftMessage)(N,A.v);case 25:t.t0=t.sent,t.next=31;break;case 28:return t.next=30,_(Object(C.a)(Object(C.a)({},N),{},{timestamp:m}));case 30:t.t0=t.sent;case 31:return w=t.t0,I=i===E.SnapshotType.draft?Object(E.prepareDraftMessage)(w):Object(E.prepareProposalMessage)(w),T=Object(E.getDomainDefinition)(Object(C.a)(Object(C.a)({},I),{},{type:i}),e,j,A.g),D=T.domain,R=T.types,P=JSON.stringify({types:R,domain:D,primaryType:te.a,message:I}),t.next=37,Object(E.signMessage)(d,u,P);case 37:return L=t.sent,k(y.f.PENDING),t.next=41,Object(E.submitMessage)(A.v,u,w,L,{actionId:D.actionId,chainId:D.chainId,verifyingContract:D.verifyingContract,message:I});case 41:return F=t.sent,M=F.data,B={data:w,signature:L,submitter:u,uniqueId:M.uniqueId,uniqueIdDraft:M.uniqueIdDraft||""},k(y.f.FULFILLED),p(B),t.abrupt("return",B);case 49:throw t.prev=49,t.t1=t.catch(1),G=t.t1,k(y.f.REJECTED),x(G),t.t1;case 55:case"end":return t.stop()}}),t,null,[[1,49]])})))).apply(this,arguments)}return{proposalData:f,proposalSignAndSendError:v,proposalSignAndSendStatus:w,signAndSendProposal:function(e){return T.apply(this,arguments)}}}},46:function(e,t,n){"use strict";var r,a;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.TIE=1]="TIE",e[e.PASS=2]="PASS",e[e.NOT_PASS=3]="NOT_PASS",e[e.IN_PROGRESS=4]="IN_PROGRESS",e[e.GRACE_PERIOD=5]="GRACE_PERIOD"}(r||(r={})),function(e){e[e.OK=0]="OK",e[e.WRONG_PROPOSAL_ID=1]="WRONG_PROPOSAL_ID",e[e.INVALID_CHOICE=2]="INVALID_CHOICE",e[e.AFTER_VOTING_PERIOD=3]="AFTER_VOTING_PERIOD",e[e.BAD_SIGNATURE=4]="BAD_SIGNATURE",e[e.INDEX_OUT_OF_BOUND=5]="INDEX_OUT_OF_BOUND",e[e.VOTE_NOT_ALLOWED=6]="VOTE_NOT_ALLOWED"}(a||(a={}))},461:function(e,t,n){"use strict";n.r(t),n.d(t,"isEIP1559Compatible",(function(){return s}));var r=n(5),a=n(2),c=n.n(a);function s(e){return o.apply(this,arguments)}function o(){return(o=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===t||void 0===t?void 0:t.eth.getBlock("latest");case 2:return n=e.sent,e.abrupt("return",void 0!==(null===n||void 0===n?void 0:n.baseFeePerGas));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},476:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),a=n(165),c=n.n(a),s=n(26),o=n(0);function i(e){var t=e.children,n=e.isOpen,a=e.isOpenHandler,i=e.keyProp,u=e.modalClassNames,d=e.styleProps;return Object(o.jsx)(c.a,{ariaHideApp:!1,className:"modal-container ".concat(u),isOpen:n,onRequestClose:function(){a(n)},overlayClassName:"modal-overlay",role:"dialog",style:Object(r.a)({overlay:{zIndex:"99"}},d),children:Object(o.jsx)(s.a,{children:Object(o.jsx)("div",{className:"modal",children:t})})},i)}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="0x0000000000000000000000000000000000000000"},480:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(0),c=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,1081))})),s=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,1082))})),o={injected:Object(a.jsx)(c,{}),walletconnect:Object(a.jsx)(s,{})};function i(e){var t=e.providerName;return t&&o[t]?Object(a.jsx)(r.Suspense,{fallback:null,children:Object(a.jsx)("span",{className:"walletconnect__wallet-icon",children:o[t]})}):null}},493:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"contract ENS","name":"_ens","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address[]","name":"addresses","type":"address[]"}],"name":"getNames","outputs":[{"internalType":"string[]","name":"r","type":"string[]"}],"stateMutability":"view","type":"function"}]')},50:function(e,t,n){"use strict";var r=n(226);n.d(t,"a",(function(){return r.a}))},507:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e){var t=e.url,n=e.isPending,a=void 0!==n&&n;return Object(r.jsx)("small",{children:Object(r.jsx)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:a?"view progress":"view transaction"})})}},53:function(e,t,n){"use strict";var r=n(4),a=n(66),c=n(6),s=n(1),o=n(0),i=["showAfterMs","text","textProps"];function u(e){return Object(o.jsx)("div",Object(c.a)({className:"loader"},e))}t.a=function(e){var t=e.showAfterMs,n=e.text,d=e.textProps,l=Object(a.a)(e,i),b=Object(s.useState)(!1),j=Object(r.a)(b,2),O=j[0],f=j[1];return Object(s.useEffect)((function(){var e=t&&setTimeout((function(){return f(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),(!t||t&&O)&&e.text?Object(o.jsxs)("div",{className:"loader-container",children:[Object(o.jsx)(u,Object(c.a)({},l)),Object(o.jsx)("span",Object(c.a)(Object(c.a)({className:"loader__text"},d),{},{children:n}))]}):(!t||t&&O)&&!e.text?Object(o.jsx)(u,Object(c.a)({},l)):null}},534:function(e,t){},57:function(e,t,n){"use strict";function r(e){var t=e.gracePeriodLength,n=e.gracePeriodStartingTime,r=e.votePeriodLength,a=e.voteStartingTime,c=1e3,s=function(e){return Number(e||0)},o=s(n)*c,i=s(a)*c;return{voteEndMs:i+s(r)*c,voteStartMs:i,gracePeriodEndMs:o+s(t)*c,gracePeriodStartMs:o}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return g}));var a=n(5),c=n(2),s=n.n(c),o=n(12);function i(e){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.v,"/api/").concat(o.w,"/offchain_proof/").concat(t));case 3:if(404!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:if(n.ok){e.next=8;break}throw new Error("Something went wrong while getting the off-chain vote proof.");case 8:return e.next=10,n.json();case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var d=n(4),l=n(23),b=n(11),j=n(9);function O(e,t){var n=(e||[]).find((function(e){return Object.entries(e).find((function(e){var n=Object(d.a)(e,2),r=n[0];n[1];return Object(b.j)(r)===Object(b.j)(t||"")}))}));if(n)return Object.entries(n)[0][1].msg.payload.choice===l.VoteChoicesIndex.Yes?j.e.Yes:j.e.No}var f=n(40);function p(e){return h.apply(this,arguments)}function h(){return(h=Object(a.a)(s.a.mark((function e(t){var r,a,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next=e.t0===f.c.OffchainVotingContract?4:e.t0===f.c.VotingContract?9:14;break;case 4:return e.next=6,n.e(1).then(n.t.bind(null,1064,3));case 6:return r=e.sent,a=r.default,e.abrupt("return",a);case 9:return e.next=11,n.e(2).then(n.t.bind(null,1063,3));case 11:return c=e.sent,o=c.default,e.abrupt("return",o);case 14:throw new Error('No voting adapter name was found for "'.concat(t,'".'));case 15:e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(0),e.t1;case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function m(e,t){return e===Math.log2(Number(t)+1)-1}var v=n(46);function x(e,t){return v.b[t]===v.b[e]}function g(e){return N.apply(this,arguments)}function N(){return(N=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(o.v,"/api/").concat(o.w,"/offchain_proofs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Something went wrong while submitting the off-chain vote proof.");case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},576:function(e,t){},578:function(e,t){},601:function(e,t){},603:function(e,t){},615:function(e,t){},616:function(e,t){},62:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(9),a=[r.e.Yes,r.e.No],c="Message",s=["Submitting\u2026","Working\u2026","DAOing\u2026","Getting closer\u2026","Dreaming of ETH\u2026"]},638:function(e,t){},645:function(e,t){},647:function(e,t){},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(1),c=n(11);function s(e){var t=e.intervalMs,n=e.messages,s=e.useFirstItemStart?n[0]:Object(c.a)(n),o=Object(a.useState)(s),i=Object(r.a)(o,2),u=i[0],d=i[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return d((function(e){return Object(c.a)(n,e)}))}),t);return function(){clearInterval(e)}}),[t,n]),e.render(u)}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(68),a=n.n(r),c=function(e){return a.a.utils.isAddress(e)}},747:function(e,t){},752:function(e,t){},769:function(e,t){},775:function(e,t){},776:function(e,t){},778:function(e,t){},783:function(e,t){},787:function(e,t){},792:function(e,t){},797:function(e,t){},801:function(e,t){},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(1),c=n(0);function s(e){var t=e.showAfterMs,n=Object(a.useState)(!1),s=Object(r.a)(n,2),o=s[0],i=s[1];return Object(a.useEffect)((function(){var e=t&&setTimeout((function(){return i(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),!t||t&&o?Object(c.jsx)("div",{className:"loader--large","aria-label":"Loading content..."}):null}},843:function(e,t){},873:function(e,t){},874:function(e,t){},891:function(e,t){},9:function(e,t,n){"use strict";var r,a,c,s,o,i;n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),function(e){e[e.EXISTS=0]="EXISTS"}(r||(r={})),function(e){e.bank="bank",e.configuration="configuration",e.coupon_onboarding="coupon-onboarding",e.dao_registry="daoRegistry",e.distribute="distribute",e.financing="financing",e.guildkick="guildkick",e.kyc_onboarding="kyc-onboarding",e.managing="managing",e.nft="nft",e.onboarding="onboarding",e.ragequit="ragequit",e.tribute="tribute",e.tribute_nft="tribute-nft",e.voting="voting"}(a||(a={})),function(e){e.bank="bank",e.erc20="erc20-ext",e.nft="nft"}(c||(c={})),function(e){e.kycOnboardingChunkSize="kyc-onboarding.chunkSize",e.kycOnboardingFundTargetAddress="kyc-onboarding.fundTargetAddress",e.kycOnboardingMaximumChunks="kyc-onboarding.maximumChunks",e.kycOnboardingMaxMembers="kyc-onboarding.maxMembers",e.kycOnboardingSignerAddress="kyc-onboarding.signerAddress",e.kycOnboardingTargetAddress="kyc-onboarding.tokenAddr",e.kycOnboardingUnitsPerChunk="kyc-onboarding.unitsPerChunk",e.offchainVotingGracePeriod="offchainvoting.gracePeriod",e.offchainVotingStakingAmount="offchainvoting.stakingAmount",e.offchainVotingVotingPeriod="offchainvoting.votingPeriod",e.onboardingChunkSize="onboarding.chunkSize",e.onboardingMaximumChunks="onboarding.maximumChunks",e.onboardingUnitsPerChunk="onboarding.unitsPerChunk",e.onboardingTokenAddr="onboarding.tokenAddr",e.votingGracePeriod="voting.gracePeriod",e.votingStakingAmount="voting.stakingAmount",e.votingVotingPeriod="voting.votingPeriod"}(s||(s={})),function(e){e.Yes="Yes",e.No="No"}(o||(o={})),function(e){e.STANDBY="STANDBY",e.AWAITING_CONFIRM="AWAITING_CONFIRM",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(i||(i={}))},900:function(e,t){},94:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.OK="OK",e.ERR="ERR"}(r||(r={}))},971:function(e,t){},974:function(e,t){},998:function(e,t){}},[[1023,4,5]]]);
//# sourceMappingURL=main.3f5b22ff.chunk.js.map